!function(a){String.prototype.trim===a&&(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),Array.prototype.reduce===a&&(Array.prototype.reduce=function(b){if(void 0===this||null===this)throw new TypeError;var f,c=Object(this),d=c.length>>>0,e=0;if("function"!=typeof b)throw new TypeError;if(0==d&&1==arguments.length)throw new TypeError;if(arguments.length>=2)f=arguments[1];else for(;;){if(e in c){f=c[e++];break}if(++e>=d)throw new TypeError}for(;d>e;)e in c&&(f=b.call(a,f,c[e],e,c)),e++;return f})}();var Zepto=function(){function A(a){return"[object Function]"==v.call(a)}function B(a){return a instanceof Object}function C(b){var c,d;if("[object Object]"!==v.call(b))return!1;if(d=A(b.constructor)&&b.constructor.prototype,!d||!hasOwnProperty.call(d,"isPrototypeOf"))return!1;for(c in b);return c===a||hasOwnProperty.call(b,c)}function D(a){return a instanceof Array}function E(a){return"number"==typeof a.length}function F(b){return b.filter(function(b){return b!==a&&null!==b})}function G(a){return a.length>0?[].concat.apply([],a):a}function H(a){return a.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function I(a){return a in i?i[a]:i[a]=new RegExp("(^|\\s)"+a+"(\\s|$)")}function J(a,b){return"number"!=typeof b||k[H(a)]?b:b+"px"}function K(a){var b,c;return h[a]||(b=g.createElement(a),g.body.appendChild(b),c=j(b,"").getPropertyValue("display"),b.parentNode.removeChild(b),"none"==c&&(c="block"),h[a]=c),h[a]}function L(b,d){return d===a?c(b):c(b).filter(d)}function M(a,b,c,d){return A(b)?b.call(a,c,d):b}function N(a,b,d){var e=a%2?b:b.parentNode;e?e.insertBefore(d,a?1==a?e.firstChild:2==a?b:null:b.nextSibling):c(d).remove()}function O(a,b){b(a);for(var c in a.childNodes)O(a.childNodes[c],b)}var a,b,c,d,x,y,e=[],f=e.slice,g=window.document,h={},i={},j=g.defaultView.getComputedStyle,k={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},l=/^\s*<(\w+|!)[^>]*>/,m=[1,3,8,9,11],n=["after","prepend","before","append"],o=g.createElement("table"),p=g.createElement("tr"),q={tr:g.createElement("tbody"),tbody:o,thead:o,tfoot:o,td:p,th:p,"*":g.createElement("div")},r=/complete|loaded|interactive/,s=/^\.([\w-]+)$/,t=/^#([\w-]+)$/,u=/^[\w-]+$/,v={}.toString,w={},z=g.createElement("div");return w.matches=function(a,b){if(!a||1!==a.nodeType)return!1;var c=a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.matchesSelector;if(c)return c.call(a,b);var d,e=a.parentNode,f=!e;return f&&(e=z).appendChild(a),d=~w.qsa(e,b).indexOf(a),f&&z.removeChild(a),d},x=function(a){return a.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""})},y=function(a){return a.filter(function(b,c){return a.indexOf(b)==c})},w.fragment=function(b,d){d===a&&(d=l.test(b)&&RegExp.$1),d in q||(d="*");var e=q[d];return e.innerHTML=""+b,c.each(f.call(e.childNodes),function(){e.removeChild(this)})},w.Z=function(a,b){return a=a||[],a.__proto__=arguments.callee.prototype,a.selector=b||"",a},w.isZ=function(a){return a instanceof w.Z},w.init=function(b,d){if(!b)return w.Z();if(A(b))return c(g).ready(b);if(w.isZ(b))return b;var e;if(D(b))e=F(b);else if(C(b))e=[c.extend({},b)],b=null;else if(m.indexOf(b.nodeType)>=0||b===window)e=[b],b=null;else if(l.test(b))e=w.fragment(b.trim(),RegExp.$1),b=null;else{if(d!==a)return c(d).find(b);e=w.qsa(g,b)}return w.Z(e,b)},c=function(a,b){return w.init(a,b)},c.extend=function(c){return f.call(arguments,1).forEach(function(d){for(b in d)d[b]!==a&&(c[b]=d[b])}),c},w.qsa=function(a,b){var c;return a===g&&t.test(b)?(c=a.getElementById(RegExp.$1))?[c]:e:1!==a.nodeType&&9!==a.nodeType?e:f.call(s.test(b)?a.getElementsByClassName(RegExp.$1):u.test(b)?a.getElementsByTagName(b):a.querySelectorAll(b))},c.isFunction=A,c.isObject=B,c.isArray=D,c.isPlainObject=C,c.inArray=function(a,b,c){return e.indexOf.call(b,a,c)},c.trim=function(a){return a.trim()},c.uuid=0,c.map=function(a,b){var c,e,f,d=[];if(E(a))for(e=0;e<a.length;e++)c=b(a[e],e),null!=c&&d.push(c);else for(f in a)c=b(a[f],f),null!=c&&d.push(c);return G(d)},c.each=function(a,b){var c,d;if(E(a)){for(c=0;c<a.length;c++)if(b.call(a[c],c,a[c])===!1)return a}else for(d in a)if(b.call(a[d],d,a[d])===!1)return a;return a},c.fn={forEach:e.forEach,reduce:e.reduce,push:e.push,indexOf:e.indexOf,concat:e.concat,map:function(a){return c.map(this,function(b,c){return a.call(b,c,b)})},slice:function(){return c(f.apply(this,arguments))},ready:function(a){return r.test(g.readyState)?a(c):g.addEventListener("DOMContentLoaded",function(){a(c)},!1),this},get:function(b){return b===a?f.call(this):this[b]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){null!=this.parentNode&&this.parentNode.removeChild(this)})},each:function(a){return this.forEach(function(b,c){a.call(b,c,b)}),this},filter:function(a){return c([].filter.call(this,function(b){return w.matches(b,a)}))},add:function(a,b){return c(y(this.concat(c(a,b))))},is:function(a){return this.length>0&&w.matches(this[0],a)},not:function(b){var d=[];if(A(b)&&b.call!==a)this.each(function(a){b.call(this,a)||d.push(this)});else{var e="string"==typeof b?this.filter(b):E(b)&&A(b.item)?f.call(b):c(b);this.forEach(function(a){e.indexOf(a)<0&&d.push(a)})}return c(d)},eq:function(a){return-1===a?this.slice(a):this.slice(a,+a+1)},first:function(){var a=this[0];return a&&!B(a)?a:c(a)},last:function(){var a=this[this.length-1];return a&&!B(a)?a:c(a)},find:function(a){var b;return b=1==this.length?w.qsa(this[0],a):this.map(function(){return w.qsa(this,a)}),c(b)},closest:function(a,b){for(var d=this[0];d&&!w.matches(d,a);)d=d!==b&&d!==g&&d.parentNode;return c(d)},parents:function(a){for(var b=[],d=this;d.length>0;)d=c.map(d,function(a){return(a=a.parentNode)&&a!==g&&b.indexOf(a)<0?(b.push(a),a):void 0});return L(b,a)},parent:function(a){return L(y(this.pluck("parentNode")),a)},children:function(a){return L(this.map(function(){return f.call(this.children)}),a)},siblings:function(a){return L(this.map(function(a,b){return f.call(b.parentNode.children).filter(function(a){return a!==b})}),a)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(a){return this.map(function(){return this[a]})},show:function(){return this.each(function(){"none"==this.style.display&&(this.style.display=null),"none"==j(this,"").getPropertyValue("display")&&(this.style.display=K(this.nodeName))})},replaceWith:function(a){return this.before(a).remove()},wrap:function(a){return this.each(function(){c(this).wrapAll(c(a)[0].cloneNode(!1))})},wrapAll:function(a){return this[0]&&(c(this[0]).before(a=c(a)),a.append(this)),this},unwrap:function(){return this.parent().each(function(){c(this).replaceWith(c(this).children())}),this},clone:function(){return c(this.map(function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display","none")},toggle:function(b){return(b===a?"none"==this.css("display"):b)?this.show():this.hide()},prev:function(){return c(this.pluck("previousElementSibling"))},next:function(){return c(this.pluck("nextElementSibling"))},html:function(b){return b===a?this.length>0?this[0].innerHTML:null:this.each(function(a){var d=this.innerHTML;c(this).empty().append(M(this,b,a,d))})},text:function(b){return b===a?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=b})},attr:function(c,d){var e;return"string"==typeof c&&d===a?0==this.length||1!==this[0].nodeType?a:"value"==c&&"INPUT"==this[0].nodeName?this.val():!(e=this[0].getAttribute(c))&&c in this[0]?this[0][c]:e:this.each(function(a){if(1===this.nodeType)if(B(c))for(b in c)this.setAttribute(b,c[b]);else this.setAttribute(c,M(this,d,a,this.getAttribute(c)))})},removeAttr:function(a){return this.each(function(){1===this.nodeType&&this.removeAttribute(a)})},prop:function(b,c){return c===a?this[0]?this[0][b]:a:this.each(function(a){this[b]=M(this,c,a,this[b])})},data:function(b,c){var d=this.attr("data-"+H(b),c);return null!==d?d:a},val:function(b){return b===a?this.length>0?this[0].value:a:this.each(function(a){this.value=M(this,b,a,this.value)})},offset:function(){if(0==this.length)return null;var a=this[0].getBoundingClientRect();return{left:a.left+window.pageXOffset,top:a.top+window.pageYOffset,width:a.width,height:a.height}},css:function(c,d){if(d===a&&"string"==typeof c)return 0==this.length?a:this[0].style[x(c)]||j(this[0],"").getPropertyValue(c);var e="";for(b in c)"string"==typeof c[b]&&""==c[b]?this.each(function(){this.style.removeProperty(H(b))}):e+=H(b)+":"+J(b,c[b])+";";return"string"==typeof c&&(""==d?this.each(function(){this.style.removeProperty(H(c))}):e=H(c)+":"+J(c,d)),this.each(function(){this.style.cssText+=";"+e})},index:function(a){return a?this.indexOf(c(a)[0]):this.parent().children().indexOf(this[0])},hasClass:function(a){return this.length<1?!1:I(a).test(this[0].className)},addClass:function(a){return this.each(function(b){d=[];var e=this.className,f=M(this,a,b,e);f.split(/\s+/g).forEach(function(a){c(this).hasClass(a)||d.push(a)},this),d.length&&(this.className+=(e?" ":"")+d.join(" "))})},removeClass:function(b){return this.each(function(c){return b===a?this.className="":(d=this.className,M(this,b,c,d).split(/\s+/g).forEach(function(a){d=d.replace(I(a)," ")}),this.className=d.trim(),void 0)})},toggleClass:function(b,d){return this.each(function(e){var f=M(this,b,e,this.className);(d===a?!c(this).hasClass(f):d)?c(this).addClass(f):c(this).removeClass(f)})}},["width","height"].forEach(function(b){c.fn[b]=function(d){var e,f=b.replace(/./,function(a){return a[0].toUpperCase()});return d===a?this[0]==window?window["inner"+f]:this[0]==g?g.documentElement["offset"+f]:(e=this.offset())&&e[b]:this.each(function(a){var e=c(this);e.css(b,M(this,d,a,e[b]()))})}}),n.forEach(function(a,b){c.fn[a]=function(){var a=c.map(arguments,function(a){return B(a)?a:w.fragment(a)});if(a.length<1)return this;var d=this.length,e=d>1,f=2>b;return this.each(function(c,g){for(var h=0;h<a.length;h++){var i=a[f?a.length-h-1:h];O(i,function(a){null!=a.nodeName&&"SCRIPT"===a.nodeName.toUpperCase()&&(!a.type||"text/javascript"===a.type)&&window.eval.call(window,a.innerHTML)}),e&&d-1>c&&(i=i.cloneNode(!0)),N(b,g,i)}})},c.fn[b%2?a+"To":"insert"+(b?"Before":"After")]=function(b){return c(b)[a](this),this}}),w.Z.prototype=c.fn,w.camelize=x,w.uniq=y,c.zepto=w,c}();window.Zepto=Zepto,"$"in window||(window.$=Zepto),function(a){function f(a){return a._zid||(a._zid=d++)}function g(a,b,d,e){if(b=h(b),b.ns)var g=i(b.ns);return(c[f(a)]||[]).filter(function(a){return!(!a||b.e&&a.e!=b.e||b.ns&&!g.test(a.ns)||d&&f(a.fn)!==f(d)||e&&a.sel!=e)})}function h(a){var b=(""+a).split(".");return{e:b[0],ns:b.slice(1).sort().join(" ")}}function i(a){return new RegExp("(?:^| )"+a.replace(" "," .* ?")+"(?: |$)")}function j(b,c,d){a.isObject(b)?a.each(b,d):b.split(/\s/).forEach(function(a){d(a,c)})}function k(b,d,e,g,i,k){k=!!k;var l=f(b),m=c[l]||(c[l]=[]);j(d,e,function(c,d){var e=i&&i(d,c),f=e||d,j=function(a){var c=f.apply(b,[a].concat(a.data));return c===!1&&a.preventDefault(),c},l=a.extend(h(c),{fn:d,proxy:j,sel:g,del:e,i:m.length});m.push(l),b.addEventListener(l.e,j,k)})}function l(a,b,d,e){var h=f(a);j(b||"",d,function(b,d){g(a,b,d,e).forEach(function(b){delete c[h][b.i],a.removeEventListener(b.e,b.proxy,!1)})})}function p(b){var c=a.extend({originalEvent:b},b);return a.each(o,function(a,d){c[a]=function(){return this[d]=m,b[a].apply(b,arguments)},c[d]=n}),c}function q(a){if(!("defaultPrevented"in a)){a.defaultPrevented=!1;var b=a.preventDefault;a.preventDefault=function(){this.defaultPrevented=!0,b.call(this)}}}var c=(a.zepto.qsa,{}),d=1,e={};e.click=e.mousedown=e.mouseup=e.mousemove="MouseEvents",a.event={add:k,remove:l},a.proxy=function(b,c){if(a.isFunction(b)){var d=function(){return b.apply(c,arguments)};return d._zid=f(b),d}if("string"==typeof c)return a.proxy(b[c],b);throw new TypeError("expected function")},a.fn.bind=function(a,b){return this.each(function(){k(this,a,b)})},a.fn.unbind=function(a,b){return this.each(function(){l(this,a,b)})},a.fn.one=function(a,b){return this.each(function(c,d){k(this,a,b,null,function(a,b){return function(){var c=a.apply(d,arguments);return l(d,b,a),c}})})};var m=function(){return!0},n=function(){return!1},o={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};a.fn.delegate=function(b,c,d){var e=!1;return("blur"==c||"focus"==c)&&(a.iswebkit?c="blur"==c?"focusout":"focus"==c?"focusin":c:e=!0),this.each(function(f,g){k(g,c,d,b,function(c){return function(d){var e,f=a(d.target).closest(b,g).get(0);return f?(e=a.extend(p(d),{currentTarget:f,liveFired:g}),c.apply(f,[e].concat([].slice.call(arguments,1)))):void 0}},e)})},a.fn.undelegate=function(a,b,c){return this.each(function(){l(this,b,c,a)})},a.fn.live=function(b,c){return a(document.body).delegate(this.selector,b,c),this},a.fn.die=function(b,c){return a(document.body).undelegate(this.selector,b,c),this},a.fn.on=function(b,c,d){return void 0==c||a.isFunction(c)?this.bind(b,c):this.delegate(c,b,d)},a.fn.off=function(b,c,d){return void 0==c||a.isFunction(c)?this.unbind(b,c):this.undelegate(c,b,d)},a.fn.trigger=function(b,c){return"string"==typeof b&&(b=a.Event(b)),q(b),b.data=c,this.each(function(){"dispatchEvent"in this&&this.dispatchEvent(b)})},a.fn.triggerHandler=function(b,c){var d,e;return this.each(function(f,h){d=p("string"==typeof b?a.Event(b):b),d.data=c,d.target=h,a.each(g(h,b.type||b),function(a,b){return e=b.proxy(d),d.isImmediatePropagationStopped()?!1:void 0})}),e},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout change select keydown keypress keyup error".split(" ").forEach(function(b){a.fn[b]=function(a){return this.bind(b,a)}}),["focus","blur"].forEach(function(b){a.fn[b]=function(a){if(a)this.bind(b,a);else if(this.length)try{this.get(0)[b]()}catch(c){}return this}}),a.Event=function(a,b){var c=document.createEvent(e[a]||"Events"),d=!0;if(b)for(var f in b)"bubbles"==f?d=!!b[f]:c[f]=b[f];return c.initEvent(a,d,!0,null,null,null,null,null,null,null,null,null,null,null,null),c}}(Zepto),function(a){function b(a){var b=this.os={},c=this.browser={},d=a.match(/WebKit\/([\d.]+)/),e=a.match(/(Android)\s+([\d.]+)/),f=a.match(/(iPad).*OS\s([\d_]+)/),g=!f&&a.match(/(iPhone\sOS)\s([\d_]+)/),h=a.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),i=h&&a.match(/TouchPad/),j=a.match(/Kindle\/([\d.]+)/),k=a.match(/Silk\/([\d._]+)/),l=a.match(/(BlackBerry).*Version\/([\d.]+)/);(c.webkit=!!d)&&(c.version=d[1]),e&&(b.android=!0,b.version=e[2]),g&&(b.ios=b.iphone=!0,b.version=g[2].replace(/_/g,".")),f&&(b.ios=b.ipad=!0,b.version=f[2].replace(/_/g,".")),h&&(b.webos=!0,b.version=h[2]),i&&(b.touchpad=!0),l&&(b.blackberry=!0,b.version=l[2]),j&&(b.kindle=!0,b.version=j[1]),k&&(c.silk=!0,c.version=k[1]),!k&&b.android&&a.match(/Kindle Fire/)&&(c.silk=!0)}b.call(a,navigator.userAgent),a.__detect=b}(Zepto),function(a,b){function l(a){return a.toLowerCase()}function m(a){return d?d+a:l(a)}var d,c="",g={Webkit:"webkit",Moz:"",O:"o",ms:"MS"},h=window.document,i=h.createElement("div"),j=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,k={};a.each(g,function(a,e){return i.style[a+"TransitionProperty"]!==b?(c="-"+l(a)+"-",d=e,!1):void 0}),k[c+"transition-property"]=k[c+"transition-duration"]=k[c+"transition-timing-function"]=k[c+"animation-name"]=k[c+"animation-duration"]="",a.fx={off:d===b&&i.style.transitionProperty===b,cssPrefix:c,transitionEnd:m("TransitionEnd"),animationEnd:m("AnimationEnd")},a.fn.animate=function(b,c,d,e){return a.isObject(c)&&(d=c.easing,e=c.complete,c=c.duration),c&&(c/=1e3),this.anim(b,c,d,e)},a.fn.anim=function(d,e,f,g){var h,l,n,i={},m=this,o=a.fx.transitionEnd;if(e===b&&(e=.4),a.fx.off&&(e=0),"string"==typeof d)i[c+"animation-name"]=d,i[c+"animation-duration"]=e+"s",o=a.fx.animationEnd;else{for(l in d)j.test(l)?(h||(h=[]),h.push(l+"("+d[l]+")")):i[l]=d[l];h&&(i[c+"transform"]=h.join(" ")),!a.fx.off&&"object"==typeof d&&(i[c+"transition-property"]=Object.keys(d).join(", "),i[c+"transition-duration"]=e+"s",i[c+"transition-timing-function"]=f||"linear")}return n=function(b){if("undefined"!=typeof b){if(b.target!==b.currentTarget)return;a(b.target).unbind(o,arguments.callee)}a(this).css(k),g&&g.call(this)},e>0&&this.bind(o,n),setTimeout(function(){m.css(i),0>=e&&setTimeout(function(){m.each(function(){n.call(this)})},0)},0),this},i=null}(Zepto),function($){function triggerAndReturn(a,b,c){var d=$.Event(b);return $(a).trigger(d,c),!d.defaultPrevented}function triggerGlobal(a,b,c,d){return a.global?triggerAndReturn(b||document,c,d):void 0}function ajaxStart(a){a.global&&0===$.active++&&triggerGlobal(a,null,"ajaxStart")}function ajaxStop(a){a.global&&!--$.active&&triggerGlobal(a,null,"ajaxStop")}function ajaxBeforeSend(a,b){var c=b.context;return b.beforeSend.call(c,a,b)===!1||triggerGlobal(b,c,"ajaxBeforeSend",[a,b])===!1?!1:void triggerGlobal(b,c,"ajaxSend",[a,b])}function ajaxSuccess(a,b,c){var d=c.context,e="success";c.success.call(d,a,e,b),triggerGlobal(c,d,"ajaxSuccess",[b,c,a]),ajaxComplete(e,b,c)}function ajaxError(a,b,c,d){var e=d.context;d.error.call(e,c,b,a),triggerGlobal(d,e,"ajaxError",[c,d,a]),ajaxComplete(b,c,d)}function ajaxComplete(a,b,c){var d=c.context;c.complete.call(d,b,a),triggerGlobal(c,d,"ajaxComplete",[b,c]),ajaxStop(c)}function empty(){}function mimeToDataType(a){return a&&(a==htmlType?"html":a==jsonType?"json":scriptTypeRE.test(a)?"script":xmlTypeRE.test(a)&&"xml")||"text"}function appendQuery(a,b){return(a+"&"+b).replace(/[&?]{1,2}/,"?")}function serializeData(a){isObject(a.data)&&(a.data=$.param(a.data)),a.data&&(!a.type||"GET"==a.type.toUpperCase())&&(a.url=appendQuery(a.url,a.data))}function serialize(a,b,c,d){var e=$.isArray(b);$.each(b,function(b,f){d&&(b=c?d:d+"["+(e?"":b)+"]"),!d&&e?a.add(f.name,f.value):(c?$.isArray(f):isObject(f))?serialize(a,f,c,b):a.add(b,f)})}var key,name,jsonpID=0,isObject=$.isObject,document=window.document,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,scriptTypeRE=/^(?:text|application)\/javascript/i,xmlTypeRE=/^(?:text|application)\/xml/i,jsonType="application/json",htmlType="text/html",blankRE=/^\s*$/;$.active=0,$.ajaxJSONP=function(a){var f,b="jsonp"+ ++jsonpID,c=document.createElement("script"),d=function(){$(c).remove(),b in window&&(window[b]=empty),ajaxComplete("abort",e,a)},e={abort:d};return a.error&&(c.onerror=function(){e.abort(),a.error()}),window[b]=function(d){clearTimeout(f),$(c).remove(),delete window[b],ajaxSuccess(d,e,a)},serializeData(a),c.src=a.url.replace(/=\?/,"="+b),$("head").append(c),a.timeout>0&&(f=setTimeout(function(){e.abort(),ajaxComplete("timeout",e,a)},a.timeout)),e},$.ajaxSettings={type:"GET",beforeSend:empty,success:empty,error:empty,complete:empty,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:jsonType,xml:"application/xml, text/xml",html:htmlType,text:"text/plain"},crossDomain:!1,timeout:0},$.ajax=function(options){var settings=$.extend({},options||{});for(key in $.ajaxSettings)void 0===settings[key]&&(settings[key]=$.ajaxSettings[key]);ajaxStart(settings),settings.crossDomain||(settings.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(settings.url)&&RegExp.$2!=window.location.host);var dataType=settings.dataType,hasPlaceholder=/=\?/.test(settings.url);if("jsonp"==dataType||hasPlaceholder)return hasPlaceholder||(settings.url=appendQuery(settings.url,"callback=?")),$.ajaxJSONP(settings);settings.url||(settings.url=window.location.toString()),serializeData(settings);var abortTimeout,mime=settings.accepts[dataType],baseHeaders={},protocol=/^([\w-]+:)\/\//.test(settings.url)?RegExp.$1:window.location.protocol,xhr=$.ajaxSettings.xhr();settings.crossDomain||(baseHeaders["X-Requested-With"]="XMLHttpRequest"),mime&&(baseHeaders.Accept=mime,mime.indexOf(",")>-1&&(mime=mime.split(",",2)[0]),xhr.overrideMimeType&&xhr.overrideMimeType(mime)),(settings.contentType||settings.data&&"GET"!=settings.type.toUpperCase())&&(baseHeaders["Content-Type"]=settings.contentType||"application/x-www-form-urlencoded"),settings.headers=$.extend(baseHeaders,settings.headers||{}),xhr.onreadystatechange=function(){if(4==xhr.readyState){clearTimeout(abortTimeout);var result,error=!1;if(xhr.status>=200&&xhr.status<300||304==xhr.status||0==xhr.status&&"file:"==protocol){dataType=dataType||mimeToDataType(xhr.getResponseHeader("content-type")),result=xhr.responseText;try{"script"==dataType?(1,eval)(result):"xml"==dataType?result=xhr.responseXML:"json"==dataType&&(result=blankRE.test(result)?null:JSON.parse(result))}catch(e){error=e}error?ajaxError(error,"parsererror",xhr,settings):ajaxSuccess(result,xhr,settings)}else ajaxError(null,"error",xhr,settings)}};var async="async"in settings?settings.async:!0;xhr.open(settings.type,settings.url,async);for(name in settings.headers)xhr.setRequestHeader(name,settings.headers[name]);return ajaxBeforeSend(xhr,settings)===!1?(xhr.abort(),!1):(settings.timeout>0&&(abortTimeout=setTimeout(function(){xhr.onreadystatechange=empty,xhr.abort(),ajaxError(null,"timeout",xhr,settings)},settings.timeout)),xhr.send(settings.data?settings.data:null),xhr)},$.get=function(a,b){return $.ajax({url:a,success:b})},$.post=function(a,b,c,d){return $.isFunction(b)&&(d=d||c,c=b,b=null),$.ajax({type:"POST",url:a,data:b,success:c,dataType:d})},$.getJSON=function(a,b){return $.ajax({url:a,success:b,dataType:"json"})},$.fn.load=function(a,b){if(!this.length)return this;var e,c=this,d=a.split(/\s/);return d.length>1&&(a=d[0],e=d[1]),$.get(a,function(a){c.html(e?$(document.createElement("div")).html(a.replace(rscript,"")).find(e).html():a),b&&b.call(c)}),this};var escape=encodeURIComponent;$.param=function(a,b){var c=[];return c.add=function(a,b){this.push(escape(a)+"="+escape(b))},serialize(c,a,b),c.join("&").replace("%20","+")}}(Zepto),function(a){a.fn.serializeArray=function(){var c,b=[];return a(Array.prototype.slice.call(this.get(0).elements)).each(function(){c=a(this);var d=c.attr("type");"fieldset"!=this.nodeName.toLowerCase()&&!this.disabled&&"submit"!=d&&"reset"!=d&&"button"!=d&&("radio"!=d&&"checkbox"!=d||this.checked)&&b.push({name:c.attr("name"),value:c.val()})}),b},a.fn.serialize=function(){var a=[];return this.serializeArray().forEach(function(b){a.push(encodeURIComponent(b.name)+"="+encodeURIComponent(b.value))}),a.join("&")},a.fn.submit=function(b){if(b)this.bind("submit",b);else if(this.length){var c=a.Event("submit");this.eq(0).trigger(c),c.defaultPrevented||this.get(0).submit()}return this}}(Zepto),function(a){function d(a){return"tagName"in a?a:a.parentNode}function e(a,b,c,d){var e=Math.abs(a-b),f=Math.abs(c-d);return e>=f?a-b>0?"Left":"Right":c-d>0?"Up":"Down"}function h(){g=null,b.last&&(b.el.trigger("longTap"),b={})}function i(){g&&clearTimeout(g),g=null}var c,g,b={},f=750;a(document).ready(function(){var j,k;a(document.body).bind("touchstart",function(e){j=Date.now(),k=j-(b.last||j),b.el=a(d(e.touches[0].target)),c&&clearTimeout(c),b.x1=e.touches[0].pageX,b.y1=e.touches[0].pageY,k>0&&250>=k&&(b.isDoubleTap=!0),b.last=j,g=setTimeout(h,f)}).bind("touchmove",function(a){i(),b.x2=a.touches[0].pageX,b.y2=a.touches[0].pageY}).bind("touchend",function(){i(),b.isDoubleTap?(b.el.trigger("doubleTap"),b={}):b.x2&&Math.abs(b.x1-b.x2)>30||b.y2&&Math.abs(b.y1-b.y2)>30?(b.el.trigger("swipe")&&b.el.trigger("swipe"+e(b.x1,b.x2,b.y1,b.y2)),b={}):"last"in b&&(b.el.trigger("tap"),c=setTimeout(function(){c=null,b.el.trigger("singleTap"),b={}},250))}).bind("touchcancel",function(){c&&clearTimeout(c),g&&clearTimeout(g),g=c=null,b={}})}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(b){a.fn[b]=function(a){return this.bind(b,a)}})}(Zepto);var Swapper=function(c,b){function a(e,d,f,g){a._swapper(e,d,f,g)}return c&&c.fn&&c.extend(c.fn,{swapper:function(d,e,f){return d=c(d)[0],this.forEach(function(g){a._swapper(g,d,e,f)}),this}}),b&&b.fn&&(b.fn.swapper=function(d,e,f){return d=b(d)[0],this.each(function(){a._swapper(this,d,e,f)}),this}),a}(window.Zepto,window.jQuery);Swapper._os=function(f,d){var c,a,b;(b=/\bCPU.*OS (\d+(_\d+)?)/i.exec(f))?(c="ios",a=b[1].replace("_",".")):(b=/\bAndroid (\d+(\.\d+)?)/.exec(f))&&(c="android",a=b[1]);var e={name:c,version:a&&d(a)};return e[c]=!0,e}(navigator.userAgent,parseFloat),Swapper._isNode=function(a,b){return function(d){if(!d)return!1;try{return d instanceof a||d instanceof b}catch(c){}return"object"!=typeof d?!1:"number"!=typeof d.nodeType?!1:"string"!=typeof d.nodeName?!1:!0}}(Node,HTMLElement),Swapper._isInDOM=function(a){return function(c,b){if(!b&&!a(c))throw TypeError("element must be a DOM node, got "+c);for(;c=c.parentNode;)if(c===document)return!0;return!1}}(Swapper._isNode),Swapper._insertBefore=function(){return function(a,b){b.parentNode.insertBefore(a,b)}}(),Swapper._insertAfter=function(){return function(a,c){var b=c.parentNode;b.lastchild===c?b.appendChild(a):b.insertBefore(a,c.nextSibling)}}(),Swapper._removeNode=function(){return function(a){a.parentNode&&a.parentNode.removeChild(a)}}(),Swapper._setTransform=function(){return function(b,a){b.style["-webkit-transform"]=a,b.style["-moz-transform"]=a,b.style["-ms-transform"]=a,b.style["-o-transform"]=a,b.style.transform=a}}(),Swapper._setTransition=function(){return function(a,b){b?(a.style["-webkit-transition"]="-webkit-"+b,a.style["-moz-transition"]="-moz-"+b,a.style["-ms-transition"]="-ms-"+b,a.style["-o-transition"]="-o-"+b,a.style.transition=b):(a.style["-webkit-transition"]="",a.style["-moz-transition"]="",a.style["-ms-transition"]="",a.style["-o-transition"]="",a.style.transition="")}}(),Swapper._getStyles=function(a){return function(c,d){var b;return b=d?c.style:a.defaultView.getComputedStyle(c,null),{"-webkit-transition":b["-webkit-transition"],"-moz-transition":b["-moz-transition"],"-ms-transition":b["-ms-transition"],"-o-transition":b["-o-transition"],transition:b.transition,display:b.display,opacity:b.opacity,top:b.top,left:b.left,height:b.height,width:b.width,position:b.position}}}(document),Swapper._easings={linear:"linear",ease:"ease","ease-in":"ease-in","ease-out":"ease-out","ease-in-out":"ease-in-out","step-start":"step-start","step-end":"step-end"},Swapper._transitions={fade:[{fade:!0},{fade:!0}],"fade-on":[{fade:!0},{}],"fade-off":[{},{fade:!0},!0],"scale-in":[{transform:"scale(0.01)"},{}],"scale-out":[{},{transform:"scale(0.01)"},!0],"rotate-left":[{transform:"rotateY(-180deg) perspective(360px)",fade:!0},{transform:"rotateY( 180deg) perspective(360px)",fade:!0}],"rotate-right":[{transform:"rotateY( 180deg) perspective(360px)",fade:!0},{transform:"rotateY(-180deg) perspective(360px)",fade:!0}],"cube-left":[{transform:"translate3d( 50%,0,0) rotateY(-90deg) perspective(360px)"},{transform:"translate3d(-50%,0,0) rotateY( 90deg) perspective(360px)"}],"cube-right":[{transform:"translate3d(-50%,0,0) rotateY( 90deg) perspective(360px)"},{transform:"translate3d( 50%,0,0) rotateY(-90deg) perspective(360px)"}],"swap-left":[{transform:"translate3d( 65%,0,0) rotateY( 90deg) perspective(360px)"},{transform:"translate3d(-65%,0,0) rotateY(-90deg) perspective(360px)"}],"swap-right":[{transform:"translate3d(-65%,0,0) rotateY(-90deg) perspective(360px)"},{transform:"translate3d( 65%,0,0) rotateY( 90deg) perspective(360px)"}],"explode-in":[{fade:!0,transform:"scale(1.25)"},{}],"explode-out":[{},{fade:!0,transform:"scale(1.25)"},!0],"implode-in":[{},{fade:!0,transform:"scale(0.60)"},!0],"implode-out":[{fade:!0,transform:"scale(0.80)"},{}],"slide-left":[{transform:"translate3d( 100%,0,0)"},{transform:"translate3d(-100%,0,0)"}],"slide-right":[{transform:"translate3d(-100%,0,0)"},{transform:"translate3d( 100%,0,0)"}],"slide-up":[{transform:"translate3d(0, 100%,0)"},{transform:"translate3d(0,-100%,0)"}],"slide-down":[{transform:"translate3d(0,-100%,0)"},{transform:"translate3d(0, 100%,0)"}],"slideon-left":[{transform:"translate3d(-100%,0,0)"},{}],"slideoff-left":[{},{transform:"translate3d(-100%,0,0)"},!0],"slideon-right":[{transform:"translate3d(100%,0,0)"},{}],"slideoff-right":[{},{transform:"translate3d(100%,0,0)"},!0],"slideon-up":[{transform:"translate3d(0,-100%,0)"},{}],"slideoff-up":[{},{transform:"translate3d(0,-100%,0)"},!0],"slideon-down":[{transform:"translate3d(0,100%,0)"},{}],"slideoff-down":[{},{transform:"translate3d(0,100%,0)"},!0],"glideon-right":[{transform:"translate3d(110%,0,0)"},{transform:"translate3d(-20%,0,0)"}],"glideoff-right":[{transform:"translate3d(-20%,0,0)"},{transform:"translate3d(110%,0,0)"},!0],"glideon-left":[{transform:"translate3d(-110%,0,0)"},{transform:"translate3d(20%,0,0)"}],"glideoff-left":[{transform:"translate3d(20%,0,0)"},{transform:"translate3d(-110%,0,0)"},!0],"glideon-down":[{transform:"translate3d(0,110%,0)"},{transform:"translate3d(0,-20%,0)"}],"glideoff-down":[{transform:"translate3d(0,-20%,0)"},{transform:"translate3d(0,110%,0)"},!0],"glideon-up":[{transform:"translate3d(0,-110%,0)"},{transform:"translate3d(0,20%,0)"}],"glideoff-up":[{transform:"translate3d(0,20%,0)"},{transform:"translate3d(0,-110%,0)"},!0]},Swapper._validate=function(e,f,d){function c(g){if(!e(g))throw TypeError("element must be a DOM node, got "+g)}function b(g){switch(typeof g){case"string":g={transition:g};break;case"undefined":g={};break;case"object":break;default:throw TypeError("options must be an object if defined, got "+g)}switch(typeof g.transition){case"string":if(!(g.transition in f)&&"instant"!==g.transition)throw TypeError(g.transition+" is not a valid transition");break;case"undefined":break;default:throw TypeError("transition must be a string if defined, got "+g.transition)}switch(typeof g.duration){case"number":if(g.duration<0)throw TypeError("duration must be a non-negative integer, got "+g.duration);break;case"undefined":break;default:throw TypeError("duration must be a number if defined, got "+g.duration)}switch(typeof g.easing){case"string":if(!(g.easing in d)&&"cubic-bezier("!==g.easing.substr(0,13))throw TypeError(g.easing+" is not a valid easing");break;case"undefined":break;default:throw TypeError("easing must be a string if defined, got "+g.easing)}return g}function a(g){switch(typeof g){case"undefined":g=function(){};break;case"function":break;default:throw TypeError("callback must be a function if defined, got "+g)}return g}return{element:c,options:b,callback:a}}(Swapper._isNode,Swapper._transitions,Swapper._easings),Swapper._swapper=function(k,w,f,e,A,x,g,h,j,D,l,q){function r(G,F,H,I){if(q.element(G),q.element(F),"function"==typeof H&&(I=H,H={}),H=q.options(H),I=q.callback(I),G._swapper)throw Error("elem1 is currently being swapped");if(F._swapper)throw Error("elem2 is currently being swapped");if(!f(G,!0))throw Error("elem1 must be in the DOM to be swapped");G._swapper=!0,F._swapper=!0,x(F),o(G,F,H,function(){G._swapper=!1,F._swapper=!1,I()})}function o(O,N,P,M){if("instant"===P.transition)return A(N,O),x(O),void M();var L=D[P.transition||E],K=P.easing||z,J=P.duration||300;"cubic-bezier("!==K.substr(0,13)&&(K=l[K]),A(N,O);var I=j(O),H=j(N),G=j(O,!0),F=j(N,!0);C(O,N,I,H),L[2]&&e(N,O),N.style.opacity="0",u(O,N),setTimeout(function(){N.style.opacity=H.opacity,b(O,N,L),setTimeout(function(){n(O,N,J,K),setTimeout(function(){y(O,N,L),B(O,N,I,H,L,J,function(){x(O),t(O,N,J,K),setTimeout(function(){v(O,N,G,F,L),d(O,N,G,F),setTimeout(function(){c(O,N,G,F),M()},0)},0)})},0)},0)},0)}function C(G,F,I,H){var J=G.getBoundingClientRect();"none"!==I.display&&(F.style.position=p?"absolute":"fixed",F.style.top=J.top+"px",F.style.left=J.left+"px"),F.style.height=H.height||I.height,F.style.width=H.width||I.width}function d(G,F,I,H){F.style.position=H.position,F.style.top=H.top,F.style.left=H.left,F.style.height=H.height,F.style.width=H.width}function b(G,F,H){g(G,a),g(F,H[0].transform||a),H[0].fade&&(F.style.opacity="0"),H[1].fade&&(G.style.opacity="1")
}function y(G,F,H){g(G,H[1].transform||a),g(F,a),H[0].fade&&(F.style.opacity="1"),H[1].fade&&(G.style.opacity="0")}function v(G,F,I,H,J){g(G,""),g(F,""),J[0].fade&&(F.style.opacity=H.opacity),J[1].fade&&(G.style.opacity=I.opacity)}function n(G,F,H,J){var I="transform "+H/1e3+"s "+J+",opacity "+H/1e3+"s "+J;h(G,I),h(F,I)}function t(G,F){h(G,""),h(F,"")}function u(G,F){h(G,""),h(F,"")}function c(G,F,I,H){G.style["-webkit-transition"]=I["-webkit-transition"],G.style["-moz-transition"]=I["-moz-transition"],G.style["-ms-transition"]=I["-ms-transition"],G.style["-o-transition"]=I["-o-transition"],G.style.transition=I.transition,F.style["-webkit-transition"]=H["-webkit-transition"],F.style["-moz-transition"]=H["-moz-transition"],F.style["-ms-transition"]=H["-ms-transition"],F.style["-o-transition"]=H["-o-transition"],F.style.transition=H.transition}function i(F,G){return"none"===F.display?!1:G.fade?!0:G.transform?G.transform===a?!1:!0:!1}function B(Q,N,H,F,K,I,M){function P(){G.addEventListener("webkitTransitionEnd",L,!1),G.addEventListener("transitionend",L,!1),G.addEventListener("oTransitionEnd",L,!1),G.addEventListener("otransitionend",L,!1),G.addEventListener("MSTransitionEnd",L,!1),G.addEventListener("transitionend",L,!1)}function O(){G.removeEventListener("webkitTransitionEnd",L),G.removeEventListener("transitionend",L),G.removeEventListener("oTransitionEnd",L),G.removeEventListener("otransitionend",L),G.removeEventListener("MSTransitionEnd",L),G.removeEventListener("transitionend",L)}function L(R){J||R&&R.target&&R.target!==G||(J=!0,G&&O(),M())}var G;i(F,K[0])?(G=N,P()):i(H,K[1])?(G=Q,P()):setTimeout(L,I);var J=!1}var a="translate3d(0,0,0) scale(1)",E="fade",z="ease-in-out",p=k.ios&&5===Math.floor(k.version);return r}(Swapper._os,Swapper._isNode,Swapper._isInDOM,Swapper._insertBefore,Swapper._insertAfter,Swapper._removeNode,Swapper._setTransform,Swapper._setTransition,Swapper._getStyles,Swapper._transitions,Swapper._easings,Swapper._validate,window,document);var Clickable=function(c,b){function a(){a._enableClicking.apply(this,arguments)}return a.touchable=function(){return a._os.touchable},a.sticky=function(){a._enableStickyClick.apply(this,arguments)},b&&b.fn&&(b.fn.clickable=function(d){return this.each(function(){a._enableClicking(this,d)}),this},b.fn.stickyClick=function(d){return this.each(function(){a._enableStickyClick(this,d)}),this}),c&&c.fn&&c.extend(c.fn,{clickable:function(d){return this.forEach(function(e){a._enableClicking(e,d)}),this},stickyClick:function(d){return this.forEach(function(e){a._enableStickyClick(e,d)}),this}}),a}(window.Zepto,window.jQuery);Clickable._os=function(f,d){var c,a,b;(b=/\bCPU.*OS (\d+(_\d+)?)/i.exec(f))?(c="ios",a=b[1].replace("_",".")):(b=/\bAndroid (\d+(\.\d+)?)/.exec(f))&&(c="android",a=b[1]);var e={name:c,version:a&&d(a),touchable:!!c};return e[c]=!0,e}(navigator.userAgent,parseFloat),Clickable._trimString=function(a){var b=/^\s+|\s+$/g;return function(c){return a(c).replace(b,"")}}(String),Clickable._isDOMNode=function(a,b){return function(d){if(!d)return!1;try{return d instanceof a||d instanceof b}catch(c){}return"object"!=typeof d?!1:"number"!=typeof d.nodeType?!1:"string"!=typeof d.nodeName?!1:!0}}(Node,HTMLElement),Clickable._isInDOM=function(){return function(a){for(;a=a.parentNode;)if(a===document)return!0;return!1}}(),Clickable._bindEvents=function(){return function(c,b){for(var a in b)c.addEventListener?c.addEventListener(a,b[a],!1):c.attachEvent&&c.attachEvent("on"+a,b[a])}}(),Clickable._unbindEvents=function(){return function(c,b){for(var a in b)c.removeEventListener&&c.removeEventListener(a,b[a])}}(),Clickable._addClass=function(){return function(b,a){b.className+=" "+a}}(),Clickable._removeClass=function(a){return function(c,b){c.className=a(c.className.replace(new RegExp("\\b"+b+"\\b"),""))}}(Clickable._trimString),Clickable._enableClicking=function(h,o,a,f,c,k,n){function b(K,N){function L(P,Q){E=!0,I=+new Date,G=P,F=Q,J=j(K),J&&(s=J.scrollTop,J.addEventListener("scroll",A,!0))}function H(){J&&J.removeEventListener("scroll",A),J=null,s=null,G=null,F=null,E=!1}function A(){B()}function O(){return E}function t(){k(K,N)}function r(){n(K,N)}function v(){return f(K,{click:x}),h.touchable?void(h.ios?(f(K,{DOMNodeInsertedIntoDocument:M,DOMNodeRemovedFromDocument:y}),a(K)&&M()):M()):void f(K,{mousedown:C,mousemove:D,mouseout:D,mouseup:z})}function M(){f(K,{touchstart:w,touchmove:B,touchcancel:B,touchend:u})}function y(){c(K,{touchstart:w,touchmove:B,touchcancel:B,touchend:u})}function x(P){return P=P||window.event,K.disabled||!q?(P.stopImmediatePropagation&&P.stopImmediatePropagation(),P.preventDefault(),P.stopPropagation(),P.cancelBubble=!0,P.returnValue=!1,!1):(q=!1,void setTimeout(function(){p=!1},0))}function C(P){return q=!1,K.disabled||!e(P.target,K)?(P.preventDefault(),void H()):(L(P.clientX,P.clientY),void t())}function D(P){P.preventDefault(),H(),q=!1,r()}function z(P){return K.disabled?(P.preventDefault(),H(),void(q=!1)):(O()?q=!0:(P.preventDefault(),q=!1),H(),void r())}function w(P){if(q=!1,p||K.disabled||1!==P.touches.length||!e(P.target,K))return void H();p=!0;var Q=P.changedTouches[0];if(L(Q.clientX,Q.clientY),J&&(J._isScrolling||0>s||J.scrollHeight<s))return void H();var Q=I;setTimeout(function(){O()&&Q===I&&t()},g)}function B(P){q=!1,H(),P&&(p=!1),K.disabled||r()}function u(U){var Q=O(),R=J,S=s,P=G,V=F;if(B(),!Q||K.disabled)return void(p=!1);if(!R||!R._isScrolling&&R.scrollTop===S){if(!U.stopImmediatePropagation)return void(q=!0);var T=+new Date-I;T>g?(q=!0,d(K,P,V)):(t(),setTimeout(function(){r(),q=!0,d(K,P,V)},1))}}if(!o(K))throw TypeError("element "+K+" must be a DOM element");if(!K._clickable){switch(K._clickable=!0,typeof N){case"undefined":N=i;break;case"string":break;default:throw TypeError("active class "+N+" must be a string")}var G,F,I,J,s,E=!1,q=!1;K.setAttribute(m,N),K.style["-webkit-tap-highlight-color"]="rgba(255,255,255,0)",v()}}function e(r,q){do{if(r===q)return!0;if(r._clickable)return!1}while(r=r.parentNode);return!1}function d(s,q,t){var r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,1,q||0,t||0,q||0,t||0,!1,!1,!1,!1,0,null),s.dispatchEvent(r)}function j(q){if(h.ios&&!(h.version<5))for(;q=q.parentNode;)if(q._scrollable){if(q._iScroll)return;return q}}{var i="active",m="data-clickable-class",g=40,p=!1;!!h.ios}return b}(Clickable._os,Clickable._isDOMNode,Clickable._isInDOM,Clickable._bindEvents,Clickable._unbindEvents,Clickable._addClass,Clickable._removeClass),Clickable._enableStickyClick=function(a,c,f){function e(i,h,g){if(!c(i))throw TypeError("button must be a DOM element, got "+i);switch(typeof h){case"string":break;case"function":g=h,h=void 0;break;default:throw TypeError("button active class must be a string if defined, got "+h)}if("function"!=typeof g)throw TypeError("sticky click handler must be a function, got "+g);f(i,h),i.addEventListener("click",b(i,g),!1)}function b(h,g){return function(){function l(){j||(j=!0,h.disabled&&(h.disabled=!1,h.className=a(h.className.replace(new RegExp("\\b"+i+"\\b","g"),""))))}var m,j=!1,i=h.getAttribute(d);h.disabled=!0,h.className+=" "+i;try{m=g(l)}catch(k){window.console&&window.console.error&&window.console.error("object"==typeof k&&k.stack?k.stack:k+""),l()}m===!1&&l()}}var d="data-clickable-class";return e}(Clickable._trimString,Clickable._isDOMNode,Clickable._enableClicking);var iScroll=function(an,Z){function ah(f){return""===am?f:(f=f.charAt(0).toUpperCase()+f.substr(1),am+f)}var am,ao=Math,P=Z.createElement("div").style;a:{for(var Y,aj=["t","webkitT","MozT","msT","OT"],X=0,k=aj.length;k>X;X++)if(Y=aj[X]+"ransform",Y in P){am=aj[X].substr(0,aj[X].length-1);break a}am=!1}var aa,ak=am?"-"+am.toLowerCase()+"-":"",ai=ah("transform"),g=ah("transitionProperty"),ad=ah("transitionDuration"),e=ah("transformOrigin"),d=ah("transitionTimingFunction"),i=ah("transitionDelay"),ag=/android/gi.test(navigator.appVersion),W=/iphone|ipad/gi.test(navigator.appVersion),aj=/hp-tablet/gi.test(navigator.appVersion),V=ah("perspective")in P,al="ontouchstart"in an&&!aj,T=!!am,c=ah("transition")in P,af="onorientationchange"in an?"orientationchange":"resize",ac=al?"touchstart":"mousedown",U=al?"touchmove":"mousemove",S=al?"touchend":"mouseup",R=al?"touchcancel":"mouseup",ab="Moz"==am?"DOMMouseScroll":"mousewheel";aa=!1===am?!1:{"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"oTransitionEnd",ms:"MSTransitionEnd"}[am];var b=an.requestAnimationFrame||an.webkitRequestAnimationFrame||an.mozRequestAnimationFrame||an.oRequestAnimationFrame||an.msRequestAnimationFrame||function(f){return setTimeout(f,1)},Q=an.cancelRequestAnimationFrame||an.webkitCancelAnimationFrame||an.webkitCancelRequestAnimationFrame||an.mozCancelRequestAnimationFrame||an.oCancelRequestAnimationFrame||an.msCancelRequestAnimationFrame||clearTimeout,ae=V?" translateZ(0)":"",aj=function(f,h){var j,l=this;l.wrapper="object"==typeof f?f:Z.getElementById(f),l.wrapper.style.overflow="hidden",l.scroller=l.wrapper.children[0],l.options={hScroll:!0,vScroll:!0,x:0,y:0,bounce:!0,bounceLock:!1,momentum:!0,lockDirection:!0,useTransform:!0,useTransition:!1,topOffset:0,checkDOMChanges:!1,handleClick:!0,hScrollbar:!0,vScrollbar:!0,fixedScrollbar:ag,hideScrollbar:W,fadeScrollbar:W&&V,scrollbarClass:"",zoom:!1,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:"scroll",snap:!1,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(m){m.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(j in h)l.options[j]=h[j];l.x=l.options.x,l.y=l.options.y,l.options.useTransform=T&&l.options.useTransform,l.options.hScrollbar=l.options.hScroll&&l.options.hScrollbar,l.options.vScrollbar=l.options.vScroll&&l.options.vScrollbar,l.options.zoom=l.options.useTransform&&l.options.zoom,l.options.useTransition=c&&l.options.useTransition,l.options.zoom&&ag&&(ae=""),l.scroller.style[g]=l.options.useTransform?ak+"transform":"top left",l.scroller.style[ad]="0",l.scroller.style[e]="0 0",l.options.useTransition&&(l.scroller.style[d]="cubic-bezier(0.33,0.66,0.66,1)"),l.options.useTransform?l.scroller.style[ai]="translate("+l.x+"px,"+l.y+"px)"+ae:l.scroller.style.cssText+=";position:absolute;top:"+l.y+"px;left:"+l.x+"px",l.options.useTransition&&(l.options.fixedScrollbar=!0),l.refresh(),l._bind(af,an),l._bind(ac),al||(l._bind("mouseout",l.wrapper),"none"!=l.options.wheelAction&&l._bind(ab)),l.options.checkDOMChanges&&(l.checkDOMTime=setInterval(function(){l._checkDOMChanges()},500))};return aj.prototype={enabled:!0,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(f){switch(f.type){case ac:if(!al&&0!==f.button)break;this._start(f);break;case U:this._move(f);break;case S:case R:this._end(f);break;case af:this._resize();break;case ab:this._wheel(f);break;case"mouseout":this._mouseout(f);break;case aa:this._transitionEnd(f)}},_checkDOMChanges:function(){!this.moved&&!this.zoomed&&!(this.animating||this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale)&&this.refresh()},_scrollbar:function(f){var h;this[f+"Scrollbar"]?(this[f+"ScrollbarWrapper"]||(h=Z.createElement("div"),this.options.scrollbarClass?h.className=this.options.scrollbarClass+f.toUpperCase():h.style.cssText="position:absolute;z-index:100;"+("h"==f?"height:7px;bottom:1px;left:2px;right:"+(this.vScrollbar?"7":"2")+"px":"width:7px;bottom:"+(this.hScrollbar?"7":"2")+"px;top:2px;right:1px"),h.style.cssText+=";pointer-events:none;"+ak+"transition-property:opacity;"+ak+"transition-duration:"+(this.options.fadeScrollbar?"350ms":"0")+";overflow:hidden;opacity:"+(this.options.hideScrollbar?"0":"1"),this.wrapper.appendChild(h),this[f+"ScrollbarWrapper"]=h,h=Z.createElement("div"),this.options.scrollbarClass||(h.style.cssText="position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);"+ak+"background-clip:padding-box;"+ak+"box-sizing:border-box;"+("h"==f?"height:100%":"width:100%")+";"+ak+"border-radius:3px;border-radius:3px"),h.style.cssText+=";pointer-events:none;"+ak+"transition-property:"+ak+"transform;"+ak+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);"+ak+"transition-duration:0;"+ak+"transform: translate(0,0)"+ae,this.options.useTransition&&(h.style.cssText+=";"+ak+"transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)"),this[f+"ScrollbarWrapper"].appendChild(h),this[f+"ScrollbarIndicator"]=h),"h"==f?(this.hScrollbarSize=this.hScrollbarWrapper.clientWidth,this.hScrollbarIndicatorSize=ao.max(ao.round(this.hScrollbarSize*this.hScrollbarSize/this.scrollerW),8),this.hScrollbarIndicator.style.width=this.hScrollbarIndicatorSize+"px",this.hScrollbarMaxScroll=this.hScrollbarSize-this.hScrollbarIndicatorSize,this.hScrollbarProp=this.hScrollbarMaxScroll/this.maxScrollX):(this.vScrollbarSize=this.vScrollbarWrapper.clientHeight,this.vScrollbarIndicatorSize=ao.max(ao.round(this.vScrollbarSize*this.vScrollbarSize/this.scrollerH),8),this.vScrollbarIndicator.style.height=this.vScrollbarIndicatorSize+"px",this.vScrollbarMaxScroll=this.vScrollbarSize-this.vScrollbarIndicatorSize,this.vScrollbarProp=this.vScrollbarMaxScroll/this.maxScrollY),this._scrollbarPos(f,!0)):this[f+"ScrollbarWrapper"]&&(T&&(this[f+"ScrollbarIndicator"].style[ai]=""),this[f+"ScrollbarWrapper"].parentNode.removeChild(this[f+"ScrollbarWrapper"]),this[f+"ScrollbarWrapper"]=null,this[f+"ScrollbarIndicator"]=null)},_resize:function(){var f=this;setTimeout(function(){f.refresh()},ag?200:0)},_pos:function(f,h){this.zoomed||(f=this.hScroll?f:0,h=this.vScroll?h:0,this.options.useTransform?this.scroller.style[ai]="translate("+f+"px,"+h+"px) scale("+this.scale+")"+ae:(f=ao.round(f),h=ao.round(h),this.scroller.style.left=f+"px",this.scroller.style.top=h+"px"),this.x=f,this.y=h,this._scrollbarPos("h"),this._scrollbarPos("v"))},_scrollbarPos:function(f,h){var j="h"==f?this.x:this.y;this[f+"Scrollbar"]&&(j*=this[f+"ScrollbarProp"],0>j?(this.options.fixedScrollbar||(j=this[f+"ScrollbarIndicatorSize"]+ao.round(3*j),8>j&&(j=8),this[f+"ScrollbarIndicator"].style["h"==f?"width":"height"]=j+"px"),j=0):j>this[f+"ScrollbarMaxScroll"]&&(this.options.fixedScrollbar?j=this[f+"ScrollbarMaxScroll"]:(j=this[f+"ScrollbarIndicatorSize"]-ao.round(3*(j-this[f+"ScrollbarMaxScroll"])),8>j&&(j=8),this[f+"ScrollbarIndicator"].style["h"==f?"width":"height"]=j+"px",j=this[f+"ScrollbarMaxScroll"]+(this[f+"ScrollbarIndicatorSize"]-j))),this[f+"ScrollbarWrapper"].style[i]="0",this[f+"ScrollbarWrapper"].style.opacity=h&&this.options.hideScrollbar?"0":"1",this[f+"ScrollbarIndicator"].style[ai]="translate("+("h"==f?j+"px,0)":"0,"+j+"px)")+ae)},_start:function(f){var l,j,h=al?f.touches[0]:f;this.enabled&&(this.options.onBeforeScrollStart&&this.options.onBeforeScrollStart.call(this,f),(this.options.useTransition||this.options.zoom)&&this._transitionTime(0),this.zoomed=this.animating=this.moved=!1,this.dirY=this.dirX=this.absDistY=this.absDistX=this.distY=this.distX=0,this.options.zoom&&al&&1<f.touches.length&&(j=ao.abs(f.touches[0].pageX-f.touches[1].pageX),l=ao.abs(f.touches[0].pageY-f.touches[1].pageY),this.touchesDistStart=ao.sqrt(j*j+l*l),this.originX=ao.abs(f.touches[0].pageX+f.touches[1].pageX-2*this.wrapperOffsetLeft)/2-this.x,this.originY=ao.abs(f.touches[0].pageY+f.touches[1].pageY-2*this.wrapperOffsetTop)/2-this.y,this.options.onZoomStart&&this.options.onZoomStart.call(this,f)),this.options.momentum&&(this.options.useTransform?(l=getComputedStyle(this.scroller,null)[ai].replace(/[^0-9\-.,]/g,"").split(","),j=1*l[4],l=1*l[5]):(j=1*getComputedStyle(this.scroller,null).left.replace(/[^0-9-]/g,""),l=1*getComputedStyle(this.scroller,null).top.replace(/[^0-9-]/g,"")),j!=this.x||l!=this.y)&&(this.options.useTransition?this._unbind(aa):Q(this.aniTime),this.steps=[],this._pos(j,l)),this.absStartX=this.x,this.absStartY=this.y,this.startX=this.x,this.startY=this.y,this.pointX=h.pageX,this.pointY=h.pageY,this.startTime=f.timeStamp||Date.now(),this.options.onScrollStart&&this.options.onScrollStart.call(this,f),this._bind(U),this._bind(S),this._bind(R))},_move:function(f){var h=al?f.touches[0]:f,o=h.pageX-this.pointX,n=h.pageY-this.pointY,m=this.x+o,l=this.y+n,j=f.timeStamp||Date.now();this.options.onBeforeScrollMove&&this.options.onBeforeScrollMove.call(this,f),this.options.zoom&&al&&1<f.touches.length?(m=ao.abs(f.touches[0].pageX-f.touches[1].pageX),l=ao.abs(f.touches[0].pageY-f.touches[1].pageY),this.touchesDist=ao.sqrt(m*m+l*l),this.zoomed=!0,h=1/this.touchesDistStart*this.touchesDist*this.scale,h<this.options.zoomMin?h=.5*this.options.zoomMin*Math.pow(2,h/this.options.zoomMin):h>this.options.zoomMax&&(h=2*this.options.zoomMax*Math.pow(.5,this.options.zoomMax/h)),this.lastScale=h/this.scale,m=this.originX-this.originX*this.lastScale+this.x,l=this.originY-this.originY*this.lastScale+this.y,this.scroller.style[ai]="translate("+m+"px,"+l+"px) scale("+h+")"+ae,this.options.onZoom&&this.options.onZoom.call(this,f)):(this.pointX=h.pageX,this.pointY=h.pageY,(m>0||m<this.maxScrollX)&&(m=this.options.bounce?this.x+o/2:m>=0||0<=this.maxScrollX?0:this.maxScrollX),(l>this.minScrollY||l<this.maxScrollY)&&(l=this.options.bounce?this.y+n/2:l>=this.minScrollY||0<=this.maxScrollY?this.minScrollY:this.maxScrollY),this.distX+=o,this.distY+=n,this.absDistX=ao.abs(this.distX),this.absDistY=ao.abs(this.distY),6>this.absDistX&&6>this.absDistY||(this.options.lockDirection&&(this.absDistX>this.absDistY+5?(l=this.y,n=0):this.absDistY>this.absDistX+5&&(m=this.x,o=0)),this.moved=!0,this._pos(m,l),this.dirX=o>0?-1:0>o?1:0,this.dirY=n>0?-1:0>n?1:0,300<j-this.startTime&&(this.startTime=j,this.startX=this.x,this.startY=this.y),this.options.onScrollMove&&this.options.onScrollMove.call(this,f)))},_end:function(s){if(!al||0===s.touches.length){var q,p,t=this,r=al?s.changedTouches[0]:s,o={dist:0,time:0},m={dist:0,time:0},n=(s.timeStamp||Date.now())-t.startTime,f=t.x,l=t.y;t._unbind(U),t._unbind(S),t._unbind(R),t.options.onBeforeScrollEnd&&t.options.onBeforeScrollEnd.call(t,s),t.zoomed?(f=t.scale*t.lastScale,f=Math.max(t.options.zoomMin,f),f=Math.min(t.options.zoomMax,f),t.lastScale=f/t.scale,t.scale=f,t.x=t.originX-t.originX*t.lastScale+t.x,t.y=t.originY-t.originY*t.lastScale+t.y,t.scroller.style[ad]="200ms",t.scroller.style[ai]="translate("+t.x+"px,"+t.y+"px) scale("+t.scale+")"+ae,t.zoomed=!1,t.refresh(),t.options.onZoomEnd&&t.options.onZoomEnd.call(t,s)):(t.moved?(300>n&&t.options.momentum&&(o=f?t._momentum(f-t.startX,n,-t.x,t.scrollerW-t.wrapperW+t.x,t.options.bounce?t.wrapperW:0):o,m=l?t._momentum(l-t.startY,n,-t.y,0>t.maxScrollY?t.scrollerH-t.wrapperH+t.y-t.minScrollY:0,t.options.bounce?t.wrapperH:0):m,f=t.x+o.dist,l=t.y+m.dist,(0<t.x&&f>0||t.x<t.maxScrollX&&f<t.maxScrollX)&&(o={dist:0,time:0}),(t.y>t.minScrollY&&l>t.minScrollY||t.y<t.maxScrollY&&l<t.maxScrollY)&&(m={dist:0,time:0})),o.dist||m.dist?(o=ao.max(ao.max(o.time,m.time),10),t.options.snap&&(m=f-t.absStartX,n=l-t.absStartY,ao.abs(m)<t.options.snapThreshold&&ao.abs(n)<t.options.snapThreshold?t.scrollTo(t.absStartX,t.absStartY,200):(m=t._snap(f,l),f=m.x,l=m.y,o=ao.max(m.time,o))),t.scrollTo(ao.round(f),ao.round(l),o)):t.options.snap?(m=f-t.absStartX,n=l-t.absStartY,ao.abs(m)<t.options.snapThreshold&&ao.abs(n)<t.options.snapThreshold?t.scrollTo(t.absStartX,t.absStartY,200):(m=t._snap(t.x,t.y),(m.x!=t.x||m.y!=t.y)&&t.scrollTo(m.x,m.y,m.time))):t._resetPos(200)):(al&&(t.doubleTapTimer&&t.options.zoom?(clearTimeout(t.doubleTapTimer),t.doubleTapTimer=null,t.options.onZoomStart&&t.options.onZoomStart.call(t,s),t.zoom(t.pointX,t.pointY,1==t.scale?t.options.doubleTapZoom:1),t.options.onZoomEnd&&setTimeout(function(){t.options.onZoomEnd.call(t,s)},200)):this.options.handleClick&&(t.doubleTapTimer=setTimeout(function(){for(t.doubleTapTimer=null,q=r.target;1!=q.nodeType;)q=q.parentNode;"SELECT"!=q.tagName&&"INPUT"!=q.tagName&&"TEXTAREA"!=q.tagName&&(p=Z.createEvent("MouseEvents"),p.initMouseEvent("click",!0,!0,s.view,1,r.screenX,r.screenY,r.clientX,r.clientY,s.ctrlKey,s.altKey,s.shiftKey,s.metaKey,0,null),p._fake=!0,q.dispatchEvent(p))},t.options.zoom?250:0))),t._resetPos(200)),t.options.onTouchEnd&&t.options.onTouchEnd.call(t,s))}},_resetPos:function(f){var h=0<=this.x?0:this.x<this.maxScrollX?this.maxScrollX:this.x,j=this.y>=this.minScrollY||0<this.maxScrollY?this.minScrollY:this.y<this.maxScrollY?this.maxScrollY:this.y;h==this.x&&j==this.y?(this.moved&&(this.moved=!1,this.options.onScrollEnd&&this.options.onScrollEnd.call(this)),this.hScrollbar&&this.options.hideScrollbar&&("webkit"==am&&(this.hScrollbarWrapper.style[i]="300ms"),this.hScrollbarWrapper.style.opacity="0"),this.vScrollbar&&this.options.hideScrollbar&&("webkit"==am&&(this.vScrollbarWrapper.style[i]="300ms"),this.vScrollbarWrapper.style.opacity="0")):this.scrollTo(h,j,f||0)},_wheel:function(f){var l,j,h=this;if("wheelDeltaX"in f)l=f.wheelDeltaX/12,j=f.wheelDeltaY/12;else if("wheelDelta"in f)l=j=f.wheelDelta/12;else{if(!("detail"in f))return;l=j=3*-f.detail}"zoom"==h.options.wheelAction?(j=h.scale*Math.pow(2,1/3*(j?j/Math.abs(j):0)),j<h.options.zoomMin&&(j=h.options.zoomMin),j>h.options.zoomMax&&(j=h.options.zoomMax),j!=h.scale&&(!h.wheelZoomCount&&h.options.onZoomStart&&h.options.onZoomStart.call(h,f),h.wheelZoomCount++,h.zoom(f.pageX,f.pageY,j,400),setTimeout(function(){h.wheelZoomCount--,!h.wheelZoomCount&&h.options.onZoomEnd&&h.options.onZoomEnd.call(h,f)},400))):(l=h.x+l,j=h.y+j,l>0?l=0:l<h.maxScrollX&&(l=h.maxScrollX),j>h.minScrollY?j=h.minScrollY:j<h.maxScrollY&&(j=h.maxScrollY),0>h.maxScrollY&&h.scrollTo(l,j,0))},_mouseout:function(f){var h=f.relatedTarget;if(h)for(;h=h.parentNode;)if(h==this.wrapper)return;this._end(f)},_transitionEnd:function(f){f.target==this.scroller&&(this._unbind(aa),this._startAni())},_startAni:function(){var m,l,j,f=this,h=f.x,o=f.y,n=Date.now();f.animating||(f.steps.length?(m=f.steps.shift(),m.x==h&&m.y==o&&(m.time=0),f.animating=!0,f.moved=!0,f.options.useTransition?(f._transitionTime(m.time),f._pos(m.x,m.y),f.animating=!1,m.time?f._bind(aa):f._resetPos(0)):(j=function(){var p,q=Date.now();q>=n+m.time?(f._pos(m.x,m.y),f.animating=!1,f.options.onAnimationEnd&&f.options.onAnimationEnd.call(f),f._startAni()):(q=(q-n)/m.time-1,l=ao.sqrt(1-q*q),q=(m.x-h)*l+h,p=(m.y-o)*l+o,f._pos(q,p),f.animating&&(f.aniTime=b(j)))})()):f._resetPos(400))},_transitionTime:function(f){f+="ms",this.scroller.style[ad]=f,this.hScrollbar&&(this.hScrollbarIndicator.style[ad]=f),this.vScrollbar&&(this.vScrollbarIndicator.style[ad]=f)},_momentum:function(f,h,n,m,l){var h=ao.abs(f)/h,j=h*h/.0012;return f>0&&j>n?(n+=l/(6/(6e-4*(j/h))),h=h*n/j,j=n):0>f&&j>m&&(m+=l/(6/(6e-4*(j/h))),h=h*m/j,j=m),{dist:j*(0>f?-1:1),time:ao.round(h/6e-4)}},_offset:function(f){for(var h=-f.offsetLeft,j=-f.offsetTop;f=f.offsetParent;)h-=f.offsetLeft,j-=f.offsetTop;return f!=this.wrapper&&(h*=this.scale,j*=this.scale),{left:h,top:j}},_snap:function(f,h){var m,l,j;for(j=this.pagesX.length-1,m=0,l=this.pagesX.length;l>m;m++)if(f>=this.pagesX[m]){j=m;break}for(j==this.currPageX&&j>0&&0>this.dirX&&j--,f=this.pagesX[j],l=(l=ao.abs(f-this.pagesX[this.currPageX]))?500*(ao.abs(this.x-f)/l):0,this.currPageX=j,j=this.pagesY.length-1,m=0;j>m;m++)if(h>=this.pagesY[m]){j=m;break}return j==this.currPageY&&j>0&&0>this.dirY&&j--,h=this.pagesY[j],m=(m=ao.abs(h-this.pagesY[this.currPageY]))?500*(ao.abs(this.y-h)/m):0,this.currPageY=j,j=ao.round(ao.max(l,m))||200,{x:f,y:h,time:j}},_bind:function(f,h,j){(h||this.scroller).addEventListener(f,this,!!j)},_unbind:function(f,h,j){(h||this.scroller).removeEventListener(f,this,!!j)},destroy:function(){this.scroller.style[ai]="",this.vScrollbar=this.hScrollbar=!1,this._scrollbar("h"),this._scrollbar("v"),this._unbind(af,an),this._unbind(ac),this._unbind(U),this._unbind(S),this._unbind(R),this.options.hasTouch||(this._unbind("mouseout",this.wrapper),this._unbind(ab)),this.options.useTransition&&this._unbind(aa),this.options.checkDOMChanges&&clearInterval(this.checkDOMTime),this.options.onDestroy&&this.options.onDestroy.call(this)},refresh:function(){var f,h,l,j=0;if(h=0,this.scale<this.options.zoomMin&&(this.scale=this.options.zoomMin),this.wrapperW=this.wrapper.clientWidth||1,this.wrapperH=this.wrapper.clientHeight||1,this.minScrollY=-this.options.topOffset||0,this.scrollerW=ao.round(this.scroller.offsetWidth*this.scale),this.scrollerH=ao.round((this.scroller.offsetHeight+this.minScrollY)*this.scale),this.maxScrollX=this.wrapperW-this.scrollerW,this.maxScrollY=this.wrapperH-this.scrollerH+this.minScrollY,this.dirY=this.dirX=0,this.options.onRefresh&&this.options.onRefresh.call(this),this.hScroll=this.options.hScroll&&0>this.maxScrollX,this.vScroll=this.options.vScroll&&(!this.options.bounceLock&&!this.hScroll||this.scrollerH>this.wrapperH),this.hScrollbar=this.hScroll&&this.options.hScrollbar,this.vScrollbar=this.vScroll&&this.options.vScrollbar&&this.scrollerH>this.wrapperH,f=this._offset(this.wrapper),this.wrapperOffsetLeft=-f.left,this.wrapperOffsetTop=-f.top,"string"==typeof this.options.snap)for(this.pagesX=[],this.pagesY=[],l=this.scroller.querySelectorAll(this.options.snap),f=0,h=l.length;h>f;f++)j=this._offset(l[f]),j.left+=this.wrapperOffsetLeft,j.top+=this.wrapperOffsetTop,this.pagesX[f]=j.left<this.maxScrollX?this.maxScrollX:j.left*this.scale,this.pagesY[f]=j.top<this.maxScrollY?this.maxScrollY:j.top*this.scale;else if(this.options.snap){for(this.pagesX=[];j>=this.maxScrollX;)this.pagesX[h]=j,j-=this.wrapperW,h++;for(this.maxScrollX%this.wrapperW&&(this.pagesX[this.pagesX.length]=this.maxScrollX-this.pagesX[this.pagesX.length-1]+this.pagesX[this.pagesX.length-1]),h=j=0,this.pagesY=[];j>=this.maxScrollY;)this.pagesY[h]=j,j-=this.wrapperH,h++;this.maxScrollY%this.wrapperH&&(this.pagesY[this.pagesY.length]=this.maxScrollY-this.pagesY[this.pagesY.length-1]+this.pagesY[this.pagesY.length-1])}this._scrollbar("h"),this._scrollbar("v"),this.zoomed||(this.scroller.style[ad]="0",this._resetPos(200))},scrollTo:function(f,h,m,l){var j=f;for(this.stop(),j.length||(j=[{x:f,y:h,time:m,relative:l}]),f=0,h=j.length;h>f;f++)j[f].relative&&(j[f].x=this.x-j[f].x,j[f].y=this.y-j[f].y),this.steps.push({x:j[f].x,y:j[f].y,time:j[f].time||0});this._startAni()},scrollToElement:function(f,h){var j;(f=f.nodeType?f:this.scroller.querySelector(f))&&(j=this._offset(f),j.left+=this.wrapperOffsetLeft,j.top+=this.wrapperOffsetTop,j.left=0<j.left?0:j.left<this.maxScrollX?this.maxScrollX:j.left,j.top=j.top>this.minScrollY?this.minScrollY:j.top<this.maxScrollY?this.maxScrollY:j.top,h=void 0===h?ao.max(2*ao.abs(j.left),2*ao.abs(j.top)):h,this.scrollTo(j.left,j.top,h))},scrollToPage:function(f,h,j){j=void 0===j?400:j,this.options.onScrollStart&&this.options.onScrollStart.call(this),this.options.snap?(f="next"==f?this.currPageX+1:"prev"==f?this.currPageX-1:f,h="next"==h?this.currPageY+1:"prev"==h?this.currPageY-1:h,f=0>f?0:f>this.pagesX.length-1?this.pagesX.length-1:f,h=0>h?0:h>this.pagesY.length-1?this.pagesY.length-1:h,this.currPageX=f,this.currPageY=h,f=this.pagesX[f],h=this.pagesY[h]):(f*=-this.wrapperW,h*=-this.wrapperH,f<this.maxScrollX&&(f=this.maxScrollX),h<this.maxScrollY&&(h=this.maxScrollY)),this.scrollTo(f,h,j)},disable:function(){this.stop(),this._resetPos(0),this.enabled=!1,this._unbind(U),this._unbind(S),this._unbind(R)},enable:function(){this.enabled=!0},stop:function(){this.options.useTransition?this._unbind(aa):Q(this.aniTime),this.steps=[],this.animating=this.moved=!1},zoom:function(f,h,m,l){var j=m/this.scale;this.options.useTransform&&(this.zoomed=!0,l=void 0===l?200:l,f=f-this.wrapperOffsetLeft-this.x,h=h-this.wrapperOffsetTop-this.y,this.x=f-f*j+this.x,this.y=h-h*j+this.y,this.scale=m,this.refresh(),this.x=0<this.x?0:this.x<this.maxScrollX?this.maxScrollX:this.x,this.y=this.y>this.minScrollY?this.minScrollY:this.y<this.maxScrollY?this.maxScrollY:this.y,this.scroller.style[ad]=l+"ms",this.scroller.style[ai]="translate("+this.x+"px,"+this.y+"px) scale("+m+")"+ae,this.zoomed=!1)},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating}},P=null,aj}(window,document),Scrollable=function(h,g){function b(){b._enableScrolling.apply(this,arguments)}if(b.node=function(){return b._getScrollableNode.apply(this,arguments)},b.infinite=function(){return b._enableInfiniteScrolling.apply(this,arguments)},h&&h.fn){h.extend(h.fn,{scrollable:function(i){return this.forEach(function(j){b._enableScrolling(j,i)}),this},scrollableNode:function(){return h(this.map(function(){return b._getScrollableNode(this)}))},scrollableInfinite:function(j,k){var i;return this.forEach(function(m){var l=b._enableInfiniteScrolling(m,j,k);i||(i=l)}),i}});var d=h.fn.scrollTop,f=h.fn.scrollLeft;h.fn.scrollTop=function(k){if("undefined"==typeof k){var i=this[0],j=b._isDOMNode(i);return j&&i._scrollTop?i._scrollTop():d?d.apply(this,arguments):j?i.scrollTop:null}return this.forEach(function(l){var m=b._isDOMNode(l);m&&l._scrollTop?l._scrollTop(k):d?d.call(h(l),k):m&&(l.scrollTop=k)}),this},h.fn.scrollLeft=function(k){if("undefined"==typeof k){var i=this[0],j=b._isDOMNode(i);return j&&i._scrollLeft?i._scrollLeft():d?f.apply(this,arguments):j?i.scrollLeft:null}return this.forEach(function(l){var m=b._isDOMNode(l);m&&l._scrollLeft?l._scrollLeft(k):f?f.call(h(l),k):m&&(l.scrollLeft=k)}),this}}if(g&&g.fn){g.fn.scrollable=function(i){return this.each(function(){b._enableScrolling(this,i)}),this},g.fn.scrollableNode=function(){return g(this.map(function(){return b._getScrollableNode(this)}))},g.fn.scrollableInfinite=function(j,k){var i;return this.each(function(){var l=b._enableInfiniteScrolling(this,j,k);i||(i=l)}),i};var c=g.fn.scrollTop,e=g.fn.scrollLeft;g.fn.scrollTop=function(j){if("undefined"==typeof j){var i=this[0];return b._isDOMNode(i)&&i._scrollTop?i._scrollTop():c.apply(this,arguments)}return this.each(function(){b._isDOMNode(this)&&this._scrollTop?this._scrollTop(j):c.call(g(this),j)}),this},g.fn.scrollLeft=function(j){if("undefined"==typeof j){var i=this[0];return b._isDOMNode(i)&&i._scrollLeft?i._scrollLeft():e.apply(this,arguments)}return this.each(function(){b._isDOMNode(this)&&this._scrollLeft?this._scrollLeft(j):e.call(g(this),j)}),this}}return b}(window.Zepto,window.jQuery);Scrollable._os=function(g,e){var d,b,c;(c=/\bCPU.*OS (\d+(_\d+)?)/i.exec(g))?(d="ios",b=c[1].replace("_",".")):(c=/\bAndroid (\d+(\.\d+)?)/.exec(g))&&(d="android",b=c[1]);var f={name:d,version:b&&e(b),mobile:!!d};return f[d]=!0,f}(navigator.userAgent,parseFloat),Scrollable._isArray=function(b){return function(c){return b?b(c):"[object Array]"!==Object.prototype.toString.call(c)}}(Array.isArray),Scrollable._isDOMNode=function(b,c){return function(e){if(!e)return!1;try{return e instanceof b||e instanceof c}catch(d){}return"object"!=typeof e?!1:"number"!=typeof e.nodeType?!1:"string"!=typeof e.nodeName?!1:!0}}(Node,HTMLElement),Scrollable._isjQueryElem=function(b){return"object"!=typeof b||null===b?!1:b.val&&b.addClass&&b.css&&b.html&&b.show},Scrollable._findInArray=function(b){return function(d,f,g){if(b)return b.call(d,f,g);for(var e=g||0,c=d.length;c>e;e++)if(e in d&&d[e]===f)return e;return-1}}(Array.prototype.indexOf),Scrollable._forEachInArray=function(b){return function(d,g,e){if(b)return b.call(d,g,e);for(var f=0,c=d.length;c>f;f++)f in d&&g.call(e,d[f],f,d)}}(Array.prototype.forEach),Scrollable._onReady=function(c,d,i){function f(){g||(g=!0,i(h,function(j){setTimeout(j,0)}))}function b(k){try{c.documentElement.doScroll("left")}catch(j){return void setTimeout(function(){b(k)},1)}k()}function e(l){if("complete"===c.readyState)return void setTimeout(l,0);if(c.addEventListener)c.addEventListener("DOMContentLoaded",l,!1),d.addEventListener("load",l,!1);else if(c.attachEvent){c.attachEvent("onreadystatechange",l),d.attachEvent("onload",l);var j=!1;try{j=null===d.frameElement}catch(k){}c.documentElement.doScroll&&j&&setTimeout(function(){b(l)},0)}}var h=[],g=!1;return e(f),function(j){g?j():h.push(j)}}(document,window,Scrollable._forEachInArray),Scrollable._scrollWatcher=function(){function c(i){function n(){i._isScrolling=e||j
}function f(){e=!1,j=!1,n()}function m(r,q,p){return r.touches.length<=q&&("undefined"==typeof p||r.changedTouches.length<=p)?!1:(r.preventDefault(),f(),!0)}function h(p){m(p,1)||f()}function d(p){m(p,1)||(j=!0,l=i.scrollTop,n())}function g(p){m(p,0,1)||f()}function o(p){if(!m(p,0,1)){var q;j&&(q=Math.abs(i.scrollTop-l),q>5&&(e=!0),j=!1,n())}}function k(){!j&&e&&f()}var j=!1,e=!1,l=i.scrollTop;i.addEventListener("touchstart",h),i.addEventListener("touchmove",d),i.addEventListener("touchcancel",g),i.addEventListener("touchend",o),i.addEventListener("scroll",k),n(),i._resetScrolling=f}return c}(Scrollable._os),Scrollable._enableScrolling=function(f,o,k,e,d,p,m,n){function i(){return f.ios&&f.version>=5||f.android&&f.version>=4?!0:!1}function q(t,s){if(!o(t))throw t+" is not a DOM element";if(!t._scrollable){t._scrollable=!0;var r;if(t._scrollTop=function(u,v){return"undefined"==typeof u?r?Math.max(parseInt(-r.y),0):t.scrollTop:r||f.mobile&&!j?void k(function(){r.scrollTo(r.x,Math.min(-u,0),1),v&&v()}):(t.scrollTop=u,void(v&&v()))},t._scrollLeft=function(u){return"undefined"==typeof u?r?Math.max(parseInt(-r.x),0):t.scrollLeft:r||f.mobile&&!j?void k(function(){r.scrollTo(Math.min(-u,0),r.y,1)}):void(t.scrollLeft=u)},t.style.overflow="scroll",!s){if(!f.mobile)return;if(j)return t.style["-webkit-overflow-scrolling"]="touch",void(f.ios&&d(t))}c(t,function(u){r=u})}}function c(s,t){s._iScroll=!0,l(s);var r=g(s);k(function(){var u=new p(s,{checkDOMChanges:!0,useTransform:!0,useTransition:!0,hScrollbar:!1,vScrollbar:!1,bounce:!!f.ios,onScrollMove:r,onBeforeScrollEnd:r,onScrollEnd:function(){s._iScrolling=!1,r()},onBeforeScrollStart:h,onScrollStart:function(){s._iScrolling=!0}});s._iScroll=u,t(u)})}function l(s){var t=n.createElement("div"),r=Array.prototype.slice.call(s.childNodes||[]);e(r,function(v){var u=s.removeChild(v);t.appendChild(u)}),s.appendChild(t),s.style.position="relative",t.style["min-height"]="100%",t.style["min-width"]="100%"}function g(s){var r,t;return function(){var v=s._scrollTop(),u=s._scrollLeft();(v!==r||u!==t)&&(r=v,t=u,b(s))}}function b(s){if(s.dispatchEvent){var r=n.createEvent("MouseEvents");r.initMouseEvent("scroll",!1,!1,m,0,0,0,0,0,!1,!1,!1,!1,0,null),s.dispatchEvent(r)}}function h(s){for(var r=s.target;1!==r.nodeType;)r=r.parentNode;"SELECT"!==r.tagName&&"INPUT"!==r.tagName&&"TEXTAREA"!==r.tagName&&s.preventDefault()}var j=i();return q}(Scrollable._os,Scrollable._isDOMNode,Scrollable._onReady,Scrollable._forEachInArray,Scrollable._scrollWatcher,iScroll,window,document),Scrollable._getScrollableNode=function(b){return function(c){return b(c)&&c._iScroll?c.childNodes[0]:c}}(Scrollable._isDOMNode),Scrollable._enableInfiniteScrolling=function(g,l,f,h,i,m,d){function j(I,q,y){function D(){if(!x){if(B)throw Error("cannot enable infinite scroller that has been destroyed");x=!0,H.addEventListener("scroll",A,!1)}}function u(){x&&(x=!1,H.removeEventListener("scroll",A))}function A(){if(x&&!K&&!B){var M=o(H,s);if(M){var L="up"===M;if(L&&(I._isScrolling||I._iScrolling))return w&&clearTimeout(w),void(w=setTimeout(function(){A()},100));K=!0,r(L,function(N){K=!1,N?A():p(L)})}}}function v(L){!x||B||K||(K=!0,"undefined"==typeof L&&(L=!q.downGenerator),r(L,function(M){K=!1,M?A():p(L)}))}function r(O,Q){function M(S,V){if(!(B||z&&O||G&&!O)){var Y=O?J:C,R=S&&S.length&&!V;if(S){h(S)||f(S)||(S=[S]),S=c(S);var W=d(I),U=H.scrollHeight;i(S,function(Z){N(W,Z)}),Y&&N(W,Y);var T=H.scrollHeight;if(O){var X=T-U;H._scrollTop(H._scrollTop()+X,function(){g.ios&&!H._iScroll&&k(S),Q(R)})}else Q(R)}else Q(R)}}function N(S,R){O?S.insertBefore(R,S.firstChild):S.appendChild(R)}var P=O?q.upGenerator:q.downGenerator,L=P(M);"undefined"!=typeof L&&M(L)}function p(L){B||(L?(z=!0,J&&J.parentNode&&J.parentNode.removeChild(J)):(G=!0,C&&C.parentNode&&C.parentNode.removeChild(C)),B=!(!G&&q.downGenerator||!z&&q.upGenerator),B&&u())}function o(M,L){for(var P=M;P!==document.documentElement;){if(!P.parentNode)return!1;P=P.parentNode}var N=M.clientHeight,Q=M._scrollTop?M._scrollTop():M.scrollTop,O=M.scrollHeight;return!G&&L>=O-Q-N?"down":!z&&L>Q?"up":!1}{if(!f(I)){if(!l(I))throw I+" is not a DOM element";if(y||"function"!=typeof q||(y=q,q={}),y){if(q.downGenerator)throw Error("Two downGenerator functions specified");q.downGenerator=y}if("object"!=typeof q||null===q)throw TypeError("options must be an object if defined, got "+q);if(!q.downGenerator&&!q.upGenerator)throw Error("No generators specified. What are you even scrolling?");if("undefined"==typeof q.autoStart&&(q.autoStart=!0),q.downGenerator&&"function"!=typeof q.downGenerator)throw"downGenerator "+downGenerator+" is not a function";if(q.upGenerator&&"function"!=typeof q.upGenerator)throw"upGenerator "+upGenerator+" is not a function";if(q.scroller&&!l(q.scroller))throw TypeError("options.scroller must be a DOM node, got "+q.scroller);var C,J,w,H=q.scroller||b(I),t=q.loading,s=q.triggerRadius,x=!1,z=!q.upGenerator,G=!q.downGenerator,B=!1,K=!1;switch(f(H)&&(H=H[0]),f(t)&&(t=t[0]),null===t&&(t=void 0),"undefined"!=typeof t&&(q.downGenerator?(C=c([t])[0],q.downGenerator&&(J=C.cloneNode(!0))):J=c([t])[0]),null===s&&(s=void 0),typeof s){case"undefined":s=e;case"number":break;default:throw TypeError("trigger radius must be a number if defined, got "+s)}return H||(m(I),H=I),C&&d(I).appendChild(C),D(),q.autoStart&&A(),{layout:A,forceLayout:v,enable:D,disable:u,destroy:p}}if(I.length){for(var E=I.length-1,F=0;E>F;F++)j(I[F],q,y);return j(I[E],q,y)}}}function b(o){do{if(o._scrollable)return o;o=o.parentNode}while(o)}function c(o){var p=[];return i(o,function(q){switch(typeof q){case"undefined":return;case"string":var r=document.createElement("div");return r.innerHTML=q,void(r.childNodes&&i(c(r.childNodes),function(s){p.push(s)}));case"object":if(null===q)return;if(l(q))return void p.push(q);if(f(q))return void i(q,function(s){p.push(s)});default:throw TypeError("expected an element, got "+q)}}),p}function k(o){i(o,function(q){var p=q.style.webkitTransform;q.style.webkitTransform="translate3d(0,0,0)",setTimeout(function(){q.style.webkitTransform=p},0)})}var e=320;return j}(Scrollable._os,Scrollable._isDOMNode,Scrollable._isjQueryElem,Scrollable._isArray,Scrollable._forEachInArray,Scrollable._enableScrolling,Scrollable._getScrollableNode,window.jQuery);var App={};App._Utils=function(window,document,App){function isArray(arr){return Array.isArray?Array.isArray(arr):"[object Array]"!==Object.prototype.toString.call(arr)}function isNode(elem){if(!elem)return!1;try{return elem instanceof Node||elem instanceof HTMLElement}catch(err){}return"object"!=typeof elem?!1:"number"!=typeof elem.nodeType?!1:"string"!=typeof elem.nodeName?!1:!0}function isjQueryElem($elem){return"object"!=typeof $elem||null===$elem?!1:$elem.val&&$elem.addClass&&$elem.css&&$elem.html&&$elem.show}function onReady(func){function runCallback(){window.removeEventListener("load",runCallback),setTimeout(function(){func()},0)}return"complete"===document.readyState?void setTimeout(function(){func()},0):void window.addEventListener("load",runCallback,!1)}function setTransform(elem,transform){elem.style["-webkit-transform"]=transform,elem.style.transform=transform}function setTransition(elem,transition){transition?(elem.style["-webkit-transition"]="-webkit-"+transition,elem.style.transition=transition):(elem.style["-webkit-transition"]="",elem.style.transition="")}function getStyles(elem,notComputed){var styles;return styles=notComputed?elem.style:document.defaultView.getComputedStyle(elem,null),{display:styles.display,opacity:styles.opacity,paddingRight:styles.paddingRight,paddingLeft:styles.paddingLeft,marginRight:styles.marginRight,marginLeft:styles.marginLeft,borderRightWidth:styles.borderRightWidth,borderLeftWidth:styles.borderLeftWidth,top:styles.top,left:styles.left,height:styles.height,width:styles.width,position:styles.position}}function isVisible(elem){var styles=getStyles(elem);return"none"!==styles.display&&"0"!==styles.opacity}function transitionElems(transitions,timeout,easing,callback){function setInitialStyles(callback){forEach(transitions,function(transition){"undefined"!=typeof transition.transitionStart&&setTransform(transition.elem,transition.transitionStart),"undefined"!=typeof transition.opacityStart&&(transition.elem.style.opacity=transition.opacityStart+"")}),setTimeout(function(){forEach(transitions,function(transition){var e=transition.easing||easing,transitionString="transform "+timeout/1e3+"s "+e+", opacity "+timeout/1e3+"s "+e;setTransition(transition.elem,transitionString)}),setTimeout(callback,0)},0)}function animateElems(callback){function transitionFinished(e){done||e.target!==lastTransition.elem||(done=!0,forEach(transitions,function(){lastTransition.elem.removeEventListener("webkitTransitionEnd",transitionFinished),lastTransition.elem.removeEventListener("transitionend",transitionFinished),lastTransition.elem.removeEventListener("onTransitionEnd",transitionFinished),lastTransition.elem.removeEventListener("ontransitionend",transitionFinished),lastTransition.elem.removeEventListener("MSTransitionEnd",transitionFinished),lastTransition.elem.removeEventListener("transitionend",transitionFinished)}),callback())}forEach(transitions,function(transition){"undefined"!=typeof transition.transitionEnd&&setTransform(transition.elem,transition.transitionEnd),"undefined"!=typeof transition.opacityEnd&&(transition.elem.style.opacity=transition.opacityEnd+"")});var lastTransition=transitions[transitions.length-1];lastTransition.elem.addEventListener("webkitTransitionEnd",transitionFinished,!1),lastTransition.elem.addEventListener("transitionend",transitionFinished,!1),lastTransition.elem.addEventListener("onTransitionEnd",transitionFinished,!1),lastTransition.elem.addEventListener("ontransitionend",transitionFinished,!1),lastTransition.elem.addEventListener("MSTransitionEnd",transitionFinished,!1),lastTransition.elem.addEventListener("transitionend",transitionFinished,!1);var done=!1}function restoreStyles(callback){forEach(transitions,function(transition){setTransition(transition.elem,"")}),setTimeout(function(){forEach(transitions,function(transition,i){setTransform(transition.elem,""),transition.elem.style.opacity=opacities[i]}),callback()},0)}"number"!=typeof transitions.length&&(transitions=[transitions]);var opacities=transitions.map(function(transition){return transition.elem.style.opacity});setInitialStyles(function(){animateElems(function(){restoreStyles(function(){callback()})})})}var query=function(queryString){var m,key,value,re=/([^&=]+)=([^&]+)/g,decodedSpace=/\+/g,result={};if(queryString)for(queryString=queryString.replace(decodedSpace,"%20");m=re.exec(queryString);)key=decodeURIComponent(m[1]),value=decodeURIComponent(m[2]),result[key]=value;return result}(window.location.href.split("?")[1]),os=function(userAgent){var name,version,match,faked=!1;"android"===query._app_platform?(faked=!0,name="android",version="4.4"):"ios"===query._app_platform?(faked=!0,name="ios",version="7.0"):(match=/\bCPU.*OS (\d+(_\d+)?)/i.exec(userAgent))?(name="ios",version=match[1].replace("_",".")):(match=/\bAndroid (\d+(\.\d+)?)/.exec(userAgent))&&(name="android",version=match[1]);var data={faked:faked,name:name,versionString:version,version:version&&parseFloat(version)};return data[name]=!0,document.body.className+=" app-ios app-ios-"+parseInt(version),(data.faked||!data.ios)&&(document.body.className+=" app-no-scrollbar"),data}(navigator.userAgent),forEach=function(forEach){return forEach?function(arr,callback,self){return forEach.call(arr,callback,self)}:function(arr,callback,self){for(var i=0,len=arr.length;len>i;i++)i in arr&&callback.call(self,arr[i],i,arr)}}(Array.prototype.forEach);return App.platform=os.name,App.platformVersion=os.version,{query:query,os:os,ready:onReady,forEach:forEach,isArray:isArray,isNode:isNode,isjQueryElem:isjQueryElem,setTransform:setTransform,setTransition:setTransition,animate:transitionElems,getStyles:getStyles,isVisible:isVisible}}(window,document,App),App._Events=function(Utils){function supportsCustomEventing(){try{var elem=document.createElement("div"),evt=document.createEvent("CustomEvent");return evt.initEvent("fooBarFace",!1,!0),elem.dispatchEvent(evt),!0}catch(err){return!1}}function setupCustomEventing(elem,names){function addEventType(name){-1===names.indexOf(name)&&(names.push(name),listeners[name]=[])}function fireElemEvent(name){if(-1===names.indexOf(name))return!1;var prevented=!1,evt={preventDefault:function(){prevented=!0}};return Utils.forEach(listeners[name],function(listener){setTimeout(function(){listener.call(elem,evt)===!1&&(prevented=!0)},0)}),!prevented}if(!hasCustomEvents){if(elem[APPJS_EVENTS_VAR])return void Utils.forEach(names,elem[APPJS_EVENTS_VAR].addEventType);elem[APPJS_EVENTS_VAR]={fire:fireElemEvent,addEventType:addEventType,addEventListener:elem.addEventListener,removeEventListener:elem.removeEventListener};var listeners={};Utils.forEach(names,function(name){listeners[name]=[]}),elem.addEventListener=function(name,listener){if(-1===names.indexOf(name))return void elem[APPJS_EVENTS_VAR].addEventListener.apply(this,arguments);var eventListeners=listeners[name];-1===eventListeners.indexOf(listener)&&eventListeners.push(listener)},elem.removeEventListener=function(name,listener){if(-1===names.indexOf(name))return void elem[APPJS_EVENTS_VAR].removeEventListener.apply(this,arguments);var eventListeners=listeners[name],index=eventListeners.indexOf(listener);-1!==index&&eventListeners.splice(index,1)}}}function fireEvent(elem,eventName){if(elem[APPJS_EVENTS_VAR])return elem[APPJS_EVENTS_VAR].fire(eventName);var evt=document.createEvent("CustomEvent");return evt.initEvent(eventName,!1,!0),elem.dispatchEvent(evt)}var APPJS_EVENTS_VAR="__appjsCustomEventing",hasCustomEvents=supportsCustomEventing();return{init:setupCustomEventing,fire:fireEvent}}(App._Utils),App._Metrics=function(window,App){function enableGoogleAnalytics(){analyticsEnabled=!0}function addPageView(pageName,pageID){if(analyticsEnabled){var pathname="/"+pageName;if("undefined"!=typeof pageID&&(pathname+="/"+pageID),"function"==typeof window.ga)return void window.ga("send","pageview",pathname);window._gaq||(window._gaq=[]),"function"==typeof window._gaq.push&&window._gaq.push(["_trackPageview",pathname])}}function watchPage(page,pageName,pageArgs){var data;"object"==typeof pageArgs&&"undefined"!=typeof pageArgs.id&&(data=pageArgs.id+""),page.addEventListener("appShow",function(){addPageView(pageName,data)},!1)}var analyticsEnabled=!1;return App.enableGoogleAnalytics=function(){enableGoogleAnalytics()},{watchPage:watchPage}}(window,App),App._Dialog=function(window,document,Clickable,App,Utils){function preventDefault(e){e.preventDefault()}function createDialog(options,callback){function handleChoice(){var buttonName=this.getAttribute("data-button");"cancel"===buttonName&&(buttonName=!1),callback(buttonName)}var dialogContainer=document.createElement("div");dialogContainer.className+=" app-dialog-container",Utils.os.ios&&Utils.os.version<=5&&(dialogContainer.className+=" ios5"),(!Utils.os.android||Utils.os.version>=4)&&dialogContainer.addEventListener("touchstart",preventDefault,!1),options.cancelButton&&dialogContainer.addEventListener("touchstart",function(e){e.target===dialogContainer&&closeDialog()},!1);var dialog=document.createElement("div");if(dialog.className="app-dialog",options.dark&&(dialog.className+=" dark"),dialogContainer.appendChild(dialog),options.title){var title=document.createElement("div");title.className="title",title.textContent=options.title,dialog.appendChild(title)}if(options.text||options.rawText){var text=document.createElement("div");text.className="text",Utils.isNode(options.text)?text.appendChild(options.text):options.rawText?text.innerHTML=options.rawText:text.textContent=options.text,dialog.appendChild(text)}for(var key in options)if(options[key]&&"Button"===key.substr(key.length-6)&&"okButton"!==key&&"cancelButton"!==key){var buttonName=key.substr(0,key.length-6),button=document.createElement("div");button.className="button",button.setAttribute("data-button",buttonName),button.textContent=options[key],Clickable(button),button.addEventListener("click",handleChoice,!1),dialog.appendChild(button)}if(options.okButton){var button=document.createElement("div");button.className="button ok",button.setAttribute("data-button","ok"),button.textContent=options.okButton,Clickable(button),button.addEventListener("click",handleChoice,!1),dialog.appendChild(button)}if(options.cancelButton){var button=document.createElement("div");button.className="button cancel",button.setAttribute("data-button","cancel"),button.textContent=options.cancelButton,Clickable(button),button.addEventListener("click",handleChoice,!1),dialog.appendChild(button)}return dialogContainer}function showDialog(options,callback,force){function dialogClosed(status){return dialogLock?void 0:(dialogLock=!0,"string"==typeof status||options.cancelButton?(currentCallback=null,dialog.className=dialog.className.replace(/\benabled\b/g,""),document.body.className=document.body.className.replace(new RegExp("\\b"+DIALOG_INDICATOR_CLASS+"\\b","g"),""),setTimeout(function(){processDialogQueue(),callback(status)},0),setTimeout(function(){try{dialog.parentNode.removeChild(dialog)}catch(err){}},600),!0):(dialogLock=!1,!0))}if(dialogQueue&&!force)return void dialogQueue.push([options,callback]);dialogQueue=dialogQueue||[];{var dialogLock=!1,dialog=createDialog(options,dialogClosed);dialog.firstChild}currentCallback=dialogClosed,Utils.os.ios&&(dialog.className+=" fancy"),document.body.appendChild(dialog),setTimeout(function(){dialog.className+=" enabled",document.body.className+=" "+DIALOG_INDICATOR_CLASS},50)}function closeDialog(status){return currentCallback?currentCallback(status||!1):void 0}function hasDialog(){return!!currentCallback}function processDialogQueue(){if(dialogQueue){if(!dialogQueue.length)return void(dialogQueue=null);var args=dialogQueue.shift();args.push(!0),showDialog.apply(window,args)}}var currentCallback,dialogQueue,DIALOG_INDICATOR_CLASS="app-dialog-visible";return App.dialog=function(options,callback){if("object"!=typeof options||null===options)throw TypeError("dialog options must be an object, got "+options);switch(typeof options.dark){case"undefined":case"boolean":break;default:throw TypeError("dialog dark mode must a boolean if defined, got "+options.dark)}switch(typeof options.title){case"undefined":case"string":break;default:throw TypeError("dialog title must be a string if defined, got "+options.title)}switch(typeof options.text){case"undefined":case"string":break;default:if(!Utils.isNode(options.text))throw TypeError("dialog text must be a string if defined, got "+options.text)}for(var key in options)if("dark"!==key&&"rawText"!==key&&"text"!==key)switch(typeof options[key]){case"undefined":case"string":break;default:throw TypeError("dialog button ("+key+") must be a string if defined, got "+options[key])}switch(typeof callback){case"undefined":callback=function(){};case"function":break;default:throw TypeError("callback must be a function if defined, got "+callback)}return showDialog(options,callback)},App.dialog.close=function(status){return closeDialog(status||!1)},App.dialog.status=function(){return hasDialog()},App.dialog}(window,document,Clickable,App,App._Utils),App._Form=function(window,document,App,Utils){function setupForm(form,callback){function submitForm(){if(!locked){locked=!0,form.disabled=!0;var params={},inputs=isForm?form.querySelectorAll("[name]"):[form],done=!1;isForm?Utils.forEach(form.querySelectorAll("[name]"),function(elem){params[elem.name]=elem.value}):(params.value=form.value,form.name&&(params[form.name]=form.value)),Utils.forEach(inputs,function(elem){elem.disabled=!0,elem.blur&&elem.blur()}),isForm&&form.blur&&form.blur(),callback.call(this,params,function(){done||(done=!0,Utils.forEach(inputs,function(elem){elem.disabled=!1}),locked=!1,form.disabled=!1)})}}var submitButtons,isForm="FORM"===form.nodeName,locked=!1;if(isForm){var submit=document.createElement("input");submit.style.display="none",submit.type="submit",form.appendChild(submit),form.addEventListener("submit",function(e){e.preventDefault(),submitForm()},!1),submitButtons=form.querySelectorAll(".app-submit")}else submitButtons=[form];Utils.forEach(submitButtons,function(submitButton){if("TEXTAREA"===submitButton.nodeName)isText=!0;else if("INPUT"!==submitButton.nodeName)isText=!1;else switch((submitButton.type||"").toLowerCase()){case"button":case"submit":case"reset":case"hidden":isText=!1;break;default:isText=!0}isText?submitButton.addEventListener("keydown",function(e){13===e.which&&(e.preventDefault(),submitForm())},!1):submitButton.addEventListener("click",function(e){e.preventDefault(),submitForm()},!1)})}return App.form=function(form,callback){if(Utils.isjQueryElem(form))return void form.each(function(){App.form(this,callback)});if(!Utils.isNode(form))throw TypeError("form must be a DOM node, got "+form);if("function"!=typeof callback)throw TypeError("callback must be a function, got "+callback);setupForm(form,callback)},{}}(window,document,App,App._Utils),App._Scroll=function(Scrollable,Utils){function setupScrollers(page){Utils.forEach(page.querySelectorAll("."+TAGS.APP_CONTENT),function(content){null===content.getAttribute(TAGS.NO_SCROLL)&&setupScroller(content)}),Utils.forEach(page.querySelectorAll("["+TAGS.SCROLLABLE+"]"),function(content){setupScroller(content)})}function setupScroller(content){var forceIScroll=!!window.APP_FORCE_ISCROLL;Scrollable(content,forceIScroll),content.className+=" "+TAGS.APP_SCROLLABLE,!forceIScroll&&Utils.os.ios&&Utils.os.version<6&&(content.className+=" "+TAGS.APP_SCROLLHACK)}function disableScrolling(page){Utils.forEach(page.querySelectorAll("*"),function(elem){elem.style[TAGS.TOUCH_SCROLL]=""})}function getScrollableElems(page){var elems=[];return page&&Utils.forEach(page.querySelectorAll("."+TAGS.APP_SCROLLABLE),function(elem){elem._scrollable&&elems.push(elem)}),elems}function savePageScrollPosition(page){Utils.forEach(getScrollableElems(page),function(elem){if(!elem._iScroll){var scrollTop=elem._scrollTop();elem.setAttribute(TAGS.LAST_SCROLL,scrollTop+"")}})}function savePageScrollStyle(page){Utils.forEach(getScrollableElems(page),function(elem){if(!elem._iScroll){var scrollStyle=elem.style[TAGS.TOUCH_SCROLL]||"";elem.style[TAGS.TOUCH_SCROLL]="",elem.setAttribute(TAGS.SCROLL_STYLE,scrollStyle)}})}function restorePageScrollPosition(page,noTimeout){Utils.forEach(getScrollableElems(page),function(elem){if(!elem._iScroll){var scrollTop=parseInt(elem.getAttribute(TAGS.LAST_SCROLL));scrollTop&&(noTimeout?elem._scrollTop(scrollTop):setTimeout(function(){elem._scrollTop(scrollTop)},0))}})}function restorePageScrollStyle(page){Utils.forEach(getScrollableElems(page),function(elem){if(!elem._iScroll){var scrollStyle=elem.getAttribute(TAGS.SCROLL_STYLE)||"";scrollStyle&&(elem.style[TAGS.TOUCH_SCROLL]=scrollStyle)}}),restorePageScrollPosition(page,!0)}function setupInfiniteScroll(elem,options,generator){var page=getParentPage(elem),pageManager=getPageManager(page);if(!page||!pageManager)throw Error("could not find parent app-page");options||(options={}),"boolean"!=typeof options.autoStart&&(options.autoStart=!1),"undefined"==typeof options.scroller&&(options.scroller=getParentScroller(elem));var scroller=Scrollable.infinite(elem,options,generator),scrollReady=!1;return Utils.ready(function(){scrollReady||(scroller.enable(),scroller.forceLayout(),scroller.disable())}),pageManager.ready(function(){scrollReady=!0;try{scroller.enable()}catch(err){return}scroller.layout(),page.addEventListener("appShow",function(){scroller.layout()}),page.addEventListener("appDestroy",function(){scroller.destroy()})}),scroller}function getParentPage(elem){var parent=elem;do if(/\bapp\-page\b/.test(parent.className))return parent;while(parent=parent.parentNode)}function getParentScroller(elem){var parent=elem;do if(/\bapp\-content\b/.test(parent.className))return parent;while(parent=parent.parentNode)}function getPageManager(page){return page?page[PAGE_MANAGER_VAR]:void 0}var TAGS={APP_CONTENT:"app-content",APP_SCROLLABLE:"app-scrollable",APP_SCROLLHACK:"app-scrollhack",NO_SCROLL:"data-no-scroll",SCROLLABLE:"data-scrollable",LAST_SCROLL:"data-last-scroll",SCROLL_STYLE:"data-scroll-style",TOUCH_SCROLL:"-webkit-overflow-scrolling"},PAGE_MANAGER_VAR="__appjsPageManager";return App.infiniteScroll=function(elem,options,generator){if(!Utils.isjQueryElem(elem)){if(!Utils.isNode(elem))throw TypeError("infinite scroll container must be a DOM node, got "+elem);return setupInfiniteScroll(elem,options,generator)}if(elem.length){for(var l=elem.length-1,i=0;l>i;i++)App.infiniteScroll(elem[i],options,generator);return App.infiniteScroll(elem[l],options,generator)}},{setup:setupScrollers,disable:disableScrolling,saveScrollPosition:savePageScrollPosition,saveScrollStyle:savePageScrollStyle,restoreScrollPosition:restorePageScrollPosition,restoreScrollStyle:restorePageScrollStyle}}(Scrollable,App._Utils),function(document,App,Utils){function bindListeners(){document.addEventListener("touchstart",function(e){var target=getTargetScroller(e);target&&!target._iScroll&&target.scrollHeight-target.clientHeight>1&&(target.scrollTop<=0||target.scrollTop+target.clientHeight>=target.scrollHeight)&&addTouches(e)}),document.addEventListener("touchmove",function(e){var target=getTargetScroller(e);target?target._iScroll?e.preventDefault():e.changedTouches&&(1===e.changedTouches.length&&onMove(e),updateTouches(e)):e.preventDefault()}),document.addEventListener("touchcancel",function(e){clearTouches(e)}),document.addEventListener("touchend",function(e){clearTouches(e)})}function getTargetScroller(e){var target=e.target;if(target)do if(target._scrollable)break;while(target=target.parentNode);return target}function onMove(e){var target=getTargetScroller(e),touch=e.changedTouches[0],y0=touches[touch.identifier],y1=touch.pageY;target&&"undefined"!=typeof y0&&(target.scrollTop<=0?y0>y1?delete touches[touch.identifier]:e.preventDefault():target.scrollTop+target.clientHeight>=target.scrollHeight?y1>y0?delete touches[touch.identifier]:e.preventDefault():delete touches[touch.identifier])}function addTouches(e){if(e.changedTouches)for(var i=0,l=e.changedTouches.length;l>i;i++)touches[e.changedTouches[i].identifier]=e.changedTouches[i].pageY}function updateTouches(e){if(e.changedTouches)for(var i=0,l=e.changedTouches.length;l>i;i++)e.changedTouches[i].identifier in touches&&(touches[e.changedTouches[i].identifier]=e.changedTouches[i].pageY)}function clearTouches(e){if(e.changedTouches)for(var i=0,l=e.changedTouches.length;l>i;i++)delete touches[e.changedTouches[i].identifier];if(e.touches){for(var ids=[],i=0,l=e.touches.length;l>i;i++)ids.push(e.touches[i].identifier+"");for(var id in touches)-1===ids.indexOf(id)&&delete touches[id]}}var touches={};!("ios"===App.platform&&App.platformVersion>=5)||Utils.os.faked||"object"==typeof kik&&null!==kik&&kik.enabled||bindListeners()}(document,App,App._Utils),App._Pages=function(window,document,Clickable,Scrollable,App,Utils,Events,Metrics,Scroll){function preloadPages(){if(!preloaded){preloaded=!0;for(var pageNodes=document.getElementsByClassName(PAGE_CLASS),i=pageNodes.length;i--;)addPage(pageNodes[i]);document.body.className+=" "+APP_LOADED}}function addPage(page,pageName){if(pageName||(pageName=page.getAttribute(PAGE_NAME)),!pageName)throw TypeError("page name was not specified");page.setAttribute(PAGE_NAME,pageName),page.parentNode&&page.parentNode.removeChild(page),pages[pageName]=page.cloneNode(!0)}function hasPage(pageName){return preloadPages(),pageName in pages}function clonePage(pageName){if(!hasPage(pageName))throw TypeError(pageName+" is not a known page");return pages[pageName].cloneNode(!0)}function addController(pageName,controller){controllers[pageName]=controller}function addCleanup(pageName,cleanup){cleanups[pageName]=cleanup}function populatePage(pageName,pageManager,page,args){var controller=controllers[pageName];if(controller){for(var prop in controller)pageManager[prop]=controller[prop];for(var prop in controller.prototype)pageManager[prop]=controller.prototype[prop];pageManager.page=page,pageManager.args=args,controller.call(pageManager,page,args)}}function unpopulatePage(pageName,pageManager,page,args){var cleanup=cleanups[pageName];cleanup&&cleanup.call(pageManager,page,args),firePageEvent(pageManager,page,EVENTS.DESTROY)}function createPageManager(restored){var pageManager={restored:restored,showing:!1,online:navigator.onLine},readyQueue=[];return pageManager.ready=function(func){if("function"!=typeof func)throw TypeError("ready must be called with a function, got "+func);readyQueue?readyQueue.push(func):func.call(pageManager)},pageManager[PAGE_READY_VAR]=function(){Utils.ready(function(){if(readyQueue){var queue=readyQueue.slice();readyQueue=null,Utils.isNode(pageManager.page)&&firePageEvent(pageManager,pageManager.page,EVENTS.READY),Utils.forEach(queue,function(func){func.call(pageManager)})}})},pageManager}function generatePage(pageName,args){var pageManager={},page=startPageGeneration(pageName,pageManager,args);return finishPageGeneration(pageName,pageManager,page,args),page}function destroyPage(page){var pageName=page.getAttribute(PAGE_NAME);startPageDestruction(pageName,{},page,{}),finishPageDestruction(pageName,{},page,{})}function startPageGeneration(pageName,pageManager,args){var page=clonePage(pageName),eventNames=[];for(var evt in EVENTS)eventNames.push(eventTypeToName(EVENTS[evt]));return Events.init(page,eventNames),Metrics.watchPage(page,pageName,args),page[PAGE_MANAGER_VAR]=pageManager,fixContentHeight(page),Utils.forEach(page.querySelectorAll(".app-button"),function(button){null===button.getAttribute("data-no-click")&&(Clickable(button),button.addEventListener("click",function(){function finish(){clickableClass&&(button.disabled=!1,button.classList.remove(clickableClass))}var args,target=button.getAttribute("data-target"),targetArgs=button.getAttribute("data-target-args"),back=null!==button.getAttribute("data-back"),manualBack=null!==button.getAttribute("data-manual-back");try{args=JSON.parse(targetArgs)}catch(err){}if(("object"!=typeof args||null===args)&&(args={}),!(!back&&!target||back&&manualBack)){var clickableClass=button.getAttribute("data-clickable-class");clickableClass&&(button.disabled=!0,button.classList.add(clickableClass)),back?App.back(finish):target&&App.load(target,args,{},finish)}},!1))}),populatePage(pageName,pageManager,page,args),page.addEventListener(eventTypeToName(EVENTS.SHOW),function(){setTimeout(function(){"function"==typeof pageManager[PAGE_READY_VAR]&&pageManager[PAGE_READY_VAR]()},0)},!1),page}function firePageEvent(pageManager,page,eventType){var eventName=eventTypeToName(eventType),funcName=eventTypeToFunctionName(eventType),success=!0;return Events.fire(page,eventName)||(success=!1),"function"==typeof pageManager[funcName]&&pageManager[funcName]()===!1&&(success=!1),success}function eventTypeToName(eventType){return"app"+eventType[0].toUpperCase()+eventType.slice(1)}function eventTypeToFunctionName(eventType){return"on"+eventType[0].toUpperCase()+eventType.slice(1)}function finishPageGeneration(pageName,pageManager,page){Scroll.setup(page)}function startPageDestruction(pageName,pageManager,page){(!Utils.os.ios||Utils.os.version<6)&&Scroll.disable(page),"function"==typeof pageManager.reply&&(pageManager._appNoBack=!0,pageManager.reply())}function finishPageDestruction(pageName,pageManager,page,args){unpopulatePage(pageName,pageManager,page,args)}function setupPageListeners(){window.addEventListener("orientationchange",triggerPageSizeFix),window.addEventListener("resize",triggerPageSizeFix),window.addEventListener("load",triggerPageSizeFix),setTimeout(triggerPageSizeFix,0),window.addEventListener("online",function(){App._Stack&&Utils.forEach(App._Stack.get(),function(pageInfo){pageInfo[2].online=!0,firePageEvent(pageInfo[2],pageInfo[3],EVENTS.ONLINE)
})},!1),window.addEventListener("offline",function(){App._Stack&&Utils.forEach(App._Stack.get(),function(pageInfo){pageInfo[2].online=!1,firePageEvent(pageInfo[2],pageInfo[3],EVENTS.OFFLINE)})},!1)}function triggerPageSizeFix(){fixContentHeight();var pageData;App._Stack&&(pageData=App._Stack.getCurrent()),pageData&&firePageEvent(pageData[2],pageData[3],EVENTS.LAYOUT),setTimeout(fixContentHeight,0),setTimeout(fixContentHeight,10),setTimeout(fixContentHeight,100)}function fixContentHeight(page){if(page||(App._Navigation&&(page=App._Navigation.getCurrentNode()),page)){var topbar=page.querySelector(".app-topbar"),content=page.querySelector(".app-content"),height=window.innerHeight;if(content){if(!topbar)return void(content.style.height=height+"px");var topbarStyles=document.defaultView.getComputedStyle(topbar,null),topbarHeight=Utils.os.android?48:44;topbarStyles.height&&(topbarHeight=parseInt(topbarStyles.height)||0,"border-box"!==(topbarStyles.boxSizing||topbarStyles.webkitBoxSizing)&&(topbarHeight+=(parseInt(topbarStyles.paddingBottom)||0)+(parseInt(topbarStyles.paddingTop)||0),topbarHeight+=(parseInt(topbarStyles.borderBottomWidth)||0)+(parseInt(topbarStyles.borderTopWidth)||0))),content.style.height=height-topbarHeight+"px"}}}function populatePageBackButton(page,oldPage){if(oldPage){var backButton=page.querySelector(".app-topbar .left.app-button"),oldTitle=oldPage.querySelector(".app-topbar .app-title");if(backButton&&oldTitle&&null!==backButton.getAttribute("data-autotitle")){var oldText=oldTitle.textContent,newText=backButton.textContent;oldText&&!newText&&(oldText.length>13&&(oldText=oldText.substr(0,12)+".."),backButton.textContent=oldText)}}}function enableIOSStatusBar(){statusBarEnabled||(statusBarEnabled=!0,document.body.className+=" "+APP_STATUSBAR,Utils.ready(function(){setTimeout(triggerPageSizeFix,6)}))}var PAGE_NAME="data-page",PAGE_CLASS="app-page",APP_LOADED="app-loaded",APP_STATUSBAR="app-ios-statusbar",PAGE_READY_VAR="__appjsFlushReadyQueue",PAGE_MANAGER_VAR="__appjsPageManager",EVENTS={SHOW:"show",HIDE:"hide",BACK:"back",FORWARD:"forward",BEFORE_BACK:"beforeBack",READY:"ready",DESTROY:"destroy",LAYOUT:"layout",ONLINE:"online",OFFLINE:"offline"},preloaded=!1,pages=(!!window.APP_FORCE_ISCROLL,{}),controllers={},cleanups={},statusBarEnabled=!1;return setupPageListeners(),window.APP_ENABLE_IOS_STATUSBAR&&enableIOSStatusBar(),App.add=function(pageName,page){if("string"!=typeof pageName&&(page=pageName,pageName=void 0),!Utils.isNode(page))throw TypeError("page template node must be a DOM node, got "+page);addPage(page,pageName)},App.controller=function(pageName,controller,cleanup){if("string"!=typeof pageName)throw TypeError("page name must be a string, got "+pageName);if("function"!=typeof controller)throw TypeError("page controller must be a function, got "+controller);switch(typeof cleanup){case"undefined":cleanup=function(){};break;case"function":break;default:throw TypeError("page cleanup handler must be a function, got "+cleanup)}controller&&addController(pageName,controller),cleanup&&addCleanup(pageName,cleanup)},App.populator=App.controller,App.generate=function(pageName,args){if("string"!=typeof pageName)throw TypeError("page name must be a string, got "+pageName);switch(typeof args){case"undefined":args={};break;case"object":break;default:throw TypeError("page arguments must be an object if defined, got "+args)}return generatePage(pageName,args)},App.destroy=function(page){if(!Utils.isNode(page))throw TypeError("page node must be a DOM node, got "+page);return destroyPage(page)},App._layout=triggerPageSizeFix,App._enableIOSStatusBar=enableIOSStatusBar,{EVENTS:EVENTS,has:hasPage,createManager:createPageManager,startGeneration:startPageGeneration,finishGeneration:finishPageGeneration,fire:firePageEvent,startDestruction:startPageDestruction,finishDestruction:finishPageDestruction,fixContent:fixContentHeight,populateBackButton:populatePageBackButton}}(window,document,Clickable,Scrollable,App,App._Utils,App._Events,App._Metrics,App._Scroll),App._Stack=function(window,document,App,Utils,Scroll,Pages){function saveStack(){try{for(var storedStack=[],i=0,l=stack.length;l>i&&stack[i][4].restorable!==!1;i++)storedStack.push([stack[i][0],stack[i][3],stack[i][2]]);localStorage[STACK_KEY]=JSON.stringify(storedStack),localStorage[STACK_TIME]=+new Date+""}catch(err){}}function destroyStack(){delete localStorage[STACK_KEY],delete localStorage[STACK_TIME]}function fetchStack(){return stack.slice().map(reorganisePageData)}function fetchStackSize(){return stack.length}function fetchLastStackItem(){var pageData=stack[stack.length-1];return pageData?reorganisePageData(pageData):void 0}function popLastStackItem(){var pageData=stack.pop();return pageData?reorganisePageData(pageData):void 0}function pushNewStackItem(pageData){stack.push([pageData[0],pageData[3],pageData[4],pageData[1],pageData[2]])}function fetchPage(index){var pageData=stack[index];return pageData?pageData[1]:void 0}function reorganisePageData(pageData){var pageArgs={};for(var key in pageData[3])pageArgs[key]=pageData[3][key];return[pageData[0],pageArgs,pageData[4],pageData[1],pageData[2]]}function removeFromStackNow(startIndex,endIndex){var deadPages=stack.splice(startIndex,endIndex-startIndex);Utils.forEach(deadPages,function(pageData){Pages.startDestruction(pageData[0],pageData[4],pageData[1],pageData[3]),Pages.finishDestruction(pageData[0],pageData[4],pageData[1],pageData[3])})}function removeFromStack(startIndex,endIndex){App._Navigation.enqueue(function(finish){removeFromStackNow(startIndex,endIndex),finish()})}function addToStackNow(index,newPages){var lastPage,pageDatas=[];Utils.forEach(newPages,function(pageData){var pageManager=Pages.createManager(!0),page=Pages.startGeneration(pageData[0],pageManager,pageData[1]);!pageData[2].transition&&pageManager.transition&&(pageData[2].transition=pageManager.transition),Pages.populateBackButton(page,lastPage),Pages.finishGeneration(pageData[0],pageManager,page,pageData[1]),Scroll.saveScrollPosition(page),Scroll.saveScrollStyle(page),pageDatas.push([pageData[0],page,pageData[2],pageData[1],pageManager]),lastPage=page}),pageDatas.unshift(0),pageDatas.unshift(index),Array.prototype.splice.apply(stack,pageDatas)}function addToStack(index,newPages){App._Navigation.enqueue(function(finish){addToStackNow(index,newPages),finish()})}function setupRestoreFunction(){var storedStack,lastPage;try{storedStack=JSON.parse(localStorage[STACK_KEY]),storedTime=parseInt(localStorage[STACK_TIME]),lastPage=storedStack.pop()}catch(err){return}if(lastPage)return function(options,callback){switch(typeof options){case"function":callback=options;case"undefined":options={};case"object":if(null!==options)break;default:throw TypeError("restore options must be an object if defined, got "+options)}switch(typeof callback){case"undefined":callback=function(){};case"function":break;default:throw TypeError("restore callback must be a function if defined, got "+callback)}if(+new Date-storedTime>=options.maxAge)throw TypeError("restore content is too old");if(!Pages.has(lastPage[0]))throw TypeError(lastPage[0]+" is not a known page");Utils.forEach(storedStack,function(pageData){if(!Pages.has(pageData[0]))throw TypeError(pageData[0]+" is not a known page")});try{addToStackNow(0,storedStack,!0)}catch(err){throw removeFromStackNow(0,stack.length),Error("failed to restore stack")}saveStack();try{App.load(lastPage[0],lastPage[1],lastPage[2],callback)}catch(err){throw removeFromStackNow(0,stack.length),Error("failed to restore stack")}}}var STACK_KEY="__APP_JS_STACK__"+window.location.pathname,STACK_TIME="__APP_JS_TIME__"+window.location.pathname,stack=[];return App.getStack=function(){return fetchStack()},App.getPage=function(index){var stackSize=stack.length-1;switch(typeof index){case"undefined":index=stackSize;break;case"number":if(Math.abs(index)>stackSize)throw TypeError("absolute index cannot be greater than stack size, got "+index);0>index&&(index=stackSize+index);break;default:throw TypeError("page index must be a number if defined, got "+index)}return fetchPage(index)},App.removeFromStack=function(startIndex,endIndex){var stackSize=stack.length-1;switch(typeof startIndex){case"undefined":startIndex=0;break;case"number":if(Math.abs(startIndex)>stackSize)throw TypeError("absolute start index cannot be greater than stack size, got "+startIndex);0>startIndex&&(startIndex=stackSize+startIndex);break;default:throw TypeError("start index must be a number if defined, got "+startIndex)}switch(typeof endIndex){case"undefined":endIndex=stackSize;break;case"number":if(Math.abs(endIndex)>stackSize)throw TypeError("absolute end index cannot be greater than stack size, got "+endIndex);0>endIndex&&(endIndex=stackSize+endIndex);break;default:throw TypeError("end index must be a number if defined, got "+endIndex)}if(startIndex>endIndex)throw TypeError("start index cannot be greater than end index");removeFromStack(startIndex,endIndex)},App.addToStack=function(index,newPages){var stackSize=stack.length-1;switch(typeof index){case"undefined":index=0;break;case"number":if(Math.abs(index)>stackSize)throw TypeError("absolute index cannot be greater than stack size, got "+index);0>index&&(index=stackSize+index);break;default:throw TypeError("index must be a number if defined, got "+index)}if(!Utils.isArray(newPages))throw TypeError("added pages must be an array, got "+newPages);newPages=newPages.slice(),Utils.forEach(newPages,function(page,i){if("string"==typeof page)page=[page,{}];else{if(!Utils.isArray(page))throw TypeError("page description must be an array (page name, arguments), got "+page);page=page.slice()}if("string"!=typeof page[0])throw TypeError("page name must be a string, got "+page[0]);switch(typeof page[1]){case"undefined":page[1]={};case"object":break;default:throw TypeError("page arguments must be an object if defined, got "+page[1])}switch(typeof page[2]){case"undefined":page[2]={};case"object":break;default:throw TypeError("page options must be an object if defined, got "+page[2])}newPages[i]=page}),addToStack(index,newPages)},App.saveStack=function(){saveStack()},App.destroyStack=function(){destroyStack()},App.restore=setupRestoreFunction(),{get:fetchStack,getCurrent:fetchLastStackItem,getPage:fetchPage,pop:popLastStackItem,push:pushNewStackItem,size:fetchStackSize,save:saveStack,destroy:destroyStack}}(window,document,App,App._Utils,App._Scroll,App._Pages),App._Transitions=function(window,document,Swapper,App,Utils,Scroll,Pages,Stack){function setDefaultTransition(transition){defaultTransition=transition,reverseTransition=REVERSE_TRANSITION[defaultTransition]}function shouldUseNativeIOSTransition(transition){return Utils.os.ios?"slide-left"===transition?!0:"slide-right"===transition?!0:!1:!1}function performTransition(oldPage,page,options,callback,reverse){function finish(){document.body.className=document.body.className.replace(new RegExp("\\b"+TRANSITION_CLASS+"\\b"),""),callback()}options.transition||(options.transition=reverse?reverseTransition:defaultTransition);var isIOS7SlideUp=Utils.os.ios&&Utils.os.version>=7&&{"slideon-down":1,"slideoff-down":1}[options.transition];options.duration||(options.duration=Utils.os.ios?Utils.os.version<7?325:isIOS7SlideUp?475:425:270),!options.easing&&isIOS7SlideUp&&(options.easing="cubic-bezier(0.4,0.6,0.05,1)"),document.body.className+=" "+TRANSITION_CLASS,"instant"===options.transition?Swapper(oldPage,page,options,function(){setTimeout(finish,0)}):shouldUseNativeIOSTransition(options.transition)?performNativeIOSTransition(oldPage,page,options,finish):Swapper(oldPage,page,options,finish)}function performNativeIOSTransition(oldPage,page,options,callback){var slideLeft="slide-left"===options.transition,topPage=slideLeft?page:oldPage,transitions=getNativeIOSTransitionList(page,oldPage,slideLeft);if(!transitions)return void Swapper(oldPage,page,options,callback);var oldPosition=topPage.style.position,oldZIndex=topPage.style.zIndex,oldBackground=topPage.style.background;topPage.style.position="fixed",topPage.style.zIndex="4000",topPage.style.background="none",slideLeft?oldPage.parentNode.insertBefore(page,oldPage):oldPage.nextSibling?oldPage.parentNode.insertBefore(page,oldPage.nextSibling):oldPage.parentNode.appendChild(page),App._Pages&&(App._Pages.fixContent(oldPage),App._Pages.fixContent(page)),options.easing=Utils.os.version<7?"ease-in-out":"cubic-bezier(0.4,0.6,0.2,1)",Utils.animate(transitions,options.duration,options.easing,function(){oldPage.parentNode.removeChild(oldPage),topPage.style.position=oldPosition,topPage.style.zIndex=oldZIndex,topPage.style.background=oldBackground,callback()})}function getNativeIOSTransitionList(page,oldPage,slideLeft){var currentBar=oldPage.querySelector(".app-topbar"),currentTitle=oldPage.querySelector(".app-topbar .app-title"),currentBack=oldPage.querySelector(".app-topbar .left.app-button"),currentContent=oldPage.querySelector(".app-content"),newBar=page.querySelector(".app-topbar"),newTitle=page.querySelector(".app-topbar .app-title"),newBack=page.querySelector(".app-topbar .left.app-button"),newContent=page.querySelector(".app-content"),transitions=[];if(currentBar&&newBar&&currentContent&&newContent&&Utils.isVisible(currentBar)&&Utils.isVisible(newBar))return currentBack&&null!==currentBack.getAttribute("data-noslide")&&(currentBack=void 0),newBack&&null!==newBack.getAttribute("data-noslide")&&(newBack=void 0),transitions.push(slideLeft?{opacityStart:0,opacityEnd:1,elem:newBar}:{opacityStart:1,opacityEnd:0,elem:currentBar}),currentTitle&&transitions.push({transitionStart:"translate3d(0,0,0)",transitionEnd:"translate3d("+getTitleTransform(newBack,slideLeft)+"px,0,0)",elem:currentTitle}),newTitle&&transitions.push({transitionStart:"translate3d("+getTitleTransform(currentBack,!slideLeft)+"px,0,0)",transitionEnd:"translate3d(0,0,0)",elem:newTitle}),Utils.os.version>=5&&(currentBack&&transitions.push({transitionStart:"translate3d(0,0,0)",transitionEnd:"translate3d("+getBackTransform(currentBack,newBack,!slideLeft)+"px,0,0)",elem:currentBack}),newBack&&transitions.push({transitionStart:"translate3d("+getBackTransform(newBack,currentBack,slideLeft)+"px,0,0)",transitionEnd:"translate3d(0,0,0)",elem:newBack})),Utils.os.version<7?transitions.push({transitionStart:"translate3d(0,0,0)",transitionEnd:"translate3d("+(slideLeft?-100:100)+"%,0,0)",elem:currentContent},{transitionStart:"translate3d("+(slideLeft?100:-100)+"%,0,0)",transitionEnd:"translate3d(0,0,0)",elem:newContent}):transitions.push({transitionStart:"translate3d(0,0,0)",transitionEnd:"translate3d("+(slideLeft?-30:100)+"%,0,0)",elem:currentContent},{transitionStart:"translate3d("+(slideLeft?100:-30)+"%,0,0)",transitionEnd:"translate3d(0,0,0)",elem:newContent}),transitions}function getBackTransform(backButton,oldButton,toCenter){var fullWidth=backButton.textContent.length*(Utils.os.version<7?10:12),oldWidth=oldButton?15*oldButton.textContent.length:0;return toCenter?(window.innerWidth-fullWidth)/2:(oldWidth-window.innerWidth)/2}function getTitleTransform(backButton,toLeft){var fullWidth=0;return backButton&&Utils.os.version>=5&&(fullWidth=backButton.textContent.length*(Utils.os.version<7?10:12)),toLeft?(fullWidth-window.innerWidth)/2:window.innerWidth/2}function allowDragging(){shouldDrag=!0}function checkForDragTransitionMetaTag(){for(var metas=document.querySelectorAll("meta"),i=0,l=metas.length;l>i;i++)if("app-drag-transition"===metas[i].name&&"true"===metas[i].content)return void allowDragging()}function enableIOS7DragTransition(){function unbindListeners(){window.removeEventListener("touchstart",startDrag),window.removeEventListener("touchmove",dragMove),window.removeEventListener("touchcancel",finishDrag),window.removeEventListener("touchend",finishDrag)}function cleanupElems(){currentPage[3].style.position=oldPosition,currentPage[3].style.zIndex=oldZIndex,currentPage[3].style.background=oldBackground,previousPage[3].parentNode&&previousPage[3].parentNode.removeChild(previousPage[3])}function startDrag(e){if(!(draggingTouch||navigationLock||dead)){var touch=e.touches&&e.touches[0];!touch||touch.pageX>WALL_RADIUS||Pages.fire(currentPage[2],currentPage[3],Pages.EVENTS.BEFORE_BACK)&&(e.preventDefault(),App._Navigation.enqueue(function(unlock){navigationLock=unlock},!0),document.body.className+=" "+TRANSITION_CLASS,draggingTouch=lastTouch={x:touch.pageX,y:touch.pageY},currentBar.style.webkitTransition="all 0s linear",currentTitle&&(currentTitle.style.webkitTransition="all 0s linear"),currentBack&&(currentBack.style.webkitTransition="all 0s linear"),currentContent.style.webkitTransition="all 0s linear",oldBar.style.webkitTransition="all 0s linear",oldTitle&&(oldTitle.style.webkitTransition="all 0s linear"),oldBack&&(oldBack.style.webkitTransition="all 0s linear"),oldContent.style.webkitTransition="all 0s linear")}}function dragMove(e){if(draggingTouch&&e.touches&&e.touches[0]&&!dead){lastTouch&&(goBack=lastTouch.x<e.touches[0].pageX),lastTouch={x:e.touches[0].pageX,y:e.touches[0].pageY};var progress=Math.min(Math.max(0,(lastTouch.x-draggingTouch.x)/window.innerWidth),1);setDragPosition(progress)}}function finishDrag(e){function finishTransition(){currentPage[3].removeEventListener("webkitTransitionEnd",finishTransition),goBack?currentPage[3].parentNode&&currentPage[3].parentNode.removeChild(currentPage[3]):previousPage[3].parentNode&&previousPage[3].parentNode.removeChild(previousPage[3]),currentPage[3].style.position=oldPosition,currentPage[3].style.zIndex=oldZIndex,currentPage[3].style.background=oldBackground,currentBar.style.webkitTransition="",currentBar.style.webkitTransform="",currentTitle&&(currentTitle.style.webkitTransition="",currentTitle.style.webkitTransform=""),currentBack&&(currentBack.style.webkitTransition="",currentBack.style.webkitTransform=""),currentContent.style.webkitTransition="",currentContent.style.webkitTransform="",oldBar.style.webkitTransition="",oldBar.style.webkitTransform="",oldTitle&&(oldTitle.style.webkitTransition="",oldTitle.style.webkitTransform=""),oldBack&&(oldBack.style.webkitTransition="",oldBack.style.webkitTransform=""),oldContent.style.webkitTransition="",oldContent.style.webkitTransform="",document.body.className=document.body.className.replace(new RegExp("\\b"+TRANSITION_CLASS+"\\b"),""),goBack&&(Pages.startDestruction(currentPage[0],currentPage[2],currentPage[3],currentPage[1]),Pages.fixContent(oldNode),Scroll.restoreScrollStyle(oldNode),currentPage[2].showing=!1,Pages.fire(currentPage[2],currentPage[3],Pages.EVENTS.HIDE),previousPage[2].showing=!0,Pages.fire(previousPage[2],oldNode,Pages.EVENTS.SHOW),Pages.finishDestruction(currentPage[0],currentPage[2],currentPage[3],currentPage[1]),Stack.pop(),App._Navigation.update()),dragLock=null,navigationLock()}if(draggingTouch&&navigationLock&&!dead){unbindListeners(),lastTouch=e.touches&&e.touches[0]||lastTouch;lastTouch&&(progress=(lastTouch.x-draggingTouch.x)/window.innerWidth);var dontTransition=.1>progress&&!goBack||progress>.9&&goBack;dontTransition||(currentBar.style.webkitTransitionDuration="0.15s",currentTitle&&(currentTitle.style.webkitTransitionDuration="0.15s"),currentBack&&(currentBack.style.webkitTransitionDuration="0.15s"),currentContent.style.webkitTransitionDuration="0.15s",oldBar.style.webkitTransitionDuration="0.15s",oldTitle&&(oldTitle.style.webkitTransitionDuration="0.15s"),oldBack&&(oldBack.style.webkitTransitionDuration="0.15s"),oldContent.style.webkitTransitionDuration="0.15s"),goBack?(Pages.fire(currentPage[2],currentPage[3],Pages.EVENTS.BACK),setDragPosition(1)):setDragPosition(0),draggingTouch=lastTouch=null,dontTransition?finishTransition():currentPage[3].addEventListener("webkitTransitionEnd",finishTransition,!1)}}function setDragPosition(progress){currentBar.style.opacity=1-progress,currentTitle&&(currentTitle.style.webkitTransform="translate3d("+progress*window.innerWidth/2+"px,0,0)"),currentBack&&(currentBack.style.webkitTransform="translate3d("+progress*(window.innerWidth-12*currentBack.textContent.length)/2+"px,0,0)"),currentContent.style.webkitTransform="translate3d("+100*progress+"%,0,0)",oldTitle&&(oldTitle.style.webkitTransform="translate3d("+(1-progress)*(window.innerWidth-12*currentBack.textContent.length)/-2+"px,0,0)"),oldBack&&(oldBack.style.webkitTransform="translate3d("+-150*(1-progress)+"%,0,0)"),oldContent.style.webkitTransform="translate3d("+-30*(1-progress)+"%,0,0)"}if(shouldDrag&&Utils.os.ios&&!(Utils.os.version<7)){var draggingTouch,lastTouch,navigationLock,dead,pages=Stack.get().slice(-2),previousPage=pages[0],currentPage=pages[1];if(previousPage&&currentPage){var currentNode=currentPage[3],currentBar=currentPage[3].querySelector(".app-topbar"),currentTitle=currentPage[3].querySelector(".app-topbar .app-title"),currentBack=currentPage[3].querySelector(".app-topbar .left.app-button"),currentContent=currentPage[3].querySelector(".app-content"),oldNode=previousPage[3],oldBar=previousPage[3].querySelector(".app-topbar"),oldTitle=previousPage[3].querySelector(".app-topbar .app-title"),oldBack=previousPage[3].querySelector(".app-topbar .left.app-button"),oldContent=previousPage[3].querySelector(".app-content");if(currentNode&&currentBar&&currentContent&&oldNode&&oldBar&&oldContent&&("slide-left"===currentPage[4].transition||!currentPage[4].transition&&"slide-left"===defaultTransition)){var oldPosition=currentPage[3].style.position,oldZIndex=currentPage[3].style.zIndex,oldBackground=currentPage[3].style.background;currentPage[3].style.position="fixed",currentPage[3].style.zIndex="4000",currentPage[3].style.background="none",currentPage[3].nextSibling?currentPage[3].parentNode.insertBefore(previousPage[3],currentPage[3].nextSibling):currentPage[3].parentNode.appendChild(previousPage[3]),Pages.fixContent(oldNode),Scroll.restoreScrollPosition(oldNode),window.addEventListener("touchstart",startDrag,!1),window.addEventListener("touchmove",dragMove,!1),window.addEventListener("touchcancel",finishDrag,!1),window.addEventListener("touchend",finishDrag,!1);var goBack=!1;dragLock=function(){unbindListeners(),cleanupElems()}}}}}function disableIOS7DragTransition(){dragLock&&(dragLock(),dragLock=null)}var defaultTransition,reverseTransition,dragLock,TRANSITION_CLASS="app-transition",DEFAULT_TRANSITION_IOS="slide-left",DEFAULT_TRANSITION_ANDROID="implode-out",DEFAULT_TRANSITION_ANDROID_OLD="fade-on",DEFAULT_TRANSITION_ANDROID_GHETTO="instant",REVERSE_TRANSITION={instant:"instant",fade:"fade","fade-on":"fade-off","fade-off":"fade-on","scale-in":"scale-out","scale-out":"scale-in","rotate-left":"rotate-right","rotate-right":"rotate-left","cube-left":"cube-right","cube-right":"cube-left","swap-left":"swap-right","swap-right":"swap-left","explode-in":"explode-out","explode-out":"explode-in","implode-in":"implode-out","implode-out":"implode-in","slide-left":"slide-right","slide-right":"slide-left","slide-up":"slide-down","slide-down":"slide-up","slideon-left":"slideoff-left","slideon-right":"slideoff-right","slideon-up":"slideoff-up","slideon-down":"slideoff-down","slideoff-left":"slideon-left","slideoff-right":"slideon-right","slideoff-up":"slideon-up","slideoff-down":"slideon-down","glideon-right":"glideoff-right","glideoff-right":"slideon-right","glideon-left":"glideoff-left","glideoff-left":"slideon-left","glideon-down":"glideoff-down","glideoff-down":"slideon-down","glideon-up":"glideoff-up","glideoff-up":"slideon-up"},WALL_RADIUS=10,shouldDrag=!1;return Utils.os.ios?setDefaultTransition(DEFAULT_TRANSITION_IOS):Utils.os.android&&setDefaultTransition(Utils.os.version>=4?DEFAULT_TRANSITION_ANDROID:Utils.os.version<2.3||/LT15a/i.test(navigator.userAgent)?DEFAULT_TRANSITION_ANDROID_GHETTO:DEFAULT_TRANSITION_ANDROID_OLD),checkForDragTransitionMetaTag(),App.setDefaultTransition=function(transition){if("object"==typeof transition){switch(Utils.os.name){case"android":transition=Utils.os.version<4&&transition.androidFallback?transition.androidFallback:transition.android;break;case"ios":transition=Utils.os.version<5&&transition.iosFallback?transition.iosFallback:transition.ios;break;default:transition=transition.fallback}if(!transition)return}if("string"!=typeof transition)throw TypeError("transition must be a string if defined, got "+transition);if(!(transition in REVERSE_TRANSITION))throw TypeError("invalid transition type, got "+transition);setDefaultTransition(transition)},App.getDefaultTransition=function(){return defaultTransition},App.getReverseTransition=function(){return reverseTransition},App.enableDragTransition=function(){allowDragging()},{REVERSE_TRANSITION:REVERSE_TRANSITION,run:performTransition,enableDrag:enableIOS7DragTransition,disableDrag:disableIOS7DragTransition}}(window,document,Swapper,App,App._Utils,App._Scroll,App._Pages,App._Stack),App._Navigation=function(window,document,App,Dialog,Scroll,Pages,Stack,Transitions){function navigate(handler,dragTransition){return navLock?(navQueue.push(handler),!1):(navLock=!0,dragTransition||Transitions.disableDrag(),handler(function(){Stack.save(),navLock=!1,processNavigationQueue()||Transitions.enableDrag()}),!0)}function processNavigationQueue(){return navQueue.length?(navigate(navQueue.shift()),!0):!1}function getCurrentNode(){return currentNode}function updateCurrentNode(){var lastStackItem=Stack.getCurrent();current=lastStackItem[0],currentNode=lastStackItem[3]}function loadPage(pageName,args,options,callback,setupPickerMode){return navigate(function(unlock){function updatePageData(){current=pageName,currentNode=page,Stack.push([pageName,args,pageManager,page,options]),oldNode&&restoreManager&&Pages.fire(restoreManager,oldNode,Pages.EVENTS.FORWARD)}function finish(){Scroll.saveScrollStyle(oldNode),Pages.finishGeneration(pageName,pageManager,page,args),unlock(),callback(),oldNode&&restoreManager&&(restoreManager.showing=!1,Pages.fire(restoreManager,oldNode,Pages.EVENTS.HIDE)),pageManager.showing=!0,Pages.fire(pageManager,page,Pages.EVENTS.SHOW)}var oldNode=currentNode,pageManager=Pages.createManager(!1);setupPickerMode&&setupPickerMode(pageManager);var page=Pages.startGeneration(pageName,pageManager,args),restoreData=Stack.getCurrent(),restoreNode=restoreData&&restoreData[3],restoreManager=restoreData&&restoreData[2];if(!options.transition&&pageManager.transition&&(options.transition=pageManager.transition),Pages.populateBackButton(page,oldNode||restoreNode),current){Scroll.saveScrollPosition(currentNode);var newOptions={};for(var key in options)newOptions[key]=options[key];uiBlockedTask(function(unlockUI){Transitions.run(currentNode,page,newOptions,function(){Pages.fixContent(page),unlockUI(),finish()}),Pages.fire(pageManager,page,Pages.EVENTS.LAYOUT)}),updatePageData()}else App.restore=null,document.body.appendChild(page),Pages.fire(pageManager,page,Pages.EVENTS.LAYOUT),updatePageData(),finish()}),Pages.has(pageName)?void 0:!1}function navigateBack(backPageName,callback){if(Dialog.status()&&Dialog.close()&&!backPageName)return void callback();var stack=Stack.get().map(function(page){return page[0]});if(!stack.length)throw Error(backPageName+" is not currently in the stack, cannot go back to it");if(backPageName){for(var index=-1,i=stack.length-1;i>=0;i--)if(stack[i]===backPageName){index=i;break}if(-1===index)throw Error(backPageName+" is not currently in the stack, cannot go back to it");index!==stack.length-2&&App.removeFromStack(index+1)}var stackLength=stack.length,cancelled=!1,navigatedImmediately=navigate(function(unlock){if(Stack.size()<2)return void unlock();var oldPage=Stack.getCurrent();if(!Pages.fire(oldPage[2],oldPage[3],Pages.EVENTS.BEFORE_BACK))return cancelled=!0,void unlock();Stack.pop();var data=Stack.getCurrent(),pageName=data[0],page=data[3],oldOptions=oldPage[4];Pages.fire(oldPage[2],oldPage[3],Pages.EVENTS.BACK),Pages.fixContent(page),Pages.startDestruction(oldPage[0],oldPage[2],oldPage[3],oldPage[1]),Scroll.restoreScrollPosition(page);var newOptions={};for(var key in oldOptions)newOptions[key]="transition"===key?Transitions.REVERSE_TRANSITION[oldOptions[key]]||oldOptions[key]:oldOptions[key];uiBlockedTask(function(unlockUI){Transitions.run(currentNode,page,newOptions,function(){Pages.fixContent(page),Scroll.restoreScrollStyle(page),unlockUI(),oldPage[2].showing=!1,Pages.fire(oldPage[2],oldPage[3],Pages.EVENTS.HIDE),data[2].showing=!0,Pages.fire(data[2],page,Pages.EVENTS.SHOW),setTimeout(function(){Pages.finishDestruction(oldPage[0],oldPage[2],oldPage[3],oldPage[1]),unlock(),callback()},0)},!0),Pages.fixContent(page),Pages.fire(data[2],page,Pages.EVENTS.LAYOUT)}),current=pageName,currentNode=page});return cancelled||navigatedImmediately&&2>stackLength?!1:void 0}function pickPage(pageName,args,options,loadCallback,callback){var finished=!1;loadPage(pageName,args,options,loadCallback,function(pageManager){pageManager.restorable=!1,pageManager.reply=function(){finished||(finished=!0,pageManager._appNoBack||navigateBack(void 0,function(){}),callback.apply(App,arguments))}})}function uiBlockedTask(task){var taskComplete=!1,clickBlocker=document.createElement("div");clickBlocker.className="app-clickblocker",document.body.appendChild(clickBlocker),clickBlocker.addEventListener("touchstart",function(e){e.preventDefault()},!1),task(function(){taskComplete||(taskComplete=!0,document.body.removeChild(clickBlocker))})}var current,currentNode,navQueue=[],navLock=!1;return App.current=function(){return current},App.load=function(pageName,args,options,callback){if("string"!=typeof pageName)throw TypeError("page name must be a string, got "+pageName);switch(typeof args){case"function":options=args,args={};case"string":callback=options,options=args;case"undefined":args={};case"object":break;default:throw TypeError("page arguments must be an object if defined, got "+args)}switch(typeof options){case"function":callback=options;case"undefined":options={};case"object":break;case"string":options={transition:options};break;default:throw TypeError("options must be an object if defined, got "+options)}switch(typeof callback){case"undefined":callback=function(){};case"function":break;default:throw TypeError("callback must be a function if defined, got "+callback)}return loadPage(pageName,args,options,callback)},App.back=function(pageName,callback){switch(typeof pageName){case"function":callback=pageName;case"undefined":pageName=void 0;case"string":break;default:throw TypeError("pageName must be a string if defined, got "+pageName)}switch(typeof callback){case"undefined":callback=function(){};case"function":break;default:throw TypeError("callback must be a function if defined, got "+callback)}return navigateBack(pageName,callback)},App.pick=function(pageName,args,options,loadCallback,callback){if("string"!=typeof pageName)throw TypeError("page name must be a string, got "+pageName);switch(typeof args){case"function":options=args,args={};case"string":callback=loadCallback,loadCallback=options,options=args;case"undefined":args={};case"object":break;default:throw TypeError("page arguments must be an object if defined, got "+args)}switch(typeof options){case"function":callback=loadCallback,loadCallback=options;case"undefined":options={};case"object":break;case"string":options={transition:options};break;default:throw TypeError("options must be an object if defined, got "+options)}if("function"!=typeof loadCallback)throw TypeError("callback must be a function, got "+loadCallback);switch(typeof callback){case"undefined":callback=loadCallback,loadCallback=function(){};case"function":break;default:throw TypeError("callback must be a function, got "+callback)}return pickPage(pageName,args,options,loadCallback,callback)},{getCurrentNode:getCurrentNode,update:updateCurrentNode,enqueue:navigate}}(window,document,App,App._Dialog,App._Scroll,App._Pages,App._Stack,App._Transitions),function(global,undefined){"use strict";var Alertify,document=global.document;Alertify=function(){var $,btnCancel,btnOK,btnReset,btnResetBack,btnFocus,elCallee,elCover,elDialog,elLog,form,input,getTransitionEvent,_alertify={},dialogs={},isopen=!1,keys={ENTER:13,ESC:27,SPACE:32},queue=[];
return dialogs={buttons:{holder:'<nav class="alertify-buttons">{{buttons}}</nav>',submit:'<button type="submit" class="alertify-button alertify-button-ok" id="alertify-ok">{{ok}}</button>',ok:'<button class="alertify-button alertify-button-ok" id="alertify-ok">{{ok}}</button>',cancel:'<button class="alertify-button alertify-button-cancel" id="alertify-cancel">{{cancel}}</button>'},input:'<div class="alertify-text-wrapper"><input type="text" class="alertify-text" id="alertify-text"></div>',message:'<p class="alertify-message">{{message}}</p>',log:'<article class="alertify-log{{class}}">{{message}}</article>'},getTransitionEvent=function(){var t,type,supported=!1,el=document.createElement("fakeelement"),transitions={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"};for(t in transitions)if(el.style[t]!==undefined){type=transitions[t],supported=!0;break}return{type:type,supported:supported}},$=function(id){return document.getElementById(id)},_alertify={labels:{ok:"OK",cancel:"Cancel"},delay:5e3,buttonReverse:!1,buttonFocus:"ok",transition:undefined,addListeners:function(fn){var ok,cancel,common,key,reset,hasOK="undefined"!=typeof btnOK,hasCancel="undefined"!=typeof btnCancel,hasInput="undefined"!=typeof input,val="",self=this;ok=function(event){return"undefined"!=typeof event.preventDefault&&event.preventDefault(),common(event),"undefined"!=typeof input&&(val=input.value),"function"==typeof fn&&("undefined"!=typeof input?fn(!0,val):fn(!0)),!1},cancel=function(event){return"undefined"!=typeof event.preventDefault&&event.preventDefault(),common(event),"function"==typeof fn&&fn(!1),!1},common=function(){self.hide(),self.unbind(document.body,"keyup",key),self.unbind(btnReset,"focus",reset),hasOK&&self.unbind(btnOK,"click",ok),hasCancel&&self.unbind(btnCancel,"click",cancel)},key=function(event){var keyCode=event.keyCode;(keyCode===keys.SPACE&&!hasInput||hasInput&&keyCode===keys.ENTER)&&ok(event),keyCode===keys.ESC&&hasCancel&&cancel(event)},reset=function(){hasInput?input.focus():!hasCancel||self.buttonReverse?btnOK.focus():btnCancel.focus()},this.bind(btnReset,"focus",reset),this.bind(btnResetBack,"focus",reset),hasOK&&this.bind(btnOK,"click",ok),hasCancel&&this.bind(btnCancel,"click",cancel),this.bind(document.body,"keyup",key),this.transition.supported||this.setFocus()},bind:function(el,event,fn){"function"==typeof el.addEventListener?el.addEventListener(event,fn,!1):el.attachEvent&&el.attachEvent("on"+event,fn)},handleErrors:function(){if("undefined"!=typeof global.onerror){var self=this;return global.onerror=function(msg,url,line){self.error("["+msg+" on line "+line+" of "+url+"]",0)},!0}return!1},appendButtons:function(secondary,primary){return this.buttonReverse?primary+secondary:secondary+primary},build:function(item){var html="",type=item.type,message=item.message,css=item.cssClass||"";switch(html+='<div class="alertify-dialog">',html+='<a id="alertify-resetFocusBack" class="alertify-resetFocus" href="#">Reset Focus</a>',"none"===_alertify.buttonFocus&&(html+='<a href="#" id="alertify-noneFocus" class="alertify-hidden"></a>'),"prompt"===type&&(html+='<div id="alertify-form">'),html+='<article class="alertify-inner">',html+=dialogs.message.replace("{{message}}",message),"prompt"===type&&(html+=dialogs.input),html+=dialogs.buttons.holder,html+="</article>","prompt"===type&&(html+="</div>"),html+='<a id="alertify-resetFocus" class="alertify-resetFocus" href="#">Reset Focus</a>',html+="</div>",type){case"confirm":html=html.replace("{{buttons}}",this.appendButtons(dialogs.buttons.cancel,dialogs.buttons.ok)),html=html.replace("{{ok}}",this.labels.ok).replace("{{cancel}}",this.labels.cancel);break;case"prompt":html=html.replace("{{buttons}}",this.appendButtons(dialogs.buttons.cancel,dialogs.buttons.submit)),html=html.replace("{{ok}}",this.labels.ok).replace("{{cancel}}",this.labels.cancel);break;case"alert":html=html.replace("{{buttons}}",dialogs.buttons.ok),html=html.replace("{{ok}}",this.labels.ok)}return elDialog.className="alertify alertify-"+type+" "+css,elCover.className="alertify-cover",html},close:function(elem,wait){var hideElement,transitionDone,timer=wait&&!isNaN(wait)?+wait:this.delay,self=this;this.bind(elem,"click",function(){hideElement(elem)}),transitionDone=function(event){event.stopPropagation(),self.unbind(this,self.transition.type,transitionDone),elLog.removeChild(this),elLog.hasChildNodes()||(elLog.className+=" alertify-logs-hidden")},hideElement=function(el){"undefined"!=typeof el&&el.parentNode===elLog&&(self.transition.supported?(self.bind(el,self.transition.type,transitionDone),el.className+=" alertify-log-hide"):(elLog.removeChild(el),elLog.hasChildNodes()||(elLog.className+=" alertify-logs-hidden")))},0!==wait&&setTimeout(function(){hideElement(elem)},timer)},dialog:function(message,type,fn,placeholder,cssClass){elCallee=document.activeElement;var check=function(){elLog&&null!==elLog.scrollTop&&elCover&&null!==elCover.scrollTop||check()};if("string"!=typeof message)throw new Error("message must be a string");if("string"!=typeof type)throw new Error("type must be a string");if("undefined"!=typeof fn&&"function"!=typeof fn)throw new Error("fn must be a function");return this.init(),check(),queue.push({type:type,message:message,callback:fn,placeholder:placeholder,cssClass:cssClass}),isopen||this.setup(),this},extend:function(type){if("string"!=typeof type)throw new Error("extend method must have exactly one paramter");return function(message,wait){return this.log(message,type,wait),this}},hide:function(){var transitionDone,self=this;queue.splice(0,1),queue.length>0?this.setup(!0):(isopen=!1,transitionDone=function(event){event.stopPropagation(),self.unbind(elDialog,self.transition.type,transitionDone)},this.transition.supported?(this.bind(elDialog,this.transition.type,transitionDone),elDialog.className="alertify alertify-hide alertify-hidden"):elDialog.className="alertify alertify-hide alertify-hidden alertify-isHidden",elCover.className="alertify-cover alertify-cover-hidden",elCallee.focus())},init:function(){document.createElement("nav"),document.createElement("article"),document.createElement("section"),null==$("alertify-cover")&&(elCover=document.createElement("div"),elCover.setAttribute("id","alertify-cover"),elCover.className="alertify-cover alertify-cover-hidden",document.body.appendChild(elCover)),null==$("alertify")&&(isopen=!1,queue=[],elDialog=document.createElement("section"),elDialog.setAttribute("id","alertify"),elDialog.className="alertify alertify-hidden",document.body.appendChild(elDialog)),null==$("alertify-logs")&&(elLog=document.createElement("section"),elLog.setAttribute("id","alertify-logs"),elLog.className="alertify-logs alertify-logs-hidden",document.body.appendChild(elLog)),document.body.setAttribute("tabindex","0"),this.transition=getTransitionEvent()},log:function(message,type,wait){var check=function(){elLog&&null!==elLog.scrollTop||check()};return this.init(),check(),elLog.className="alertify-logs",this.notify(message,type,wait),this},notify:function(message,type,wait){var log=document.createElement("article");log.className="alertify-log"+("string"==typeof type&&""!==type?" alertify-log-"+type:""),log.innerHTML=message,elLog.appendChild(log),setTimeout(function(){log.className=log.className+" alertify-log-show"},50),this.close(log,wait)},set:function(args){var k;if("object"!=typeof args&&args instanceof Array)throw new Error("args must be an object");for(k in args)args.hasOwnProperty(k)&&(this[k]=args[k])},setFocus:function(){input?(input.focus(),input.select()):btnFocus.focus()},setup:function(fromQueue){var transitionDone,item=queue[0],self=this;isopen=!0,transitionDone=function(event){event.stopPropagation(),self.setFocus(),self.unbind(elDialog,self.transition.type,transitionDone)},this.transition.supported&&!fromQueue&&this.bind(elDialog,this.transition.type,transitionDone),elDialog.innerHTML=this.build(item),btnReset=$("alertify-resetFocus"),btnResetBack=$("alertify-resetFocusBack"),btnOK=$("alertify-ok")||undefined,btnCancel=$("alertify-cancel")||undefined,btnFocus="cancel"===_alertify.buttonFocus?btnCancel:"none"===_alertify.buttonFocus?$("alertify-noneFocus"):btnOK,input=$("alertify-text")||undefined,form=$("alertify-form")||undefined,"string"==typeof item.placeholder&&""!==item.placeholder&&(input.value=item.placeholder),fromQueue&&this.setFocus(),this.addListeners(item.callback)},unbind:function(el,event,fn){"function"==typeof el.removeEventListener?el.removeEventListener(event,fn,!1):el.detachEvent&&el.detachEvent("on"+event,fn)}},{alert:function(message,fn,cssClass){return _alertify.dialog(message,"alert",fn,"",cssClass),this},confirm:function(message,fn,cssClass){return _alertify.dialog(message,"confirm",fn,"",cssClass),this},extend:_alertify.extend,init:_alertify.init,log:function(message,type,wait){return _alertify.log(message,type,wait),this},prompt:function(message,fn,placeholder,cssClass){return _alertify.dialog(message,"prompt",fn,placeholder,cssClass),this},success:function(message,wait){return _alertify.log(message,"success",wait),this},error:function(message,wait){return _alertify.log(message,"error",wait),this},set:function(args){_alertify.set(args)},labels:_alertify.labels,debug:_alertify.handleErrors}},"function"==typeof define?define([],function(){return new Alertify}):"undefined"==typeof global.alertify&&(global.alertify=new Alertify)}(this);