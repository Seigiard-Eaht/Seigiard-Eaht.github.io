webpackJsonp([0],[,,function(t,e,i){"use strict";var n=i(1),o=i.n(n),s=i(8),r=i.n(s),a=i(83),l=i.n(a),h=i(82),u=i.n(h),p=i(84),c=i.n(p);o.a.use(r.a);var d=new r.a({mode:"hash",routes:[{path:"/",name:"login",component:l.a},{path:"/list",name:"list",component:u.a},{path:"/map",name:"map",component:c.a},{path:"*",component:l.a}]});e.a=d},function(t,e,i){"use strict";function n(){c.a.dispatch("setLoadingOn")}function o(t){return m(),Promise.resolve(t.data)}function s(t){return m(),Promise.reject(t)}function r(t){return null===t.body&&0===t.status&&alert("Please check connection to the internet."),Promise.reject(t)}function a(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=[];for(var n in t){var o=e?e+"["+n+"]":n,s=t[n];i.push("object"==("undefined"==typeof s?"undefined":f(s))?a(s,o):encodeURIComponent(o)+"="+encodeURIComponent(s))}return i.join("&").replace(/%20/g,"+")}var l=i(1),h=i.n(l),u=i(66),p=i.n(u),c=i(14),d=i(13),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m=p()(function(){c.a.dispatch("setLoadingOff")},500),v=function(t,e){return n(),h.a.http.get(d.a.baseUrl+"/login",{params:{email:t,password:e}}).then(o)["catch"](s)},g=function(t){return n(),h.a.http.get(d.a.baseUrl+"/observations",{params:{auth_token:t}}).then(o)["catch"](s)},w=function(t,e){return n(),h.a.http.get(d.a.baseUrl+"/observations/"+t,{params:{auth_token:e}}).then(o).then(function(i){return y(t,e).then(function(t){return i.map=t,i})})["catch"](s)},y=function(t,e){return n(),h.a.http.get(d.a.baseUrl+"/observations/"+t+"/map",{params:{auth_token:e}}).then(o)["catch"](s)},I=function(t,e){var i=a({shopper:t});return n(),h.a.http.post(d.a.baseUrl+"/observations/"+t.ob_id+"/shopper",i,{headers:{"Content-Type":"multipart/form-data"},params:{auth_token:e}}).then(o)["catch"](s)};e.a={login:v,observations:g,observation:w,catchInternetConnection:r,sendShopper:I}},function(t,e,i){t.exports=i.p+"static/media/location-20.57e4196d.png"},function(t,e,i){t.exports=i.p+"static/media/user.cecf8ee2.png"},function(t,e,i){var n,o;i(55),n=i(34);var s=i(90);o=n=n||{},"object"!=typeof n["default"]&&"function"!=typeof n["default"]||(o=n=n["default"]),"function"==typeof o&&(o=o.options),o.render=s.render,o.staticRenderFns=s.staticRenderFns,t.exports=n},,,,,,function(t,e,i){"use strict";function n(t,e,i,n){if(navigator.notification&&navigator.notification.alert)return navigator.notification.confirm.apply(null,arguments);var o=confirm(arguments[0]?arguments[0]:"");return o===!0&&"function"==typeof e?e.call(null,1):void 0}e.a=n},function(t,e,i){"use strict";var n=!1,o=n?"http://tracker.cloudcore.no":"http://race.cloudcore.no",s=o+"/api";e.a={baseUrl:s}},function(t,e,i){"use strict";var n=i(1),o=i.n(n),s=i(11),r=i.n(s),a=i(9),l=i.n(a);o.a.use(r.a);var h={is_online:!1,is_loading:!1,auth_token:!1,tracker_id:!1,observations:[],observation:!1,shoppers:[]},u={AUTH_TOKEN:function(t,e){t.auth_token=e},TRACKER_ID:function(t,e){t.tracker_id=e},SET_OBSERVATIONS:function(t,e){t.observations=e},SET_OBSERVATION:function(t,e){t.observation=e},SET_LOADING_ON:function(t){t.is_loading=!0},SET_LOADING_OFF:function(t){t.is_loading=!1},SET_STATUS_ONLINE:function(t){t.is_online=!0},SET_STATUS_OFFLINE:function(t){t.is_online=!1},SAVE_SHOPPER:function(t,e){t.shoppers.push(e)},REMOVE_FIRST_SHOPPER:function(t){t.shoppers=_.tail(t.shoppers)}},p={setAuth:function(t,e){var i=t.commit;i("AUTH_TOKEN",e.auth_token),i("TRACKER_ID",e.tracker_id)},clearAuthToken:function(t){var e=t.commit;e("AUTH_TOKEN",!1)},setObservations:function(t,e){var i=t.commit;i("SET_OBSERVATIONS",e)},setObservation:function(t,e){var i=t.commit;i("SET_OBSERVATION",e)},setLoadingOn:function(t){var e=t.commit;e("SET_LOADING_ON")},setLoadingOff:function(t){var e=t.commit;e("SET_LOADING_OFF")},setStatusOnline:function(t){var e=t.commit;e("SET_STATUS_ONLINE")},setStatusOffline:function(t){var e=t.commit;e("SET_STATUS_OFFLINE")},saveShopper:function(t,e){var i=t.commit;i("SAVE_SHOPPER",e)},removeFirstShopper:function(t){var e=t.commit;e("REMOVE_FIRST_SHOPPER")}},c=new r.a.Store({state:h,mutations:u,actions:p,plugins:[l()({key:"track-n-trace",paths:["auth_token","tracker_id","observations","observation","shoppers"]})]});e.a=c},function(t,e,i){t.exports=i.p+"static/media/arrowDwn.daf25e38.png"},function(t,e,i){t.exports=i.p+"static/media/arrowUp.e6460456.png"},function(t,e,i){t.exports=i.p+"static/media/callout34.395e23fb.png"},function(t,e,i){t.exports=i.p+"static/media/close10.0fcb3e44.png"},function(t,e,i){t.exports=i.p+"static/media/compass_arrow4.92c9cd42.png"},function(t,e,i){t.exports=i.p+"static/media/compass_n.f87b9433.png"},function(t,e){function i(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}t.exports=i},function(t,e,i){var n,o;n=i(35);var s=i(96);o=n=n||{},"object"!=typeof n["default"]&&"function"!=typeof n["default"]||(o=n=n["default"]),"function"==typeof o&&(o=o.options),o.render=s.render,o.staticRenderFns=s.staticRenderFns,t.exports=n},function(t,e,i){var n,o;i(51),n=i(36);var s=i(86);o=n=n||{},"object"!=typeof n["default"]&&"function"!=typeof n["default"]||(o=n=n["default"]),"function"==typeof o&&(o=o.options),o.render=s.render,o.staticRenderFns=s.staticRenderFns,t.exports=n},,function(t,e,i){"use strict";var n=i(1),o=i.n(n),s=i(10),r=(i.n(s),i(101)),a=i.n(r),l=i(72),h=i.n(l),u=i(2),p=i(14);i.d(e,"a",function(){return d});var c=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t};i.i(s.sync)(p.a,u.a),o.a.use(a.a);var d=new o.a(c({router:u.a,store:p.a},h.a))},,function(t,e,i){function n(t){return i(o(t))}function o(t){var e=s[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var s={"./markers/location-20.png":4,"./markers/user.png":5,"./resources/arrowDwn.png":15,"./resources/arrowUp.png":16,"./resources/callout34.png":17,"./resources/close10.png":18,"./resources/compass_arrow4.png":19,"./resources/compass_n.png":20};n.keys=function(){return Object.keys(s)},n.resolve=o,t.exports=n,n.id=27},function(t,e,i){function n(t){return i(o(t))}function o(t){var e=s[t];if(!(e+1))throw new Error("Cannot find module '"+t+"'.");return e}var s={"./location-20.png":4,"./user.png":5};n.keys=function(){return Object.keys(s)},n.resolve=o,t.exports=n,n.id=28},function(t,e){var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};(function(){var t,e,n,o,s,r,a;o=function(t,e){var i,n,o,s;o=[];for(n in e.prototype)try{s=e.prototype[n],null==t[n]&&"function"!=typeof s?o.push(t[n]=s):o.push(void 0)}catch(r){i=r}return o},t={},t.options=window.Offline?window.Offline.options||{}:{},n={checks:{xhr:{url:function(){return"/favicon.ico?_="+(new Date).getTime()},timeout:5e3,type:"HEAD"},image:{url:function(){return"/favicon.ico?_="+(new Date).getTime()}},active:"xhr"},checkOnLoad:!1,interceptRequests:!0,reconnect:!0,deDupBody:!1},s=function(t,e){var n,o,s,r,a,l;for(n=t,l=e.split("."),o=s=0,r=l.length;r>s&&(a=l[o],n=n[a],"object"==("undefined"==typeof n?"undefined":i(n)));o=++s);return o===l.length-1?n:void 0},t.getOption=function(e){var i,o;return o=null!=(i=s(t.options,e))?i:s(n,e),"function"==typeof o?o():o},"function"==typeof window.addEventListener&&window.addEventListener("online",function(){return setTimeout(t.confirmUp,100)},!1),"function"==typeof window.addEventListener&&window.addEventListener("offline",function(){return t.confirmDown()},!1),t.state="up",t.markUp=function(){return t.trigger("confirmed-up"),"up"!==t.state?(t.state="up",t.trigger("up")):void 0},t.markDown=function(){return t.trigger("confirmed-down"),"down"!==t.state?(t.state="down",t.trigger("down")):void 0},r={},t.on=function(e,i,n){var o,s,a,l,h;if(s=e.split(" "),s.length>1){for(h=[],a=0,l=s.length;l>a;a++)o=s[a],h.push(t.on(o,i,n));return h}return null==r[e]&&(r[e]=[]),r[e].push([n,i])},t.off=function(t,e){var i,n,o,s,a;if(null!=r[t]){if(e){for(o=0,a=[];o<r[t].length;)s=r[t][o],n=s[0],i=s[1],i===e?a.push(r[t].splice(o,1)):a.push(o++);return a}return r[t]=[]}},t.trigger=function(t){var e,i,n,o,s,a,l;if(null!=r[t]){for(s=r[t].slice(0),l=[],n=0,o=s.length;o>n;n++)a=s[n],e=a[0],i=a[1],l.push(i.call(e));return l}},e=function(t,e,i){var n,o,s,r,a;return a=function(){return t.status&&t.status<12e3?e():i()},null===t.onprogress?(n=t.onerror,t.onerror=function(){return i(),"function"==typeof n?n.apply(null,arguments):void 0},r=t.ontimeout,t.ontimeout=function(){return i(),"function"==typeof r?r.apply(null,arguments):void 0},o=t.onload,t.onload=function(){return a(),"function"==typeof o?o.apply(null,arguments):void 0}):(s=t.onreadystatechange,t.onreadystatechange=function(){return 4===t.readyState?a():0===t.readyState&&i(),"function"==typeof s?s.apply(null,arguments):void 0})},t.checks={},t.checks.xhr=function(){var i,n;n=new XMLHttpRequest,n.offline=!1,n.open(t.getOption("checks.xhr.type"),t.getOption("checks.xhr.url"),!0),null!=n.timeout&&(n.timeout=t.getOption("checks.xhr.timeout")),e(n,t.markUp,t.markDown);try{n.send()}catch(o){i=o,t.markDown()}return n},t.checks.image=function(){var e;e=document.createElement("img"),e.onerror=t.markDown,e.onload=t.markUp,e.src=t.getOption("checks.image.url")},t.checks.down=t.markDown,t.checks.up=t.markUp,t.check=function(){return t.trigger("checking"),t.checks[t.getOption("checks.active")]()},t.confirmUp=t.confirmDown=t.check,t.onXHR=function(t){var e,i,n;return n=function(e,i){var n;return n=e.open,e.open=function(o,s,r,a,l){return t({type:o,url:s,async:r,flags:i,user:a,password:l,xhr:e}),n.apply(e,arguments)}},i=window.XMLHttpRequest,window.XMLHttpRequest=function(t){var e,o,s;return s=new i(t),n(s,t),o=s.setRequestHeader,s.headers={},s.setRequestHeader=function(t,e){return s.headers[t]=e,o.call(s,t,e)},e=s.overrideMimeType,s.overrideMimeType=function(t){return s.mimeType=t,e.call(s,t)},s},o(window.XMLHttpRequest,i),null!=window.XDomainRequest?(e=window.XDomainRequest,window.XDomainRequest=function(){var t;return t=new e,n(t),t},o(window.XDomainRequest,e)):void 0},a=function(){return t.getOption("interceptRequests")&&t.onXHR(function(i){var n;return n=i.xhr,n.offline!==!1?e(n,t.markUp,t.confirmDown):void 0}),t.getOption("checkOnLoad")?t.check():void 0},setTimeout(a,0),window.Offline=t}).call(this),function(){var t,e,i,n,o,s,r,a,l;if(!window.Offline)throw new Error("Offline Reconnect brought in without offline.js");n=Offline.reconnect={},s=null,o=function(){var t;return null!=n.state&&"inactive"!==n.state&&Offline.trigger("reconnect:stopped"),n.state="inactive",n.remaining=n.delay=null!=(t=Offline.getOption("reconnect.initialDelay"))?t:3},e=function(){var t,e;return t=null!=(e=Offline.getOption("reconnect.delay"))?e:Math.min(Math.ceil(1.5*n.delay),3600),n.remaining=n.delay=t},r=function(){return"connecting"!==n.state?(n.remaining-=1,Offline.trigger("reconnect:tick"),0===n.remaining?a():void 0):void 0},a=function(){return"waiting"===n.state?(Offline.trigger("reconnect:connecting"),n.state="connecting",Offline.check()):void 0},t=function(){return Offline.getOption("reconnect")?(o(),n.state="waiting",Offline.trigger("reconnect:started"),s=setInterval(r,1e3)):void 0},l=function(){return null!=s&&clearInterval(s),o()},i=function(){return Offline.getOption("reconnect")&&"connecting"===n.state?(Offline.trigger("reconnect:failure"),n.state="waiting",e()):void 0},n.tryNow=a,o(),Offline.on("down",t),Offline.on("confirmed-down",i),Offline.on("up",l)}.call(this),function(){var t,e,i,n,o,s;if(!window.Offline)throw new Error("Requests module brought in without offline.js");i=[],s=!1,n=function(t){return Offline.getOption("requests")!==!1?(Offline.trigger("requests:capture"),"down"!==Offline.state&&(s=!0),i.push(t)):void 0},o=function(t){var e,i,n,o,s,r,a,l,h;if(h=t.xhr,r=t.url,s=t.type,a=t.user,n=t.password,e=t.body,Offline.getOption("requests")!==!1){h.abort(),h.open(s,r,!0,a,n),o=h.headers;for(i in o)l=o[i],h.setRequestHeader(i,l);return h.mimeType&&h.overrideMimeType(h.mimeType),h.send(e)}},t=function(){return i=[]},e=function(){var e,n,s,r,a,l,h;if(Offline.getOption("requests")!==!1){for(Offline.trigger("requests:flush"),l={},n=0,r=i.length;r>n;n++)a=i[n],h=a.url.replace(/(\?|&)_=[0-9]+/,function(t,e){return"?"===e?e:""}),Offline.getOption("deDupBody")?(e=a.body,e="[object Object]"===e.toString()?JSON.stringify(e):e.toString(),l[a.type.toUpperCase()+" - "+h+" - "+e]=a):l[a.type.toUpperCase()+" - "+h]=a;for(s in l)a=l[s],o(a);return t()}},setTimeout(function(){return Offline.getOption("requests")!==!1?(Offline.on("confirmed-up",function(){return s?(s=!1,t()):void 0}),Offline.on("up",e),Offline.on("down",function(){return s=!1}),Offline.onXHR(function(t){var e,i,o,s,r;return r=t.xhr,o=t.async,r.offline!==!1&&(s=function(){return n(t)},i=r.send,r.send=function(e){return t.body=e,i.apply(r,arguments)},o)?null===r.onprogress?(r.addEventListener("error",s,!1),r.addEventListener("timeout",s,!1)):(e=r.onreadystatechange,r.onreadystatechange=function(){return 0===r.readyState?s():4===r.readyState&&(0===r.status||r.status>=12e3)&&s(),"function"==typeof e?e.apply(null,arguments):void 0}):void 0}),Offline.requests={flush:e,clear:t}):void 0},0)}.call(this),function(){var t,e,i,n,o,s,r;if(!Offline)throw new Error("Offline simulate brought in without offline.js");for(o=["up","down"],i=0,n=o.length;n>i;i++){r=o[i];try{s=document.querySelector("script[data-simulate='"+r+"']")||("undefined"!=typeof localStorage&&null!==localStorage?localStorage.OFFLINE_SIMULATE:void 0)===r}catch(a){e=a,s=!1}}s&&(null==Offline.options&&(Offline.options={}),null==(t=Offline.options).checks&&(t.checks={}),Offline.options.checks.active=r)}.call(this),function(){var t,e,i,n,o,s,r,a,l;if(!window.Offline)throw new Error("Offline UI brought in without offline.js");e='<div class="offline-ui"><div class="offline-ui-content"></div></div>',t='<a href class="offline-ui-retry"></a>',o=function(t){var e;return e=document.createElement("div"),e.innerHTML=t,e.children[0]},s=n=null,l=function(t){var e,i,n,o;n={day:86400,hour:3600,minute:60,second:1};for(i in n)if(e=n[i],t>=e)return o=Math.floor(t/e),[o,i];return["now",""]},a=function(){var i,r;return s=o(e),document.body.appendChild(s),null!=Offline.reconnect&&Offline.getOption("reconnect")&&(s.appendChild(o(t)),i=s.querySelector(".offline-ui-retry"),r=function(t){return t.preventDefault(),Offline.reconnect.tryNow()},null!=i.addEventListener?i.addEventListener("click",r,!1):i.attachEvent("click",r)),n=s.querySelector(".offline-ui-content")},r=function(){return a(),Offline.on("up",function(){}),Offline.on("down",function(){}),Offline.on("reconnect:connecting",function(){}),Offline.on("reconnect:tick",function(){var t,e,i;return t=l(Offline.reconnect.remaining),e=t[0],i=t[1],n.setAttribute("data-retry-in-value",e),n.setAttribute("data-retry-in-unit",i)}),Offline.on("reconnect:stopped",function(){return n.setAttribute("data-retry-in-value",null),n.setAttribute("data-retry-in-unit",null)}),Offline.on("reconnect:failure",function(){}),Offline.on("reconnect:success",function(){})},"complete"===document.readyState?r():null!=document.addEventListener?document.addEventListener("DOMContentLoaded",r,!1):(i=document.onreadystatechange,document.onreadystatechange=function(){return"complete"===document.readyState&&r(),"function"==typeof i?i.apply(null,arguments):void 0})}.call(this)},function(t,e,i){"use strict";function n(t,e){return t&&e?(this.trackerId=t,this.observationId=e,this.shopper={},void this.initShopper()):void alert("Shit Happened!")}var o=i(0),s=i.n(o),r=i(12);n.prototype.initShopper=function(){this.shopper={id:(new Date).getTime(),tr_id:this.trackerId,ob_id:this.observationId,status:0,q_a:[],tr_logs:[]}},n.prototype.getShopper=function(){return s.a.cloneDeep(this.shopper)},n.prototype.setQuestionAnswers=function(t){this.shopper.q_a=t},n.prototype.addTrackerLog=function(t,e){var i=parseInt((new Date).getTime()/1e3);this.shopper.tr_logs.push({s_ts:i,e_ts:i,x:t,y:e,a_logs:[]})},n.prototype.addActivityLog=function(t,e){var i=s.a.last(this.shopper.tr_logs);i&&i.a_logs.push({a_id:t,sh_id:e})},n.prototype.removeLastEntry=function(){this.shopper.tr_logs=s.a.initial(this.shopper.tr_logs)},n.prototype.removeLastTrackerLog=function(){var t=this;if(this.shopper.tr_logs.length<=1)return!1;var e=s.a.last(this.shopper.tr_logs);return e.a_logs.length>0?i.i(r.a)("Undo last step and related activities?",function(e){return 1===e&&(t.removeLastEntry(),!0)},"Undo last step"):(this.removeLastEntry(),!0)},n.prototype.getTrackerRoutes=function(t){return("undefined"==typeof t||t<2)&&(t=2),!(this.shopper.tr_logs.length<1)&&s.a.chain(this.shopper.tr_logs).takeRight(t).map(function(t){return s.a.pick(t,["x","y"])}).reverse().value()},n.prototype.getTrackerMarkers=function(t){return("undefined"==typeof t||t<2)&&(t=2),!(this.shopper.tr_logs.length<1)&&s.a.chain(this.shopper.tr_logs).take().union(s.a.takeRight(this.shopper.tr_logs,t-1)).map(function(t){return s.a.pick(t,["x","y"])}).value()},e.a=n},function(t,e,i){"use strict";function n(t){return i(28)("./"+t)}i.d(e,"a",function(){return o});var o={id:0,mt:"General",ic:{"Fire Pull":{w:50,g:[],h:50},"Disabled Access":{w:50,g:[{shp:[[0,49.998,37.999],[3,49.998,44.626,44.631,50.003,38.006,50.003],[1,11.998,50.003],[3,5.373,50.003,-.002,44.626,-.002,37.999],[1,-.002,12.007],[3,-.002,5.356,5.375,-.009,11.998,-.009],[1,38.006,-.009],[3,44.633,-.009,49.998,5.356,49.998,12.007],[1,49.998,37.999],[4]],t:"Icon Background"},{shp:[[0,39.974,36.967],[1,34.129,40.233],[1,27.864,29.233],[1,17.122,29.233],[1,17.122,29.058],[1,17.122,26.159],[1,17.122,14.551],[3,16.137,13.879,15.495,12.748,15.495,11.476],[3,15.495,9.432,17.16,7.764,19.207,7.764],[3,21.255,7.764,22.918,9.431,22.918,11.476],[3,22.918,13.169,21.793,14.586,20.255,15.044],[1,20.255,20.299],[1,30.989,20.299],[1,30.989,23.198],[1,20.255,23.198],[1,20.255,26.159],[1,29.762,26.159],[1,35.529,36.267],[1,38.756,34.473],[1,39.974,36.967],[4],[0,21.217,39.221],[3,16.717,39.221,13.068,35.545,13.068,31.004],[3,13.068,28.643,14.052,26.526,15.622,25.022],[1,15.622,21.256],[3,12.278,23.19,10.028,26.833,10.028,31.006],[3,10.028,37.202,15.013,42.231,21.162,42.231],[3,25.155,42.231,28.662,40.102,30.624,36.916],[1,28.757,34.126],[3,27.544,37.116,24.622,39.221,21.217,39.221],[4]],t:"Icon Foreground"}],h:50},Telephone:{w:50,g:[{shp:[[0,49.999,37.996],[3,49.999,44.621,44.627,49.997,38.003,49.997],[1,11.999,49.997],[3,5.375,49.997,-.001,44.62,-.001,37.996],[1,-.001,12.012],[3,-.001,5.363,5.375,-.005,11.999,-.005],[1,38.003,-.005],[3,44.627,-.005,49.999,5.364,49.999,12.012],[1,49.999,37.996],[4]],t:"Icon Background"},{shp:[[0,15.399,15.504],[3,13.835,15.504,13.479,17.38,13.279,19.292],[3,12.987,22.028,13.047,24.768,13.279,26.996],[3,13.619,30.348,13.915,31.972,15.411,31.972],[1,15.411,42.677],[3,13.595,42.709,6.679,39.3,6.875,23.096],[3,7.071,7.72,13.595,4.736,15.391,4.54],[1,15.399,15.504],[4],[0,19.259,42.692],[3,19.951,42.692,20.451,42.128,20.451,41.496],[1,20.455,41.496],[1,20.451,33.152],[3,20.451,32.488,19.907,31.964,19.259,31.964],[1,16.227,31.964],[1,16.227,42.692],[1,19.255,42.7],[1,19.259,42.692],[4],[0,19.259,15.504],[3,19.951,15.504,20.451,14.94,20.451,14.316],[1,20.455,14.308],[3,20.455,14.308,20.451,5.728,20.451,5.724],[3,20.451,5.06,19.907,4.544,19.259,4.544],[1,16.227,4.544],[1,16.227,15.504],[1,19.255,15.512],[1,19.259,15.504],[4],[0,43.131,42.701],[3,43.131,42.701,41.531,24.504,41.531,23.872],[3,41.535,21.288,39.959,20.428,38.915,20.428],[1,27.255,20.428],[3,26.211,20.428,24.955,21.356,24.735,23.872],[3,24.679,24.504,23.039,42.701,23.039,42.701],[1,43.131,42.701],[4],[0,39.203,11.792],[3,39.195,7.996,36.215,4.924,32.543,4.94],[3,28.875,4.956,25.915,8.04,25.923,11.84],[3,25.935,15.636,28.915,18.692,32.583,18.684],[3,36.243,18.676,39.219,15.58,39.203,11.792]],t:"Icon Foreground"}],h:50},"Moving Walkway":{w:50,g:[],h:50},"Vending Machine":{w:50,g:[{shp:[[0,49.998,37.997],[3,49.998,44.621,44.628,49.997,38.004,49.997],[1,12,49.997],[3,5.375,49.997,-.002,44.622,-.002,37.997],[1,-.002,12.01],[3,-.002,5.363,5.372,-.004,12,-.004],[1,38.004,-.004],[3,44.626,-.004,49.998,5.363,49.998,12.01],[1,49.998,37.997],[4]],t:"Icon Background"},{shp:[[0,12.928,5.295],[1,12.928,44.696],[1,37.07,44.696],[1,37.07,5.295],[1,12.928,5.295],[4],[0,24.925,41.312],[1,15.275,41.312],[1,15.275,38.169],[1,24.925,38.169],[1,24.925,41.312],[4],[0,30.27,35.651],[1,14.617,35.651],[1,14.617,6.71],[1,30.27,6.71],[1,30.27,35.651],[4],[0,35.408,32.095],[1,31.692,32.095],[1,31.692,28.433],[1,35.408,28.433],[1,35.408,32.095],[4],[0,35.408,26.652],[1,31.692,26.652],[1,31.692,22.997],[1,35.408,22.997],[1,35.408,26.652],[4],[0,35.408,21.399],[1,31.692,21.399],[1,31.692,17.744],[1,35.408,17.744],[1,35.408,21.399],[4],[0,35.408,15.964],[1,31.692,15.964],[1,31.692,12.308],[1,35.408,12.308],[1,35.408,15.964],[4],[0,35.408,10.523],[1,31.692,10.523],[1,31.692,6.867],[1,35.408,6.867],[1,35.408,10.523],[4]],t:"Icon Foreground"}],h:50},"Bathroom M":{w:50,g:[{shp:[[0,50,38.008],[3,50,44.638,44.627,50.013,38.001,50.013],[1,12,50.013],[3,5.374,50.013,-0,44.638,-0,38.008],[1,-0,12],[3,-0,5.354,5.374,-.02,12,-.02],[1,38.001,-.02],[3,44.627,-.02,50,5.354,50,12],[1,50,38.008],[4]],t:"Icon Background"},{shp:[[0,19.53,26.363],[3,19.53,26.363,19.453,28.006,17.888,28.006],[3,16.246,28.006,16.246,26.363,16.246,26.363],[3,16.246,26.363,16.246,19.743,16.246,15.047],[3,16.246,10.353,20.583,10.626,20.583,10.626],[3,20.583,10.626,25.068,10.626,29.765,10.626],[3,34.462,10.626,33.866,14.73,33.866,14.73],[1,33.866,26.404],[3,33.866,26.404,33.866,28.063,32.208,28.063],[3,30.551,28.063,30.551,26.404,30.551,26.404],[1,30.551,16.591],[1,29.892,16.591],[1,29.892,44.515],[3,29.892,44.515,29.892,46.713,27.695,46.713],[3,25.44,46.713,25.498,44.515,25.498,44.515],[1,25.498,28.428],[1,24.61,28.428],[1,24.604,44.514],[3,24.604,44.514,24.604,46.686,22.433,46.686],[3,20.262,46.686,20.262,44.514,20.262,44.514],[1,20.262,16.532],[1,19.481,16.532],[1,19.53,26.363],[4],[0,25.069,9.896],[3,29.013,9.896,28.89,6.08,28.89,6.08],[3,28.89,2.254,25.068,2.246,25.068,2.246],[3,21.198,2.246,21.24,6.08,21.24,6.08],[3,21.24,6.553,21.125,9.896,25.069,9.896],[4]],t:"Icon Foreground"}],h:50},Taxi:{w:50,g:[{shp:[[0,49.999,37.997],[3,49.999,44.623,44.625,49.997,38.004,49.997],[1,11.999,49.997],[3,5.372,49.997,-.001,44.618,-.001,37.997],[1,-.001,12.009],[3,-.001,5.365,5.378,-.003,11.999,-.003],[1,38.004,-.003],[3,44.631,-.003,49.999,5.365,49.999,12.009],[1,49.999,37.997],[4]],t:"Icon Background"},{shp:[[0,15.463,42.549],[3,15.463,43.589,14.618,44.423,13.589,44.423],[1,11.869,44.423],[3,10.828,44.423,9.995,43.583,9.995,42.549],[1,9.995,39.735],[3,9.995,38.694,10.834,37.849,11.869,37.849],[1,13.589,37.849],[3,14.624,37.849,15.463,38.694,15.463,39.735],[1,15.463,42.549],[4],[0,39.902,39.421],[3,39.902,38.381,39.062,37.547,38.028,37.547],[1,36.301,37.547],[3,35.267,37.547,34.427,38.381,34.427,39.421],[1,34.427,42.235],[3,34.427,43.276,35.273,44.109,36.301,44.109],[1,38.028,44.109],[3,39.062,44.109,39.902,43.276,39.902,42.235],[1,39.902,39.421],[4],[0,43.602,35.821],[1,45.163,27.917],[1,39.328,14.782],[3,39.222,13.322,36.615,12.902,36.615,12.902],[1,13.471,12.902],[3,12.011,13.014,10.657,14.681,10.657,14.681],[1,4.816,27.917],[1,6.07,35.839],[1,43.602,35.821],[4],[0,15.977,28.461],[3,15.977,30.264,14.523,31.719,12.726,31.719],[3,10.923,31.719,9.469,30.264,9.469,28.461],[3,9.469,26.664,10.923,25.204,12.726,25.204],[3,14.523,25.204,15.977,26.664,15.977,28.461],[4],[0,40.428,28.361],[3,40.428,30.158,38.968,31.618,37.17,31.618],[3,35.373,31.618,33.919,30.158,33.919,28.361],[3,33.919,26.564,35.379,25.103,37.17,25.103],[3,38.968,25.103,40.428,26.564,40.428,28.361],[4],[0,9.469,22.703],[1,12.903,15.509],[1,36.881,15.509],[1,40.428,22.656],[1,9.469,22.703],[4],[0,18.584,6.175],[1,16.911,6.175],[1,16.911,5.572],[1,20.985,5.572],[1,20.985,6.175],[1,19.3,6.175],[1,19.3,11.075],[1,18.579,11.075],[1,18.579,6.175],[4],[0,21.877,9.343],[1,21.31,11.069],[1,20.571,11.069],[1,22.451,5.566],[1,23.302,5.566],[1,25.182,11.069],[1,24.425,11.069],[1,23.834,9.343],[1,21.877,9.343],[4],[0,23.692,8.782],[1,23.148,7.203],[3,23.024,6.843,22.941,6.512,22.858,6.192],[1,22.847,6.192],[3,22.758,6.512,22.681,6.86,22.569,7.191],[1,22.031,8.776],[1,23.692,8.776],[4],[0,28.888,11.069],[1,28.179,9.846],[3,27.895,9.385,27.718,9.083,27.546,8.77],[1,27.535,8.77],[3,27.375,9.083,27.209,9.379,26.932,9.863],[1,26.27,11.069],[1,25.454,11.069],[1,27.139,8.285],[1,25.519,5.566],[1,26.346,5.566],[1,27.079,6.854],[3,27.286,7.215,27.434,7.487,27.588,7.783],[1,27.611,7.783],[3,27.765,7.457,27.901,7.203,28.102,6.854],[1,28.847,5.566],[1,29.669,5.566],[1,28.002,8.238],[1,29.716,11.069],[1,28.888,11.069],[4],[0,31.247,5.572],[1,31.247,11.075],[1,30.526,11.075],[1,30.526,5.572],[1,31.247,5.572],[4]],t:"Icon Foreground"}],h:50},"Valet Parking":{w:50,g:[{shp:[[0,49.999,37.996],[3,49.999,44.62,44.627,49.996,38.003,49.996],[1,11.999,49.996],[3,5.375,49.996,-.001,44.62,-.001,37.996],[1,-.001,12.012],[3,-.001,5.364,5.375,-.004,11.999,-.004],[1,38.003,-.004],[3,44.627,-.004,49.999,5.364,49.999,12.012],[1,49.999,37.996],[4]],t:"Icon Background"},{shp:[[0,44.775,15.94],[1,43.267,15.348],[1,43.267,14.684],[3,43.735,14.268,44.031,13.66,44.031,12.98],[3,44.031,11.724,43.015,10.7,41.767,10.7],[3,40.519,10.7,39.503,11.724,39.503,12.98],[3,39.503,14.208,40.479,15.208,41.687,15.252],[1,41.687,15.344],[3,41.687,15.344,41.575,15.936,41.099,15.936],[1,40.915,15.936],[3,39.911,15.936,39.499,16.684,39.499,16.684],[1,36.911,21.428],[3,36.911,21.428,33.795,21.428,32.571,21.428],[3,31.343,21.428,31.331,21.62,31.331,22.676],[3,31.331,23.74,32.331,23.692,32.331,23.692],[1,37.923,23.692],[1,38.943,22.664],[3,38.943,22.664,38.943,37.08,38.943,37.732],[3,38.943,38.388,39.071,39.288,40.487,39.288],[3,41.903,39.288,41.995,37.772,41.995,37.772],[1,41.995,26.6],[1,42.871,26.6],[1,42.871,37.772],[3,42.871,37.772,42.755,39.288,44.379,39.288],[3,46.003,39.288,46.051,37.608,46.051,37.608],[1,46.099,16.716],[3,46.095,16.272,44.775,15.94,44.775,15.94],[4],[0,29.523,23.664],[3,29.459,23.664,29.403,23.672,29.343,23.672],[1,26.763,16.788],[1,26.599,16.788],[3,26.599,16.196,26.007,15.7,25.203,15.552],[1,25.183,15.552],[3,25.043,15.528,24.895,15.512,24.739,15.512],[3,24.591,15.512,24.443,15.528,24.303,15.552],[1,11.543,15.552],[3,11.403,15.528,11.255,15.512,11.103,15.512],[3,10.947,15.512,10.803,15.528,10.663,15.552],[3,9.851,15.684,9.247,16.188,9.247,16.788],[1,6.475,23.672],[3,6.451,23.672,6.423,23.664,6.395,23.664],[3,5.019,23.664,3.911,24.748,3.911,26.08],[3,3.911,26.228,3.919,26.368,3.951,26.504],[1,3.951,34.26],[1,6.211,34.26],[1,6.211,37.184],[3,6.211,38.216,7.135,39.052,8.279,39.052],[3,9.423,39.052,10.343,38.216,10.343,37.184],[1,10.343,34.26],[1,25.571,34.26],[1,25.571,37.184],[3,25.571,38.216,26.495,39.052,27.639,39.052],[3,28.783,39.052,29.707,38.216,29.707,37.184],[1,29.707,34.26],[1,31.999,34.26],[1,31.999,26.42],[3,32.015,26.312,32.027,26.192,32.027,26.076],[3,32.015,24.752,30.899,23.664,29.523,23.664],[4],[0,8.295,29.78],[3,7.179,29.78,6.263,28.868,6.263,27.748],[3,6.263,26.628,7.179,25.712,8.295,25.712],[3,9.419,25.712,10.335,26.628,10.335,27.748],[3,10.335,28.868,9.423,29.78,8.295,29.78],[4],[0,23.331,22.464],[1,23.331,21.924],[3,24.163,21.716,24.779,20.964,24.779,20.072],[3,24.779,19.016,23.927,18.164,22.875,18.164],[3,21.823,18.164,20.967,19.016,20.967,20.072],[3,20.967,20.892,21.487,21.588,22.215,21.86],[1,22.215,22.432],[3,21.115,22.556,20.583,23.032,20.323,23.456],[1,8.759,23.456],[1,10.639,18.448],[3,10.863,17.808,11.783,17.612,11.783,17.612],[1,24.051,17.612],[3,24.839,17.612,25.139,18.372,25.139,18.372],[1,27.099,23.456],[1,25.399,23.456],[3,24.967,22.816,23.959,22.56,23.331,22.464],[4],[0,27.507,29.78],[3,26.383,29.78,25.475,28.868,25.475,27.748],[3,25.475,26.628,26.383,25.712,27.507,25.712],[3,28.627,25.712,29.535,26.628,29.535,27.748],[3,29.535,28.868,28.627,29.78,27.507,29.78],[4]],t:"Icon Foreground"}],h:50},Medical:{w:50,g:[{shp:[[0,49.999,37.996],[3,49.999,44.621,44.627,49.997,38.003,49.997],[1,11.999,49.997],[3,5.375,49.997,-.001,44.621,-.001,37.996],[1,-.001,12.012],[3,-.001,5.363,5.375,-.005,11.999,-.005],[1,38.003,-.005],[3,44.627,-.005,49.999,5.363,49.999,12.012],[1,49.999,37.996],[4]],t:"Icon Background"},{shp:[[0,40.999,20.604],[1,29.459,20.604],[1,29.459,8.996],[1,20.671,8.996],[1,20.671,20.604],[1,8.999,20.604],[1,8.999,29.384],[1,20.671,29.384],[1,20.671,40.996],[1,29.459,40.996],[1,29.459,29.384],[1,40.999,29.384],[4]],t:"Icon Foreground"}],h:50},"Eye Wash":{w:50,g:[],h:50},"Emergency Exit":{w:50,g:[{shp:[[0,49.998,37.996],[3,49.998,44.62,44.63,49.996,38.006,49.996],[1,11.998,49.996],[3,5.374,49.996,-.002,44.62,-.002,37.996],[1,-.002,12.01],[3,-.002,5.362,5.374,-.002,11.998,-.002],[1,38.006,-.002],[3,44.63,-.002,49.998,5.362,49.998,12.01],[1,49.998,37.996],[4]],t:"Icon Background"},{shp:[[0,33.146,37.292],[1,33.146,32.571],[1,35.374,32.571],[3,34.966,29.939,33.146,29.775,33.146,29.775],[1,33.146,29.775],[1,33.146,7.47],[1,11.614,7.47],[1,11.614,37.82],[1,16.326,42.536],[1,16.59,42.536],[1,38.386,42.536],[1,33.146,37.292],[4],[0,31.874,8.746],[1,31.874,29.775],[1,27.522,29.775],[1,26.866,23.011],[1,24.782,17.879],[1,27.578,17.879],[1,29.454,21.383],[3,29.798,21.731,30.19,21.863,30.898,21.567],[3,31.606,21.271,31.39,20.163,31.39,20.163],[1,29.562,16.687],[3,28.554,14.887,27.094,15.011,27.094,15.011],[1,24.514,15.011],[3,18.302,15.011,17.786,16.799,17.786,16.799],[1,15.662,19.607],[1,12.89,19.607],[1,12.89,8.746],[1,31.874,8.746],[4],[0,12.89,37.292],[1,12.89,22.843],[3,17.022,22.839,17.366,21.991,17.366,21.991],[1,19.146,19.267],[1,21.194,24.031],[1,15.154,36.964],[1,17.702,36.908],[3,18.758,36.908,19.178,35.912,19.178,35.912],[1,24.258,25.647],[1,24.602,29.611],[3,24.774,32.695,25.954,32.567,25.954,32.567],[1,31.874,32.567],[1,31.874,37.816],[1,35.31,41.256],[1,23.106,41.256],[1,20.49,38.636],[3,20.49,38.636,19.686,37.736,18.638,37.736],[1,15.718,37.748],[1,19.218,41.256],[1,16.858,41.256],[1,12.89,37.292],[4],[0,16.71,12.278],[3,16.71,10.822,17.89,9.642,19.342,9.642],[3,20.802,9.642,21.982,10.822,21.982,12.278],[3,21.982,13.735,20.802,14.915,19.342,14.915],[3,17.89,14.915,16.71,13.734,16.71,12.278],[4]],t:"Icon Foreground"}],h:50},"Pet Relief Area":{w:50,g:[{shp:[[0,49.999,37.996],[3,49.999,44.62,44.627,49.997,38.002,49.997],[1,12,49.997],[3,5.374,49.997,-.001,44.621,-.001,37.996],[1,-.001,12.013],[3,-.001,5.364,5.374,-.005,12,-.005],[1,38.002,-.005],[3,44.626,-.005,49.999,5.364,49.999,12.013],[1,49.999,37.996],[4]],t:"Icon Background"},{shp:[[0,14.798,17.431],[3,12.216,14.489,8.754,13.312,7.059,14.794],[3,5.365,16.287,6.083,19.873,8.659,22.816],[3,11.241,25.755,14.701,26.937,16.399,25.449],[3,18.093,23.961,17.375,20.373,14.798,17.431],[4],[0,21.707,21.212],[3,23.872,20.583,24.743,17.029,23.654,13.272],[3,22.565,9.515,19.92,6.976,17.757,7.609],[3,15.593,8.237,14.721,11.793,15.812,15.55],[3,16.903,19.302,19.541,21.841,21.707,21.212],[4],[0,42.953,14.794],[3,41.283,13.312,37.87,14.488,35.325,17.431],[3,32.78,20.373,32.076,23.963,33.746,25.451],[3,35.417,26.939,38.833,25.756,41.378,22.815],[3,43.92,19.871,44.625,16.287,42.953,14.794],[4],[0,28.512,21.212],[3,30.647,21.841,33.251,19.304,34.323,15.55],[3,35.4,11.792,34.542,8.236,32.407,7.609],[3,30.272,6.98,27.671,9.517,26.594,13.272],[3,25.516,17.029,26.378,20.582,28.512,21.212],[4],[0,25.426,21.787],[3,25.426,21.787,25.37,21.803,25.269,21.832],[3,25.168,21.8,25.11,21.787,25.11,21.787],[3,11.853,25.523,15.901,42.391,15.901,42.391],[3,15.847,42.877,22.341,41.305,23.468,40.736],[3,24.126,40.403,24.725,40.171,25.269,40.013],[3,25.808,40.171,26.398,40.403,27.047,40.736],[3,28.164,41.305,34.588,42.877,34.533,42.391],[3,34.536,42.39,38.542,25.521,25.426,21.787],[4]],t:"Icon Foreground"}],h:50},"Police/Security":{w:50,g:[],h:50
},Bus:{w:50,g:[{shp:[[0,50,38.001],[3,50,44.625,44.624,49.997,38,49.997],[1,12,49.997],[3,5.372,49.997,-0,44.625,-0,38.001],[1,-0,12.007],[3,-0,5.367,5.372,-.005,12,-.005],[1,38,-.005],[3,44.624,-.005,50,5.367,50,12.007],[1,50,38.001],[4]],t:"Icon Background"},{shp:[[0,40.632,35.868],[3,40.632,37.537,39.18,38.889,37.388,38.889],[1,12.6,38.889],[3,10.812,38.889,9.36,37.537,9.36,35.868],[1,9.36,8.627],[3,9.36,6.963,10.808,5.611,12.6,5.611],[1,37.388,5.611],[3,39.176,5.611,40.632,6.963,40.632,8.627],[1,40.632,35.868],[1,40.632,35.868],[4],[0,17.136,41.929],[3,17.136,42.913,16.34,43.709,15.356,43.709],[1,15.356,43.709],[3,14.372,43.709,13.572,42.913,13.572,41.929],[1,13.572,38.465],[3,13.572,37.481,14.368,36.681,15.356,36.681],[1,15.356,36.681],[3,16.34,36.681,17.136,37.481,17.136,38.465],[1,17.136,41.929],[4],[0,36.716,41.929],[3,36.716,42.913,35.92,43.709,34.936,43.709],[1,34.936,43.709],[3,33.952,43.709,33.156,42.913,33.156,41.929],[1,33.156,38.465],[3,33.156,37.481,33.952,36.681,34.936,36.681],[1,34.936,36.681],[3,35.92,36.681,36.716,37.481,36.716,38.465],[1,36.716,41.929],[4],[0,15.472,33.872],[3,17.66,33.872,17.724,31.62,17.724,31.62],[3,17.724,31.62,17.756,29.368,15.472,29.368],[3,13.192,29.368,13.22,31.62,13.22,31.62],[3,13.22,31.62,13.288,33.872,15.472,33.872],[4],[0,35.012,33.872],[3,37.2,33.872,37.264,31.62,37.264,31.62],[3,37.264,31.62,37.296,29.368,35.012,29.368],[3,32.728,29.368,32.76,31.62,32.76,31.62],[3,32.76,31.62,32.828,33.872,35.012,33.872],[4],[0,11.7,23.624],[1,37.956,23.624],[1,37.956,13.863],[3,37.956,13.863,38.184,11.819,36.096,11.791],[1,13.876,11.767],[3,13.876,11.767,11.7,11.411,11.7,13.859],[3,11.704,16.308,11.7,23.624,11.7,23.624],[4],[0,15.2,10.259],[1,34.888,10.259],[3,34.888,10.259,35.74,10.259,35.74,9.307],[3,35.74,8.351,34.888,8.351,34.888,8.351],[1,15.2,8.351],[3,15.2,8.351,14.352,8.351,14.352,9.307],[3,14.352,10.259,15.2,10.259,15.2,10.259],[4]],t:"Icon Foreground"}],h:50},"Fire Extinguisher":{w:50,g:[],h:50},Mail:{w:50,g:[{shp:[[0,50,38],[3,50,44.629,44.633,50,38,50],[1,12,50],[3,5.375,50,-0,44.629,-0,38],[1,-0,12],[3,-0,5.375,5.375,-0,12,-0],[1,38,-0],[3,44.633,-0,50,5.375,50,12],[1,50,38],[4]],t:"Icon Background"},{shp:[[0,4.687,14.48],[1,45.305,14.48],[1,25,26.828],[1,4.687,14.48],[4],[0,4.031,15.504],[1,4.031,35.156],[1,20.398,25.438],[1,4.031,15.504],[4],[0,45.969,35.156],[1,45.969,15.578],[1,29.672,25.367],[1,45.969,35.156],[4],[0,5.781,35.52],[1,44.211,35.52],[1,28.43,26.168],[1,25,28.215],[1,21.641,26.242],[1,5.781,35.52],[4]],t:"Icon Foreground"}],h:50},"Fire Hose":{w:50,g:[],h:50},Playground:{w:50,g:[{shp:[[0,49.999,37.997],[3,49.999,44.621,44.627,49.996,38.001,49.996],[1,12,49.996],[3,5.375,49.996,-.001,44.621,-.001,37.997],[1,-.001,12.013],[3,-.001,5.364,5.375,-.005,12,-.005],[1,38.001,-.005],[3,44.627,-.005,49.999,5.364,49.999,12.013],[1,49.999,37.997],[4]],t:"Icon Background"},{shp:[[0,38.722,15.911],[3,40.118,15.238,40.706,13.563,40.029,12.167],[3,39.353,10.774,37.668,10.192,36.269,10.866],[3,34.87,11.542,34.284,13.218,34.965,14.611],[3,35.642,16.004,37.325,16.586,38.722,15.911],[4],[0,11.238,15.911],[3,12.631,16.585,14.306,16.005,14.981,14.611],[3,15.653,13.218,15.076,11.542,13.681,10.866],[3,12.285,10.192,10.609,10.772,9.934,12.167],[3,9.264,13.562,9.846,15.237,11.238,15.911],[4],[0,46.583,22.296],[1,44.096,22.293],[1,41.72,17.401],[3,41.72,17.401,38.523,15.33,37.007,19.675],[1,36.094,22.284],[1,29.082,22.278],[1,29.082,22.275],[1,21.831,22.275],[1,21.831,22.278],[1,13.858,22.284],[1,12.951,19.675],[3,11.443,15.33,8.257,17.401,8.257,17.401],[1,5.887,22.293],[1,3.414,22.296],[3,3.038,22.296,2.734,22.539,2.734,22.836],[3,2.736,23.05,2.894,23.238,3.118,23.321],[3,3.21,23.356,3.307,23.372,3.416,23.372],[1,8.946,23.369],[3,9.174,23.545,9.487,23.84,9.872,24.318],[3,10.491,25.079,11.291,26.305,12.27,28.241],[3,12.338,28.373,12.448,28.477,12.577,28.537],[3,12.76,28.628,12.98,28.634,13.177,28.534],[3,13.508,28.364,13.643,27.965,13.474,27.629],[3,12.467,25.636,11.62,24.334,10.92,23.47],[3,10.891,23.435,10.862,23.401,10.836,23.366],[1,22.311,23.356],[1,22.311,23.35],[1,25.009,23.35],[1,27.6,23.35],[1,27.6,23.356],[1,39.126,23.366],[3,39.095,23.401,39.067,23.435,39.04,23.47],[3,38.336,24.334,37.487,25.636,36.475,27.629],[3,36.308,27.965,36.443,28.364,36.774,28.534],[3,36.97,28.632,37.193,28.628,37.377,28.537],[3,37.506,28.477,37.613,28.373,37.685,28.241],[3,38.665,26.305,39.474,25.079,40.091,24.318],[3,40.482,23.838,40.793,23.545,41.025,23.369],[1,46.578,23.372],[3,46.684,23.372,46.787,23.356,46.873,23.321],[3,47.101,23.237,47.259,23.048,47.259,22.836],[3,47.261,22.539,46.957,22.296,46.583,22.296],[4],[0,9.753,22.29],[3,9.655,22.215,9.556,22.146,9.464,22.089],[1,10.402,20.157],[3,11.087,18.733,11.609,19.923,11.609,19.923],[1,12.431,22.287],[1,9.753,22.29],[4],[0,40.215,22.29],[1,37.526,22.287],[1,38.351,19.923],[3,38.351,19.923,38.876,18.734,39.566,20.157],[1,40.507,22.089],[3,40.413,22.147,40.315,22.215,40.215,22.29],[4],[0,33.071,39.405],[1,25.009,23.351],[1,17.053,39.405],[1,33.071,39.405],[4]],t:"Icon Foreground"}],h:50},Object:{w:50,g:[{shp:[[0,50,38],[3,50,44.629,44.629,50,38,50],[1,12,50],[3,5.375,50,0,44.629,0,38],[1,0,12],[3,0,5.375,5.375,0,12,0],[1,38,0],[3,44.629,0,50,5.375,50,12],[1,50,38],[4]],t:"Icon Background"},{shp:[[0,7.617,25],[1,24.999,42.383],[1,42.383,24.999],[1,25,7.617],[4]],t:"Icon Foreground"}],h:50},"Food and Drink":{w:50,g:[{shp:[[0,49.999,37.999],[3,49.999,44.624,44.627,49.996,38.003,49.996],[1,11.999,49.996],[3,5.375,49.996,-.001,44.623,-.001,37.999],[1,-.001,12.011],[3,-.001,5.366,5.375,-.006,11.999,-.006],[1,38.003,-.006],[3,44.627,-.006,49.999,5.367,49.999,12.011],[1,49.999,37.999],[4]],t:"Icon Background"},{shp:[[0,12.899,8.795],[1,12.099,12.527],[1,10.099,12.563],[1,11.427,6.363],[1,18.575,8.623],[1,17.839,10.547],[1,12.899,8.795],[4],[0,6.527,37.083],[3,6.527,38.171,7.783,38.131,7.783,38.131],[1,15.699,38.131],[3,15.699,38.131,14.615,38.131,15.699,38.131],[3,16.787,38.131,16.955,37.295,16.955,37.295],[1,19.423,13.715],[3,9.539,11.875,4.343,13.715,4.343,13.715],[3,4.343,13.715,6.527,35.995,6.527,37.083],[4],[0,43.843,28.551],[3,43.843,21.799,33.479,22.103,33.479,22.103],[3,22.683,22.587,22.683,28.551,22.683,28.551],[1,43.843,28.551],[4],[0,43.843,32.795],[3,43.843,32.795,45.651,32.795,45.651,30.863],[3,45.651,28.931,43.843,29.055,43.843,29.055],[3,43.843,29.055,22.683,29.011,22.683,29.035],[3,22.683,29.055,20.747,29.035,20.747,30.863],[3,20.747,32.691,22.683,32.795,22.683,32.795],[1,43.843,32.795],[4],[0,22.683,33.223],[3,22.683,33.223,21.495,38.055,27.487,38.031],[3,33.479,38.011,40.783,38.011,40.783,38.011],[3,40.783,38.011,44.355,38.299,43.843,33.115],[1,22.683,33.223],[4]],t:"Icon Foreground"}],h:50},Train:{w:50,g:[{shp:[[0,50,37.999],[3,50,44.623,44.624,49.995,38,49.995],[1,12,49.995],[3,5.372,49.995,0,44.623,0,37.999],[1,0,12.011],[3,0,5.367,5.372,-.005,12,-.005],[1,38,-.005],[3,44.624,-.005,50,5.367,50,12.011],[1,50,37.999],[4]],t:"Icon Background"},{shp:[[0,40.524,34.247],[3,40.524,35.911,39.076,37.263,37.284,37.263],[1,12.504,37.263],[3,10.716,37.263,9.264,35.911,9.264,34.247],[1,9.264,6.995],[3,9.264,5.331,10.68,3.979,12.504,3.979],[1,37.284,3.979],[3,39.072,3.979,40.524,5.331,40.524,6.995],[1,40.524,34.247],[1,40.524,34.247],[4],[0,39.476,45.987],[1,10.672,45.987],[1,10.672,44.211],[1,15.312,37.295],[1,34.728,37.295],[1,39.48,44.127],[1,39.476,45.987],[1,39.476,45.987],[1,39.476,45.987],[4],[0,34.348,39.955],[1,15.676,39.955],[1,13.04,43.967],[1,36.984,43.967],[1,34.348,39.955],[4],[0,32.956,38.423],[1,32.256,37.339],[1,17.516,37.339],[1,16.812,38.383],[1,32.956,38.423],[4],[0,23.74,7.111],[1,13.912,7.111],[3,12.964,7.111,11.86,8.071,11.86,9.227],[1,11.86,18.979],[1,23.74,18.979],[1,23.74,7.111],[4],[0,17.8,32.295],[3,19.988,32.295,20.052,30.043,20.052,30.043],[3,20.052,30.043,20.116,27.791,17.8,27.791],[3,15.484,27.791,15.548,30.043,15.548,30.043],[3,15.548,30.043,15.616,32.295,17.8,32.295],[4],[0,26.052,18.987],[1,37.968,18.987],[1,37.968,9.235],[3,37.968,8.079,36.884,7.119,35.884,7.119],[1,26.052,7.119],[1,26.052,18.987],[4],[0,31.988,32.295],[3,34.176,32.295,34.24,30.043,34.24,30.043],[3,34.24,30.043,34.308,27.791,31.988,27.791],[3,29.668,27.791,29.736,30.043,29.736,30.043],[3,29.736,30.043,29.804,32.295,31.988,32.295],[4]],t:"Icon Foreground"}],h:50},Power:{w:50,g:[{shp:[[0,49.999,38.002],[3,49.999,44.626,44.627,49.994,38.003,49.994],[1,11.999,49.994],[3,5.375,49.994,-.001,44.626,-.001,38.002],[1,-.001,12.01],[3,-.001,5.37,5.375,-.006,11.999,-.006],[1,38.003,-.006],[3,44.627,-.006,49.999,5.37,49.999,12.01],[1,49.999,38.002],[4]],t:"Icon Background"},{shp:[[0,19.259,31.39],[3,20.911,31.358,22.611,31.39,22.611,31.39],[3,22.611,31.39,24.471,31.89,24.471,34.206],[3,24.471,36.522,23.643,37.722,24.471,39.046],[3,25.299,40.366,27.679,41.59,28.775,43.266],[3,28.775,43.266,31.643,46.354,33.823,45.474],[3,36.003,44.586,33.139,42.97,31.839,41.67],[3,30.535,40.366,27.343,38.274,27.343,37.642],[3,27.343,37.642,27.575,33.986,27.039,32.734],[3,26.499,31.478,26.003,31.282,27.191,31.382],[3,28.379,31.474,32.663,31.382,32.663,31.382],[3,32.663,31.382,35.955,30.99,35.955,28.086],[3,35.955,25.17,35.955,18.762,35.955,18.762],[1,37.863,18.762],[3,37.863,18.762,39.191,18.846,39.191,16.57],[3,39.191,16.57,39.423,14.694,37.863,14.586],[1,31.683,14.586],[1,31.683,5.782],[3,31.683,5.782,31.451,4.362,30.263,4.362],[3,30.263,4.362,28.835,4.298,28.835,5.782],[1,28.835,14.586],[1,21.471,14.586],[1,21.471,5.782],[3,21.471,5.782,21.387,4.362,20.043,4.362],[3,18.703,4.362,18.655,5.75,18.655,5.75],[1,18.655,14.59],[1,12.071,14.59],[3,12.071,14.59,10.799,14.71,10.799,16.614],[3,10.799,18.522,11.959,18.522,12.071,18.522],[3,12.179,18.522,14.303,18.522,14.303,18.522],[1,14.303,28.114],[3,14.295,28.11,14.339,31.498,19.259,31.39],[4]],t:"Icon Foreground"}],h:50},"First Aid":{w:50,g:[{shp:[[0,49.999,37.996],[3,49.999,44.622,44.627,49.997,38.003,49.997],[1,11.999,49.996],[3,5.374,49.996,-.001,44.621,-.001,37.996],[1,-.001,12.011],[3,-.001,5.363,5.375,-.005,11.999,-.004],[1,38.003,-.003],[3,44.628,-.004,50,5.363,49.999,12.011],[1,49.999,37.996],[4]],t:"Icon Background"},{shp:[[0,40.999,20.605],[1,29.46,20.606],[1,29.46,8.996],[1,20.674,8.996],[1,20.675,20.607],[1,8.999,20.606],[1,8.999,29.387],[1,20.675,29.388],[1,20.675,40.996],[1,29.46,40.996],[1,29.459,29.388],[1,41,29.387],[4]],t:"Icon Foreground"}],h:50},Defribillator:{w:50,g:[{shp:[[0,50,37.996],[3,50,44.621,44.623,49.998,37.998,49.998],[1,12.002,49.998],[3,5.377,49.998,0,44.621,0,37.996],[1,0,12.009],[3,0,5.365,5.377,-.002,12.002,-.002],[1,37.998,-.002],[3,44.623,-.002,50,5.365,50,12.009],[1,50,37.996],[4]],t:"Icon Background"},{shp:[[0,40.759,8.886],[1,40.759,4.994],[1,36.821,4.994],[1,36.821,8.886],[1,32.92,8.886],[1,32.92,12.896],[1,36.821,12.896],[1,36.821,16.86],[1,40.759,16.86],[1,40.759,12.896],[1,44.66,12.896],[1,44.66,8.886],[1,40.759,8.886],[4],[0,27.489,16.67],[3,20.809,16.67,20.474,20.807,20.474,20.807],[3,20.474,17.114,8.246,12.878,5.621,23.296],[3,3.005,33.723,20.275,44.404,20.275,44.404],[3,20.275,44.404,37.844,33.035,35.101,23.296],[3,35.101,23.287,33.481,16.67,27.489,16.67],[4],[0,23.461,38.512],[1,20.248,42.096],[1,18.221,37.525],[1,19.859,38.131],[1,20.855,30.818],[1,15.351,34.719],[1,17.008,18.671],[3,19.859,19.295,19.967,21.993,19.967,21.993],[1,18.257,30.103],[1,24.765,25.459],[1,21.841,38.503],[1,23.461,38.503],[4]],t:"Icon Foreground"}],h:50},ATM:{w:50,g:[{shp:[[0,50,38],[3,50,44.629,44.627,50.001,38,50.001],[1,12,50.001],[3,5.375,50.001,-0,44.629,-0,38],[1,-0,12],[3,-0,5.374,5.375,-.001,12,-.001],[1,38,-.001],[3,44.627,-.001,50,5.374,50,12],[1,50,38],[4]],t:"Icon Background"},{shp:[[0,26.68,6.698],[3,29.659,6.718,32.446,7.2,35.059,8.151],[1,35.059,13.654],[1,32.539,13.654],[3,32.082,12.109,31.379,10.949,30.424,10.174],[3,29.475,9.399,28.227,8.989,26.68,8.942],[1,26.68,21.191],[3,29.059,22.329,30.844,23.349,32.03,24.25],[3,33.221,25.146,34.13,26.148,34.757,27.256],[3,35.386,28.36,35.702,29.656,35.702,31.152],[3,35.702,33.92,34.929,36.049,33.386,37.556],[3,31.837,39.059,29.558,39.93,26.534,40.166],[1,26.534,44.901],[1,23.88,44.901],[1,23.88,40.216],[3,22.37,40.184,20.762,40.003,19.054,39.682],[3,17.348,39.36,15.881,38.968,14.66,38.509],[1,14.66,32.906],[1,17.209,32.906],[3,17.615,34.651,18.341,35.932,19.385,36.738],[3,20.429,37.543,21.925,37.981,23.879,38.05],[1,23.879,24.857],[1,23.244,24.554],[3,21.017,23.484,19.374,22.547,18.301,21.738],[3,17.233,20.935,16.406,20.027,15.833,19.027],[3,15.255,18.025,14.968,16.853,14.968,15.513],[3,14.968,14.222,15.205,13.068,15.68,12.048],[3,16.158,11.026,16.805,10.152,17.625,9.424],[3,18.452,8.694,19.415,8.11,20.516,7.68],[3,21.622,7.245,22.793,6.971,24.035,6.852],[1,24.035,1.989],[1,26.681,1.989],[1,26.681,6.698],[1,26.68,6.698],[4],[0,24.034,20.173],[1,24.034,9.015],[3,22.57,9.204,21.397,9.758,20.506,10.685],[3,19.615,11.612,19.168,12.762,19.168,14.139],[3,19.168,15.512,19.545,16.653,20.3,17.559],[3,21.057,18.473,22.302,19.339,24.034,20.173],[4],[0,26.531,25.85],[1,26.531,37.975],[3,28.107,37.807,29.32,37.235,30.172,36.253],[3,31.022,35.281,31.447,33.968,31.447,32.32],[3,31.447,30.861,31.051,29.632,30.271,28.628],[3,29.492,27.627,28.246,26.7,26.531,25.85],[4]],t:"Icon Foreground"}],h:50},"Bathroom W":{w:50,g:[{shp:[[0,50,38.008],[3,50,44.638,44.626,50.013,38.001,50.013],[1,11.999,50.013],[3,5.374,50.013,0,44.638,0,38.008],[1,0,12],[3,0,5.354,5.374,-.02,11.999,-.02],[1,38.001,-.02],[3,44.626,-.02,50,5.354,50,12],[1,50,38.008],[4]],t:"Icon Background"},{shp:[[0,22.967,46.797],[3,24.719,46.797,24.719,45.042,24.719,45.042],[1,24.719,32.198],[1,25.532,32.198],[1,25.532,45.042],[3,25.532,45.042,25.532,46.667,27.376,46.667],[3,29,46.667,29,45.042,29,45.042],[1,29,32.063],[1,33.779,32.044],[1,28.866,15.28],[1,29.6,15.28],[1,32.752,25.594],[3,32.752,25.594,33.078,26.825,34.484,26.28],[3,35.672,25.817,35.223,24.378,35.223,24.378],[3,35.223,24.378,32.787,15.121,31.852,12.912],[3,30.924,10.716,29.48,10.423,28.41,10.323],[3,26.785,10.173,23.506,10.169,21.882,10.323],[3,20.969,10.409,19.827,10.716,18.77,12.266],[3,17.707,13.825,14.777,24.745,14.777,24.745],[3,14.777,24.745,14.176,26.141,15.563,26.671],[3,17.001,27.22,17.521,25.692,17.521,25.692],[1,20.653,15.396],[1,21.372,15.396],[1,16.434,32.201],[1,21.215,32.201],[1,21.215,45.045],[3,21.214,45.042,21.214,46.797,22.967,46.797],[4],[0,25.069,9.229],[3,29.014,9.229,28.891,5.414,28.891,5.414],[3,28.891,1.587,25.068,1.579,25.068,1.579],[3,21.198,1.579,21.24,5.414,21.24,5.414],[3,21.241,5.887,21.125,9.229,25.069,9.229],[4]],t:"Icon Foreground"}],h:50},Stairs:{w:50,g:[{shp:[[0,50,38],[3,49.999,44.628,44.626,50.001,37.999,50.001],[1,11.999,50.001],[3,5.374,50.001,-.001,44.628,-0,38],[1,0,12],[3,.001,5.375,5.376,-.001,12.001,-.001],[1,38.001,-.001],[3,44.628,-.001,50.001,5.375,50,12],[1,50,38],[4]],t:"Icon Background"},{shp:[[0,5.19,37.43],[1,12.459,37.43],[1,12.459,30.042],[1,19.727,30.042],[1,19.727,22.656],[1,26.935,22.656],[1,26.935,15.329],[1,34.203,15.329],[1,34.203,8.119],[1,45.078,8.119],[1,45.078,11.842],[1,37.867,11.842],[1,37.867,19.287],[1,30.658,19.287],[1,30.658,26.557],[1,23.45,26.557],[1,23.45,33.884],[1,16.063,33.884],[1,16.063,41.272],[1,5.25,41.272],[1,5.19,37.43],[4]],t:"Icon Foreground"}],h:50},Information:{w:50,g:[{shp:[[0,50,37.996],[3,50,44.62,44.624,49.996,38,49.996],[1,12,49.996],[3,5.376,49.996,-0,44.62,-0,37.996],[1,-0,12.012],[3,-0,5.364,5.376,-.004,12,-.004],[1,38,-.004],[3,44.624,-.004,50,5.364,50,12.012],[1,50,37.996],[4]],t:"Icon Background"},{shp:[[0,27.836,10.292],[3,27.836,11.856,26.744,13.104,24.92,13.104],[3,23.256,13.104,22.164,11.852,22.164,10.292],[3,22.164,8.732,23.304,7.428,25.024,7.428],[3,26.688,7.432,27.836,8.68,27.836,10.292],[4],[0,22.736,42.564],[1,22.736,17.372],[1,27.32,17.372],[1,27.32,42.564],[1,22.736,42.564],[4]],t:"Icon Foreground"}],h:50},Smoke:{w:50,g:[{shp:[[0,50,37.996],[3,50,44.62,44.624,49.996,38,49.996],[1,12,49.996],[3,5.376,49.996,0,44.62,0,37.996],[1,0,12.012],[3,0,5.364,5.376,-.004,12,-.004],[1,38,-.004],[3,44.624,-.004,50,5.364,50,12.012],[1,50,37.996],[4]],t:"Icon Background"},{shp:[[0,4.792,36.712],[1,4.792,31.048],[1,40.236,31.048],[1,40.236,36.712],[1,4.792,36.712],[4],[0,41.744,30.016],[1,42.744,30.016],[1,42.744,27.416],[1,42.744,27.416],[3,42.736,24.936,41.012,23.236,38.112,23.228],[1,33.004,23.228],[1,33.004,23.228],[3,31.108,23.228,30.096,21.66,30.076,19.98],[1,30.076,19.98],[3,30.076,19.364,30.232,18.744,30.536,18.228],[1,30.972,17.476],[1,30.104,17.476],[1,30.104,17.476],[3,29.94,17.476,29.792,17.484,29.668,17.484],[1,29.668,17.484],[3,26.488,17.468,24.92,15.256,24.904,13.224],[1,24.904,13.224],[3,24.94,11.3,26.1,8.9,29.152,8.9],[1,29.152,7.904],[1,29.152,7.904],[3,25.452,7.904,23.912,10.936,23.912,13.224],[1,23.912,13.224],[3,23.912,15.692,25.832,18.308,29.328,18.476],[1,29.328,18.476],[3,29.16,18.956,29.076,19.468,29.076,19.984],[1,29.076,19.984],[3,29.084,22.044,30.452,24.228,33.004,24.228],[1,38.112,24.228],[1,38.112,24.228],[3,40.652,24.288,41.692,25.416,41.744,27.42],[1,41.744,30.016],[1,41.744,30.016],[4],[0,44.704,30.016],[1,45.7,30.016],[1,45.7,26.524],[1,45.7,26.524],[3,45.692,22.64,42.9,18.712,38.204,18.712],[1,36.088,18.712],[1,36.088,18.712],[3,36.672,17.652,36.964,16.536,36.968,15.54],[1,36.968,15.54],[3,36.96,12.352,34.44,9.756,30.78,9.748],[1,30.78,10.744],[1,30.78,10.744],[3,33.952,10.764,35.956,12.896,35.972,15.54],[1,35.972,15.54],[3,35.972,16.536,35.572,17.82,34.784,18.92],[1,34.204,19.708],[1,38.204,19.708],[1,38.204,19.708],[3,42.276,19.72,44.688,23.08,44.704,26.524],[1,44.704,30.016],[1,44.704,30.016],[4],[0,30.78,10.74],[1,30.78,10.748],[1,30.78,10.74],[1,30.78,10.74],[4],[0,41.744,36.688],[1,42.744,36.688],[1,42.744,30.948],[1,41.744,30.948],[1,41.744,36.688],[1,41.744,36.688],[4],[0,44.716,36.688],[1,45.712,36.688],[1,45.712,30.948],[1,44.716,30.948],[1,44.716,36.688],[1,44.716,36.688],[4]],t:"Icon Foreground"}],h:50},"Rest Area":{w:50,g:[],h:50},"Meeting Point":{w:50,g:[],h:50},"Lost and Found":{w:50,g:[{shp:[[0,49.999,37.996],[3,49.999,44.621,44.628,49.996,38.003,49.997],[1,11.999,49.996],[3,5.374,49.996,-.001,44.62,-0,37.995],[1,-.001,12.011],[3,-.001,5.363,5.374,-.004,11.999,-.004],[1,38.003,-.004],[3,44.628,-.004,49.999,5.363,49.999,12.011],[1,49.999,37.996],[4]],t:"Icon Background"},{shp:[[0,19.046,14.371],[1,16.394,14.371],[3,16.388,13.981,16.384,13.739,16.384,13.653],[3,16.385,12.761,16.526,12.027,16.81,11.454],[3,17.096,10.879,17.662,10.23,18.516,9.512],[3,19.368,8.797,19.877,8.324,20.044,8.102],[3,20.301,7.75,20.429,7.364,20.429,6.942],[3,20.429,6.348,20.202,5.844,19.747,5.427],[3,19.295,5.004,18.683,4.793,17.913,4.793],[3,17.171,4.793,16.55,5.012,16.05,5.452],[3,15.552,5.891,15.208,6.558,15.023,7.457],[1,12.337,7.112],[3,12.416,5.823,12.943,4.729,13.925,3.836],[3,14.905,2.938,16.192,2.488,17.788,2.488],[3,19.466,2.488,20.8,2.941,21.791,3.851],[3,22.783,4.761,23.279,5.816,23.279,7.023],[3,23.279,7.691,23.097,8.323,22.734,8.921],[3,22.369,9.516,21.592,10.327,20.398,11.356],[3,19.781,11.886,19.399,12.316,19.25,12.636],[3,19.1,12.965,19.03,13.543,19.046,14.371],[4],[0,16.393,18.45],[1,16.393,15.418],[1,19.315,15.418],[1,19.315,18.45],[1,16.393,18.45],[4],[0,47.998,26.972],[3,47.156,23.902,44.325,23.3,44.325,23.3],[1,36.958,23.3],[1,36.958,17.636],[1,8.626,23.687],[1,4.151,23.687],[3,4.151,23.687,3.658,23.686,3.658,24.394],[3,3.658,25.097,4.203,25.104,4.203,25.104],[1,8.665,25.105],[1,36.957,30.738],[1,36.957,25.589],[1,42.976,25.59],[3,44.871,25.591,45.385,26.649,45.384,28.027],[3,45.384,29.41,44.199,30.101,42.34,30.222],[3,40.48,30.35,41.029,31.925,41.029,31.925],[3,41.138,32.558,41.727,33.312,44.324,32.613],[3,49.158,31.164,47.998,26.972,47.998,26.972],[4],[0,21.241,29.028],[3,18.173,28.269,19.393,30.871,19.393,30.871],[1,21.878,31.906],[3,22.542,32.082,22.436,32.216,22.436,32.216],[1,14.569,32.216],[3,14.566,32.215,14.53,32.215,14.438,32.215],[3,14.141,32.215,13.268,32.216,13.269,33.434],[3,13.268,34.649,14.438,34.668,14.438,34.668],[1,24.387,34.668],[1,24.387,35.266],[1,14.728,35.266],[3,14.732,35.266,14.662,35.267,14.437,35.266],[3,13.781,35.266,13.268,35.481,13.267,36.477],[3,13.268,37.473,14.437,37.528,14.437,37.528],[1,24.386,37.528],[1,24.386,38.255],[1,14.437,38.255],[3,14.437,38.255,13.268,38.255,13.268,39.38],[3,13.268,40.505,14.438,40.478,14.438,40.478],[1,24.387,40.478],[1,24.387,41.083],[1,14.544,41.083],[3,13.233,41.083,13.269,42.142,13.269,42.142],[3,13.268,43.419,14.544,43.419,14.544,43.419],[1,33.665,43.419],[1,36.959,44.583],[1,36.95,32.267],[1,21.241,29.028],[4]],t:"Icon Foreground"}],h:50},Elevator:{w:50,g:[{shp:[[0,50,37.996],[3,50,44.62,44.622,49.999,37.998,49.999],[1,12.002,49.999],[3,5.369,49.999,-0,44.62,-0,37.996],[1,-0,12.008],[3,-0,5.366,5.369,-.003,12.002,-.003],[1,37.998,-.003],[3,44.622,-.003,50,5.375,50,12.008],[1,50,37.996],[4]],t:"Icon Background"},{shp:[[0,6.919,8.669],[1,12.002,3.779],[1,12.472,3.779],[1,17.583,8.779],[1,17.583,12.193],[1,13.469,8.567],[1,13.469,18.789],[1,10.959,18.789],[1,10.959,8.595],[1,6.937,12.174],[1,6.919,8.669],[4],[0,19.732,26.095],[3,19.732,26.095,19.696,26.815,19.013,26.815],[3,18.293,26.815,18.293,26.095,18.293,26.095],[3,18.293,26.095,18.293,23.199,18.293,21.132],[3,18.293,19.075,20.194,19.195,20.194,19.195],[3,20.194,19.195,22.159,19.195,24.225,19.195],[3,26.292,19.195,26.024,20.994,26.024,20.994],[1,26.024,26.114],[3,26.024,26.114,26.024,26.843,25.295,26.843],[3,24.576,26.843,24.576,26.114,24.576,26.114],[1,24.576,21.815],[1,24.29,21.815],[1,24.29,34.057],[3,24.29,34.057,24.29,35.026,23.321,35.026],[3,22.334,35.026,22.362,34.057,22.362,34.057],[1,22.362,27],[1,21.965,27],[1,21.965,34.057],[3,21.965,34.057,21.965,35.016,21.006,35.016],[3,20.046,35.016,20.046,34.057,20.046,34.057],[1,20.046,21.787],[1,19.705,21.787],[1,19.732,26.095],[4],[0,29.649,26.095],[3,29.649,26.095,29.613,26.815,28.93,26.815],[3,28.21,26.815,28.21,26.095,28.21,26.095],[3,28.21,26.095,28.21,23.199,28.21,21.132],[3,28.21,19.075,30.111,19.195,30.111,19.195],[3,30.111,19.195,32.076,19.195,34.142,19.195],[3,36.208,19.195,35.941,20.994,35.941,20.994],[1,35.941,26.114],[3,35.941,26.114,35.941,26.843,35.212,26.843],[3,34.483,26.843,34.483,26.114,34.483,26.114],[1,34.483,21.815],[1,34.197,21.815],[1,34.197,34.057],[3,34.197,34.057,34.197,35.026,33.238,35.026],[3,32.251,35.026,32.279,34.057,32.279,34.057],[1,32.279,27],[1,31.891,27],[1,31.891,34.057],[3,31.891,34.057,31.891,35.016,30.932,35.016],[3,29.972,35.016,29.972,34.057,29.972,34.057],[1,29.972,21.787],[1,29.631,21.787],[1,29.649,26.095],[4],[0,6.919,39.528],[1,12.002,44.417],[1,12.472,44.417],[1,17.583,39.417],[1,17.583,36.004],[1,13.469,39.629],[1,13.469,29.407],[1,10.959,29.407],[1,10.959,39.602],[1,6.937,36.031],[1,6.919,39.528],[4],[0,39.151,26.095],[3,39.151,26.095,39.124,26.815,38.441,26.815],[3,37.721,26.815,37.721,26.095,37.721,26.095],[3,37.721,26.095,37.721,23.199,37.721,21.132],[3,37.721,19.075,39.622,19.195,39.622,19.195],[3,39.622,19.195,41.587,19.195,43.662,19.195],[3,45.72,19.195,45.452,20.994,45.452,20.994],[1,45.452,26.114],[3,45.452,26.114,45.452,26.843,44.723,26.843],[3,43.994,26.843,43.994,26.114,43.994,26.114],[1,43.994,21.815],[1,43.708,21.815],[1,43.708,34.057],[3,43.708,34.057,43.708,35.026,42.749,35.026],[3,41.771,35.026,41.79,34.057,41.79,34.057],[1,41.79,27],[1,41.402,27],[1,41.393,34.057],[3,41.393,34.057,41.393,35.016,40.443,35.016],[3,39.483,35.016,39.483,34.057,39.483,34.057],[1,39.483,21.787],[1,39.142,21.787],[1,39.151,26.095],[4],[0,20.461,16.815],[3,20.461,16.815,20.452,15.136,22.149,15.136],[3,23.847,15.136,23.828,16.815,23.828,16.815],[3,23.828,16.815,23.93,18.484,22.149,18.484],[3,20.369,18.484,20.461,16.815,20.461,16.815],[4],[0,30.378,16.815],[3,30.378,16.815,30.36,15.136,32.057,15.136],[3,33.755,15.136,33.736,16.815,33.736,16.815],[3,33.736,16.815,33.838,18.484,32.057,18.484],[3,30.277,18.484,30.378,16.815,30.378,16.815],[4],[0,39.889,16.815],[3,39.889,16.815,39.871,15.136,41.568,15.136],[3,43.266,15.136,43.247,16.815,43.247,16.815],[3,43.247,16.815,43.349,18.484,41.568,18.484],[3,39.788,18.484,39.889,16.815,39.889,16.815],[4]],t:"Icon Foreground"}],h:50},Escalator:{w:50,g:[{shp:[[0,50,37.994],[3,50,44.627,44.622,49.996,37.998,49.996],[1,12.002,49.996],[3,5.387,49.996,-0,44.627,-0,37.994],[1,-0,12.015],[3,-0,5.373,5.387,-.006,12.002,-.006],[1,37.998,-.006],[3,44.622,-.006,50,5.373,50,12.015],[1,50,37.994],[4]],t:"Icon Background"},{shp:[[0,31.282,12.716],[1,41.947,12.716],[3,41.947,12.716,46.024,12.716,46.024,16.785],[3,46.024,20.872,41.947,20.872,41.947,20.872],[1,35.203,20.872],[1,20.286,35.199],[1,8.884,35.199],[3,8.884,35.199,4.779,35.199,4.779,31.103],[3,4.779,26.997,8.884,26.997,8.884,26.997],[1,17.002,26.997],[1,31.282,12.716],[4],[0,22.721,21.471],[1,22.721,18.528],[3,22.721,18.528,22.721,17.504,20.092,17.504],[3,17.694,17.504,17.694,18.528,17.694,18.528],[1,17.694,26.499],[1,22.721,21.471],[4],[0,17.472,12.929],[3,17.472,12.929,17.435,10.17,20.231,10.17],[3,20.231,10.17,22.989,10.17,22.989,12.929],[3,22.989,12.929,23.081,15.668,20.231,15.668],[3,17.399,15.668,17.472,13.27,17.472,12.929],[4],[0,34.428,26.047],[1,25.812,34.35],[1,27.924,36.518],[1,36.531,28.224],[1,37.546,29.23],[1,38.736,23.787],[1,33.284,24.885],[1,34.428,26.047],[4]],t:"Icon Foreground"}],h:50},Wifi:{w:50,g:[{shp:[[0,50.001,37.996],[3,50.001,44.619,44.625,49.997,38,49.997],[1,11.999,49.997],[3,5.376,49.997,.001,44.619,.001,37.996],[1,.001,12.011],[3,.001,5.361,5.376,-.003,11.999,-.003],[1,38,-.003],[3,44.625,-.003,50.001,5.361,50.001,12.011],[1,50.001,37.996],[4]],t:"Icon Background"},{shp:[[0,31.155,36.498],[3,31.155,39.714,28.553,42.323,25.335,42.323],[3,22.115,42.323,19.506,39.714,19.506,36.498],[3,19.506,33.282,22.115,30.673,25.335,30.673],[3,28.555,30.674,31.155,33.283,31.155,36.498],[4],[0,25.773,27.744],[3,27.555,27.749,29.493,28.153,31.549,29.438],[1,34.002,25.544],[1,34.002,25.544],[3,31.18,23.753,28.284,23.133,25.775,23.135],[1,25.775,23.135],[3,23.259,23.14,21.126,23.731,19.604,24.315],[1,19.604,24.315],[3,18.079,24.902,17.157,25.491,17.064,25.555],[1,19.495,29.333],[1,19.557,29.425],[1,19.557,29.425],[3,19.635,29.373,20.359,28.942,21.477,28.531],[1,21.477,28.531],[3,22.602,28.123,24.108,27.742,25.773,27.744],[1,25.773,27.744],[4],[0,25.391,19.793],[3,28.54,19.802,32.031,20.527,35.631,22.798],[1,38.091,18.904],[1,38.091,18.904],[3,33.709,16.133,29.262,15.184,25.388,15.189],[1,25.388,15.189],[3,21.506,15.189,18.186,16.109,15.808,17.02],[1,15.808,17.02],[3,13.435,17.938,12.003,18.847,11.901,18.915],[1,13.652,21.636],[1,14.386,22.791],[1,14.386,22.791],[1,14.395,22.791],[1,14.395,22.791],[3,14.395,22.787,14.41,22.776,14.441,22.76],[1,14.441,22.76],[3,14.699,22.6,15.988,21.847,17.933,21.142],[1,17.933,21.142],[3,19.888,20.438,22.49,19.793,25.391,19.793],[1,25.391,19.793],[4],[0,25.531,12.273],[3,29.96,12.28,34.889,13.317,39.951,16.498],[1,42.411,12.604],[1,42.411,12.604],[3,36.576,8.915,30.686,7.662,25.528,7.664],[1,25.528,7.664],[3,20.364,7.668,15.926,8.893,12.754,10.113],[1,12.754,10.113],[3,9.59,11.335,7.683,12.553,7.581,12.615],[1,10.074,16.486],[1,10.074,16.486],[1,10.074,16.486],[1,10.074,16.486],[3,10.192,16.415,11.91,15.346,14.675,14.311],[1,14.675,14.311],[3,17.446,13.273,21.242,12.273,25.531,12.273],[1,25.531,12.273],[4]],t:"Icon Foreground"}],h:50},Bathroom:{w:50,g:[{shp:[[0,50,37.999],[3,50.001,44.625,44.628,49.996,38.001,49.996],[1,12.001,49.996],[3,5.375,49.996,.001,44.625,0,37.999],[1,-0,12.008],[3,-.001,5.368,5.373,-.003,11.999,-.003],[1,37.999,-.003],[3,44.626,-.003,49.999,5.368,50,12.008],[1,50,37.999],[4]],t:"Icon Background"},{shp:[[0,24.134,8.47],[1,27.158,8.47],[1,27.16,41.004],[1,24.136,41.004],[1,24.134,8.47],[4],[0,31.445,26.617],[3,31.445,26.617,31.37,28.26,29.804,28.26],[3,28.161,28.26,28.161,26.617,28.161,26.617],[3,28.161,26.617,28.161,20.001,28.161,15.308],[3,28.161,10.618,32.499,10.891,32.499,10.891],[3,32.499,10.891,36.983,10.891,41.681,10.891],[3,46.379,10.891,45.782,14.991,45.782,14.991],[1,45.782,26.658],[3,45.782,26.658,45.782,28.316,44.124,28.316],[3,42.467,28.316,42.467,26.658,42.467,26.658],[1,42.467,16.851],[1,41.809,16.851],[1,41.81,44.756],[3,41.81,44.756,41.81,46.953,39.613,46.953],[3,37.357,46.953,37.415,44.756,37.415,44.756],[1,37.414,28.682],[1,36.526,28.682],[1,36.521,44.756],[3,36.521,44.756,36.521,46.928,34.349,46.928],[3,32.177,46.928,32.177,44.756,32.177,44.756],[1,32.176,16.792],[1,31.397,16.792],[1,31.445,26.617],[4],[0,36.984,10.163],[3,40.929,10.163,40.805,6.35,40.805,6.35],[3,40.805,2.526,36.983,2.518,36.983,2.518],[3,33.114,2.518,33.156,6.35,33.156,6.35],[3,33.156,6.824,33.042,10.163,36.984,10.163],[4],[0,11.134,47.705],[3,12.886,47.705,12.886,45.951,12.886,45.951],[1,12.885,33.115],[1,13.698,33.115],[1,13.699,45.951],[3,13.699,45.951,13.699,47.574,15.543,47.574],[3,17.167,47.574,17.167,45.951,17.167,45.951],[1,17.166,32.98],[1,21.946,32.959],[1,17.033,16.207],[1,17.766,16.207],[1,20.918,26.515],[3,20.918,26.515,21.244,27.744,22.65,27.199],[3,23.838,26.738,23.388,25.299,23.388,25.299],[3,23.388,25.299,20.954,16.048,20.017,13.84],[3,19.091,11.645,17.647,11.355,16.576,11.254],[3,14.951,11.103,11.672,11.101,10.048,11.254],[3,9.135,11.34,7.993,11.647,6.936,13.195],[3,5.874,14.752,2.943,25.666,2.943,25.666],[3,2.943,25.666,2.342,27.062,3.729,27.59],[3,5.167,28.137,5.686,26.611,5.686,26.611],[1,8.819,16.323],[1,9.538,16.323],[1,4.6,33.115],[1,9.38,33.115],[1,9.381,45.951],[3,9.381,45.951,9.381,47.705,11.134,47.705],[4],[0,13.236,10.163],[3,17.18,10.163,17.056,6.35,17.056,6.35],[3,17.056,2.526,13.234,2.518,13.234,2.518],[3,9.365,2.518,9.406,6.35,9.406,6.35],[3,9.406,6.824,9.292,10.163,13.236,10.163],[4]],t:"Icon Foreground"}],h:50},TV:{w:50,g:[],h:50}},s:{Section:{w:1,t:"#333333",o:"#999999",m:"#fff3de"},Unit:{w:1,t:"#333333",o:"#999999",m:"#b0d2e5"},Wall:{w:2,t:"#333333",o:"#999999",m:"#999999"},Selected:{w:1,t:"#333333",o:"#999999",m:"#efed7c"},Route1:{w:2.5,t:"#ffffff",o:"#00c1b2",m:"#ff1404"},Route2:{w:2,t:"#ffffff",o:"#00c1b2",m:"#ff1404"},Route3:{w:1.5,t:"#ffffff",o:"#00c1b2",m:"#ff1404"},Route4:{w:1,t:"#ffffff",o:"#00c1b2",m:"#ff1404"},Route5:{w:.5,t:"#ffffff",o:"#00c1b2",m:"#ff1404"}},m:{RouteStart:{src:n("location-20.png"),ox:10,oy:20},RouteEnd:{src:n("user.png"),ox:7,oy:32},TrackingDot:{ox:10,oy:10}}}},function(t,e,n){"use strict";function o(t){return console.log(t),n(27)("./"+t)}var s=n(0),r=n.n(s),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};n(49);var l,h,u,p={};p.settings={HOST_URL:"http://localhost:9000",SCRIPT_URL:"./webmap/"},p.tracker=!1,p.shapetype={},p.shapetype.NONE=0,p.shapetype.PATH=2,p.geomtype={},p.geomtype.NONE=0,p.geomtype.LINE=1,p.geomtype.AREA=2,p.geomtype.LINEAR_AREA=3,p.path={},p.path.MOVE_TO=0,p.path.LINE_TO=1,p.path.QUAD_TO=2,p.path.CUBE_TO=3,p.path.CLOSE=4,p.labeltype={},p.labeltype.NONE=0,p.labeltype.TEXT=1,p.labeltype.ICON=2,p.labeltype.IMAGE=3,p.labeltype.GEOM=4,p.markertype={},p.markertype.NONE=0,p.markertype.NAMED=1,p.markertype.IMAGE=2,p.popuptype={},p.popuptype.MENU=1,p.popuptype.INFOWINDOW=2,p.infoentrytype={},p.infoentrytype.PHONE=1,p.infoentrytype.EMAIL=2,p.infoentrytype.URL=3,p.infoentrytype.ADDRESS=4,p.infoentrytype.GENERAL=5,p.routeLayerName="route",p.load=function(){return l=new this.MapControl,h=l.getMapData(),h.loadCommunity(),this},p.unload=function(){p.closeCommunity(),l=null,h=null,console.warn("unload")},p.setMapData=function(t){return this.mapData=t,this},p.getMapData=function(){function t(e){if(!e||"object"!==("undefined"==typeof e?"undefined":a(e)))return e;var i,n,o="function"==typeof e.pop?[]:{};for(i in e)e.hasOwnProperty(i)&&(n=e[i],n&&"object"===("undefined"==typeof n?"undefined":a(n))?o[i]=t(n):o[i]=n);return o}return t(this.mapData)},p.setMapActivities=function(t){return this.mapActivities=t,this},p.setMapLevelId=function(t){return this.MapLevelId=t,this},p.setMapTheme=function(t){return this.mapThemeData=t,this},p.setMapName=function(t){return this.mapName=t,this},p.setTracker=function(t){return this.tracker=t,
this},p.redrawRouteMarkers=function(){l.popup.setActive(!1),l.redrawRouteMarkers()},p.geom={},p.geom.getCoordinates=function(t){var e=[],n=t.length;for(i=0;i<n-1;i++)e.push({x:t[i][1],y:t[i][2]});return e},p.geom.getPerimeterByCoords=function(t){return 0},p.geom.getSquareByCoords=function(t){return 0},p.geom.linearRoots=function(t,e,i){return 0==t?0:(i[0]=-e/t,1)},p.geom.quadraticRoots=function(t,e,i,n){if(0==t)return p.geom.linearRoots(e,i,n);var o=e*e-4*t*i;if(o<0)return 0;var s=-e/(2*t);return o=Math.sqrt(o)/(2*t),n[0]=s+o,n[1]=s-o,2},p.geom.cubicRoots=function(t,e,i,n,o){if(0==t)return p.geom.quadraticRoots(e,i,n,o);e/=t,i/=t,n/=t,t=1;var s=e/(3*t),r=1/(3*t),a=2*e*e*e-9*t*e*i+27*t*t*n,l=e*e-3*t*i,h=a*a-4*l*l*l;return h>0?p.geom.caseOne(s,r,a,h,o):0==h?p.geom.caseTwo(s,r,a,o):p.geom.caseThree(s,r,a,h,o)},p.geom.caseOne=function(t,e,i,n,o){var s=Math.sqrt(n),r=p.geom.cubeRoot(.5*(i+s)),a=p.geom.cubeRoot(.5*(i-s));return o[0]=-t-e*r-e*a,1},p.geom.caseTwo=function(t,e,i,n){var o=p.geom.cubeRoot(.5*i);return n[0]=-t-2*e*o,n[2]=n[1]=-t+e*o,3},p.geom.caseThree=function(t,e,i,n,o){var s=Math.sqrt(-n),r=Math.atan2(s,i),a=.5*Math.sqrt(i*i-n),l=r/3,h=l+2*Math.PI/3,u=l-2*Math.PI/3,c=p.geom.cubeRoot(a);return o[0]=-t-2*e*c*Math.cos(l),o[1]=-t-2*e*c*Math.cos(h),o[2]=-t-2*e*c*Math.cos(u),3},p.geom.cubeRoot=function(t){return 0==t?0:t>0?Math.exp(Math.log(t)/3):-Math.exp(Math.log(-t)/3)},p.geom.intersectLine=function(t,e,i,n,o,s){if(t==i)return 0;var r=(o-t)/(i-t);if(r>=0&&r<1){var a=(n-e)*r+e;return a>s?1:0}return 0},p.geom.intersectQuad=function(t,e,i,n,o,s,r,a){for(var l=new Array(2),h=0,u=p.geom.quadraticRoots(o-2*i+t,i-t,t-r,l),c=0;c<u;c++){var d=l[c];if(d>=0&&d<1){var f=(s-2*n+e)*d*d+2*(n-e)*d+e;f>a&&h++}}return h},p.geom.intersectCube=function(t,e,i,n,o,s,r,a,l,h){for(var u=new Array(3),c=0,d=p.geom.cubicRoots(r-3*o+3*i-t,3*(o-2*i+t),3*(i-t),t-l,u),f=0;f<d;f++){var m=u[f];if(m>=0&&m<1){var v=(a-3*s+3*n-e)*m*m*m+3*(s-2*n+e)*m*m+3*(n-e)*m+e;v>h&&c++}}return c},p.geom.cubeMinMax=function(t,e,i,n,o,s){var r=new Array(5),a=p.geom.quadraticRoots(3*(n-3*i+3*e-t),6*(i-2*e+t),3*(e-t),r);r[a++]=0,r[a++]=1;for(var l=o?0:1,h=0;h<a;h++){var u=r[h];if(u>=0&&u<=1){var c=(n-3*i+3*e-t)*u*u*u+3*(i-2*e+t)*u*u+3*(e-t)*u+t;c<s[0][l]&&(s[0][l]=c),c>s[1][l]&&(s[1][l]=c)}}},p.geom.quadMinMax=function(t,e,i,n,o){var s=new Array(4),r=p.geom.linearRoots(2*(i-2*e+t),2*(e-t),s);s[r++]=0,s[r++]=1;for(var a=n?0:1,l=0;l<r;l++){var h=s[l];if(h>=0&&h<=1){var u=(i-2*e+t)*h*h+2*(e-t)*h+t;u<o[0][a]&&(o[0][a]=u),u>o[1][a]&&(o[1][a]=u)}}},p.geom.lineMinMax=function(t,e,i,n){var o=i?0:1;t<n[0][o]&&(n[0][o]=t),t>n[1][o]&&(n[1][o]=t),e<n[0][o]&&(n[0][o]=e),e>n[1][o]&&(n[1][o]=e)},p.geom.pathHit=function(t,e,i){for(var n,o=t.length,s=0,r=0,a=0,l=null,h=null,u=0;u<o;u++)switch(n=t[u],n[0]){case 0:r=n[1],a=n[2],l&&h&&(r==l&&a==h||(s+=p.geom.intersectLine(r,a,l,h,e,i))),l=r,h=a;break;case 1:s+=p.geom.intersectLine(r,a,n[1],n[2],e,i),r=n[1],a=n[2];break;case 2:s+=p.geom.intersectQuad(r,a,n[1],n[2],n[3],n[4],e,i),r=n[3],a=n[4];break;case 3:s+=p.geom.intersectCube(r,a,n[1],n[2],n[3],n[4],n[5],n[6],e,i),r=n[5],a=n[6];break;case 4:l&&h&&(r==l&&a==h||(s+=p.geom.intersectLine(r,a,l,h,e,i)))}return 0!=(1&s)},p.geom.getInvalidMinMax=function(){return[[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY]]},p.geom.loadPathMinMax=function(t,e){for(var i,n=t.length,o=0,s=0,r=0;r<n;r++)switch(i=t[r],i[0]){case 0:o=i[1],s=i[2],e||(e=[[o,s],[o,s]]);break;case 1:p.geom.lineMinMax(o,i[1],!0,e),p.geom.lineMinMax(s,i[2],!1,e),o=i[1],s=i[2];break;case 2:p.geom.quadMinMax(o,i[1],i[3],!0,e),p.geom.quadMinMax(s,i[2],i[4],!1,e),o=i[3],s=i[4];break;case 3:p.geom.cubeMinMax(o,i[1],i[3],i[5],!0,e),p.geom.cubeMinMax(s,i[2],i[4],i[6],!1,e),o=i[5],s=i[6]}return e},p.geom.rotRectHit=function(t,e,i){var n=e-t[0],o=i-t[1],s=Math.cos(t[4]),r=Math.sin(t[4]),a=-r,l=s;return Math.abs(n*s+o*r)<=t[2]/2&&Math.abs(n*a+o*l)<=t[3]/2},p.geom.loadRotRectMinMax=function(t,e){var i=Math.cos(t[4]),n=Math.sin(t[4]),o=(Math.abs(i*t[2])+Math.abs(n*t[3]))/2,s=(Math.abs(n*t[2])+Math.abs(i*t[3]))/2,r=t[0]-o,a=t[1]-s,l=t[0]+o,h=t[1]+s;return e?(e[0][0]=Math.min(r,e[0][0]),e[0][1]=Math.min(a,e[0][1]),e[1][0]=Math.max(l,e[1][0]),e[1][1]=Math.max(h,e[1][1])):e=[[r,a],[l,h]],e},p.ZList=function(t){this.head={next:null,prev:null,list:t,zi:0},this.iter=null},p.ZList.prototype.add=function(t){if(0===t.zi)return alert("illegal zindex"),!0;for(var e=this.head,i=null;e&&e.zi<t.zi;)i=e,e=e.next;if(e&&e.zi===t.zi)e.list.push(t);else{var n={next:e,prev:i,list:[t],zi:t[this.sortParam]};null!==i?i.next=n:this.head=n,null!==e&&(e.prev=n)}},p.ZList.prototype.remove=function(t,e){for(var i,n,o,s=this.head;s;){if(0!==s.zi)for(i=s.list,n=0;n<i.length;n++)if(o=i[n][e],t===o){var r=i[n];return i.splice(n,1),r}s=s.next}return null},p.ZList.prototype.start=function(){this.iter=this.head},p.ZList.prototype.currentList=function(){return this.iter?this.iter.list:null},p.ZList.prototype.currentZi=function(){return this.iter?this.iter.zi:null},p.ZList.prototype.next=function(){this.iter&&(this.iter=this.iter.next)},p.MapGUI=function(t){if(this.mapControl=t,this.outsideContainer=document.getElementById(p.mapName),!this.outsideContainer)return void alert("Map container not found");this.viewportElement=document.createElement("div"),this.viewportElement.setAttribute("id","micello-map"),this.viewportElement.mapTarget=!0,this.outsideContainer.innerHTML="",this.outsideContainer.appendChild(this.viewportElement),this.mapElement=document.createElement("div"),this.mapElement.setAttribute("class","map-panel"),this.mapElement.mapTarget=!0,p.MapGUI.detectTransformName(this.mapElement),this.viewportElement.appendChild(this.mapElement);var e=this;this.viewportElement.onmousedown=function(t){e.onMouseDown(t)},this.viewportElement.onmouseup=function(t){e.onMouseUp(t)},this.viewportElement.onmousemove=function(t){e.onMouseMove(t)},this.viewportElement.ontouchstart=function(t){e.onTouchStart(t)},this.viewportElement.ontouchmove=function(t){e.onTouchMove(t)},this.viewportElement.ontouchend=function(t){e.onTouchEnd(t)},this.viewportElement.ongesturestart=function(t){e.onGestureStart(t)},this.viewportElement.ongesturechange=function(t){e.onGestureChange(t)},this.viewportElement.ongestureend=function(t){e.onGestureEnd(t)},this.viewportElement.addEventListener("DOMMouseScroll",function(t){e.onMouseWheel(t)},!1),this.viewportElement.addEventListener("mousewheel",function(t){e.onMouseWheel(t)},!1),this.mapElement.transitionCallNumber=0,this.mapElement.transitionOn=function(t){this.transitionCallNumber++,this.style.WebkitTransition="top "+t+"s ease-out, left "+t+"s ease-out",this.style.setProperty("-webkit-transition","top "+t+"s ease-out, left "+t+"s ease-out"),this.style.setProperty("-moz-transition","top "+t+"s ease-out, left "+t+"s ease-out"),this.style.setProperty("-o-transition","top "+t+"s ease-out, left "+t+"s ease-out")},this.mapElement.transitionOff=function(){this.transitionCallNumber--,this.transitionCallNumber||(this.style.WebkitTransition="",this.style.setProperty("-webkit-transition",""),this.style.setProperty("-moz-transition",""),this.style.setProperty("-o-transition",""))},document.onkeydown=function(t){e.onKeyDown(t)},document.onkeyup=function(t){e.onKeyUp(t)},window.onresize=function(){e.onResize()},this.UI_FONT="HelveticaNeue-Light",this.UI_FONT_FALLBACK="helvetica",this.ui=document.createElement("div"),this.ui.setAttribute("id","ui-all"),this.ui.style.fontFamily=this.UI_FONT,this.ui.onmousemove=function(t){e.conditionalUI()},this.ui.addEventListener("DOMMouseScroll",function(t){e.onMouseWheel(t)},!1),this.ui.addEventListener("mousewheel",function(t){e.onMouseWheel(t)},!1),this.viewportElement.appendChild(this.ui),this.UISections=[],this.grid=new Array("left top","left center","left bottom","center top","center center","center bottom","right top","right center","right bottom"),this.gridDefaults=[],this.gridDefaults.name="left top",this.gridDefaults.levels="left top",this.gridDefaults.zoom="center bottom",this.gridDefaults.attribution="left bottom",this.gridDefaults.compass="right top",this.gridDefaults.geo="right bottom",this.ui.name=null,this.NAME_VIEW="conditional",this.NAME_POSITION=this.gridDefaults.name,this.ui.drawings={},this.DRAWING_COLOR="#909090",this.DRAWING_BG="#ffffff",this.DRAWING_ACTIVE_BG="#006bb7",this.DRAWING_ACTIVE_COLOR="#ffffff",this.DRAWING_HOVER_BG="#f5f4f4",this.DRAWING_HOVER_COLOR="#909090",this.ui.zoom=null,this.ZOOM_VIEW="conditional",this.ZOOM_POSITION=this.gridDefaults.zoom,this.ui.levels=null,this.LEVELS_VIEW="conditional",this.LEVELS_POSITION=this.gridDefaults.levels,this.LEVELS_COLOR="#909090",this.LEVELS_BG="#ffffff",this.LEVELS_BG_ACTIVE="#006bb7",this.LEVELS_ACTIVE_COLOR="#fff",this.LEVELS_HOVER_BG_COLOR="#f5f4f4",this.LEVELS_HOVER_COLOR="#909090",this.ui.geo=null,this.GEO_VIEW=!1,this.GEO_SCALE_WIDTH=55,this.GEO_UNITS="standard",this.GEO_POSITION=this.gridDefaults.geo,this.GEO_UNITS_TOGGLE="on",this.GEO_ORIENT_TOGGLE="on",this.ui.attribution=null,this.ATTRIBUTION_POSITION=this.gridDefaults.attribution,this.ui.reg={},this.backButton=null,this.backActive=!1,this.createMouseShield(),this.startX=0,this.startY=0,this.moveX=0,this.moveY=0,this.startPan=!1,this.startZoom=!1,this.startTarget=null,this.moved=!1,this.lastTouch=null,this.conditionalAction=null,this.fadeInterval=[],this.fadeItems=[],this.heightMarker=[],this.widthMarker=[],this.data=null,this.view=null,this.mapCanvas=null},p.MapGUI.MOVE_LIMIT=2,p.MapGUI.CONTROL_ZINDEX=101,p.MapGUI.POPUP_ZINDEX=110,p.MapGUI.MIN_THRESHOLD=400,p.MapGUI.transformName=null,p.MapGUI.originTransformName=null,p.MapGUI.detectTransformName=function(t){return t.style.webkitTransform="scale(1.0)",t.style.cssText.search("-transform")>=0?(p.MapGUI.setCssScale=p.MapGUI.setWebkitCssScale,void(p.MapGUI.setCssOrigin=p.MapGUI.setWebkitCssOrigin)):""==t.style.MozTransform?(p.MapGUI.setCssScale=p.MapGUI.setMozCssScale,void(p.MapGUI.setCssOrigin=p.MapGUI.setMozCssOrigin)):(t.style.msTransform="scale(1.0)",t.style.cssText.search("transform")>=0?(p.MapGUI.setCssScale=p.MapGUI.setMsCssScale,void(p.MapGUI.setCssOrigin=p.MapGUI.setMsCssOrigin)):void 0)},p.MapGUI.prototype.onResize=function(){var t=this.viewportElement.offsetWidth,e=this.viewportElement.offsetHeight;this.mapCanvas.lastViewportHeight==e&&this.mapCanvas.lastViewportWidth==t||this.mapCanvas.drawMap();var i=this.data.getCurrentDrawing();this.createUI(i);var n=this.data.getCurrentLevel();this.UILevelsCorrection(n)},p.MapGUI.prototype.onMouseDown=function(t){var e=t.target;e&&e.mapTarget&&(t.cancelBubble=!0,t.stopPropogation&&t.stopPropogation(),this.view&&(this.startTarget=e,this.shield.style.visibility="visible",this.startX=t.pageX,this.startY=t.pageY,this.startPan=!0,this.startZoom=!1,this.moveX=0,this.moveY=0,this.fadeOut("ui-drawings")))},p.MapGUI.prototype.onMouseUp=function(t){u=null;var e=t.target;e&&e.mapTarget&&(t.cancelBubble=!0,t.stopPropogation&&t.stopPropogation(),this.shield.style.visibility="hidden",Math.abs(this.moveX)<=p.MapGUI.MOVE_LIMIT&&Math.abs(this.moveY)<=p.MapGUI.MOVE_LIMIT&&(u=this.startTarget,this.fireMouseClick()),this.startPan=!1,this.startZoom=!1,this.moved=!1,this.startTarget=null)},p.MapGUI.prototype.onMouseOut=function(t){var e=t.target;e&&e.mapTarget&&(t.cancelBubble=!0,t.stopPropogation&&t.stopPropogation(),this.moved&&(this.startPan=!1,this.moved=!1))},p.MapGUI.prototype.onMouseMove=function(t){var e=t.target;e&&e.mapTarget&&(t.cancelBubble=!0,t.stopPropogation&&t.stopPropogation(),this.startPan&&(this.view.translate(t.pageX-this.startX,t.pageY-this.startY),this.moveX+=t.pageX-this.startX,this.moveY+=t.pageY-this.startY,this.startX=t.pageX,this.startY=t.pageY,this.moved=!0),this.conditionalUI())},p.MapGUI.prototype.onTouchStart=function(t){var e,i=!0;for(e=0;e<t.touches.length;e++)t.touches[e].target&&t.touches[e].target.mapTarget||(i=!1);if(1==t.touches.length){if(!i)return this.startPan=!1,void(this.startZoom=!1);t.preventDefault(),this.startPan=!0,this.startZoom=!1,this.startX=t.touches[0].clientX,this.startY=t.touches[0].clientY,this.moveX=0,this.moveY=0,this.startTarget=t.touches[0].target,this.moved=!1}else 2==t.touches.length&&i?(this.startPan=!1,this.startZoom=!0,this.startX=(t.touches[0].clientX+t.touches[1].clientX)/2,this.startY=(t.touches[0].clientY+t.touches[1].clientY)/2,this.moved=!1):(this.startPan=!1,this.startZoom=!1);mapGui.fadeOut("ui-drawings"),this.conditionalUI()},p.MapGUI.prototype.onTouchMove=function(t){if(this.startPan&&1==t.touches.length){t.preventDefault();var e=t.touches[0].clientX-this.startX,i=t.touches[0].clientY-this.startY;this.view.translate(e,i),this.moveX+=e,this.moveY+=i,this.startX=t.touches[0].clientX,this.startY=t.touches[0].clientY,this.moved=!0,this.conditionalUI()}},p.MapGUI.prototype.onTouchEnd=function(t){if(!(t.touches.length>0)){t.preventDefault();var e=this;if(u=this.startTarget,this.startPan&&Math.abs(this.moveX)<=p.MapGUI.MOVE_LIMIT&&Math.abs(this.moveY)<=p.MapGUI.MOVE_LIMIT){var i=(new Date).getTime();delta=i-this.lastTouch,delta<150&&delta>0?(this.zoomIn(),clearTimeout(action)):(this.lastTouch=i,action=setTimeout(function(t){e.fireMouseClick(),clearTimeout(action)},150))}this.startPan=!1,this.moved=!1,this.startTarget=null,this.lastTouch=i,this.conditionalUI()}},p.MapGUI.prototype.onTouchCancel=function(t){t.preventDefault(),this.startPan=!1,this.moved=!1},p.MapGUI.prototype.onGestureStart=function(t){this.startZoom&&t.preventDefault(),this.conditionalUI()},p.MapGUI.prototype.onGestureChange=function(t){if(this.startZoom){t.preventDefault();for(var e=t.scale,i=this.startX,n=this.startY,o=this.mapElement;null!=o;o=o.offsetParent)i-=o.offsetLeft,n-=o.offsetTop;var s=100*i/this.mapElement.clientWidth,r=100*n/this.mapElement.clientHeight;p.MapGUI.setCssOrigin(this.mapElement,s,r),p.MapGUI.setCssScale(this.mapElement,e)}this.conditionalUI()},p.MapGUI.prototype.onGestureEnd=function(t){if(this.startZoom){this.startZoom=!1;for(var e=0,i=0,n=this.mapElement;null!=n;n=n.offsetParent)e+=n.offsetLeft,i+=n.offsetTop;zoomScale=t.scale*this.view.getZoom(),this.zoomEnhancement(this.startX-e,this.startY-i,zoomScale,!1),this.view.setZoom(zoomScale,this.startX-e,this.startY-i),this.conditionalUI()}},p.MapGUI.prototype.onKeyDown=function(t){switch(t.keyCode){case 187:t.preventDefault(),this.zoomIn();break;case 189:t.preventDefault(),this.zoomOut();break;case 40:t.preventDefault(),this.view.translate(0,-15);break;case 39:t.preventDefault(),this.view.translate(-15,0);break;case 38:t.preventDefault(),this.view.translate(0,15);break;case 37:t.preventDefault(),this.view.translate(15,0)}},p.MapGUI.prototype.onKeyUp=function(t){},p.MapGUI.prototype.onMouseWheel=function(t){var e=t.target;if("ui-drawings-list"!=e.parentElement.id&&"ui_drawing"!=e.parentElement.className&&"ui_drawing_name"!=e.parentElement.className&&"ui-drawings"!=e.id&&"ui-drawings-container"!=e.id||mapGui.ui.drwLst.onMouseWheel(t),"ui-levels-scroll-container"!=e.id&&"ui-levels-scroll-button"!=e.id&&"ui_levels_floor"!=e.className&&"ui_levels_floor_name"!=e.className&&"ui_levels_floor_name"!=e.parentElement.className&&"ui-levels-floors-wrapper"!=e.id||mapGui.ui.levelsFlrs.onMouseWheel(t),e&&e.mapTarget){t.preventDefault(),t.detail&&(t.wheelDelta=-t.detail/3);var i=this.view.getZoom(),n=0;n=t.wheelDelta>0?i+.7:i-.7;for(var o=0,s=0,r=this.mapElement;null!=r;r=r.offsetParent)o+=r.offsetLeft,s+=r.offsetTop;this.zoomEnhancement(t.clientX-o,t.clientY-s,n,!1),this.view.setZoom(n,t.clientX-o,t.clientY-s),this.conditionalUI()}},p.MapGUI.prototype.zoomEnhancement=function(t,e,i,n){if(this.NAME_ENTITY_ENHANCEMENT="off","off"!=this.NAME_ENTITY_ENHANCEMENT){var o=this.view.canvasToMapX(t,e),s=this.view.canvasToMapY(t,e),r=this.data.getCurrentLevel(),a=this.data.getCurrentDrawing(),l=this.data.getCommunity();if(geomClick=this.mapCanvas.hitCheck(r.g,o,s),"off"!=this.NAME_VIEW&&(geomClick&&geomClick.nm?this.ui.name.innerHTML=a.nm+'<div id="ui-entity-enhancement">'+geomClick.nm+"</div>":this.ui.name.innerHTML=a.nm),n&&geomClick&&i>10&&geomClick.did)for(var h=0;h<l.d.length;h++)l.d[h].id==geomClick.did&&(this.view.setZoom(2,t,e),mapGui.setDrawing(l.d[h]))}},p.MapGUI.prototype.fireMouseClick=function(){var t=0,e=0;this.startTarget=u;for(var i=this.mapElement;null!=i;i=i.offsetParent)t+=i.offsetLeft,e+=i.offsetTop;var n;this.startTarget&&(n=this.startTarget.mapObject),this.mapCanvas&&this.mapCanvas.clickMouse(this.startX-t,this.startY-e,n)},p.MapGUI.prototype.zoomIn=function(){if(this.view){console.log(1);var t=this.viewportElement.offsetWidth/2-this.view.mapXInViewport,e=this.viewportElement.offsetHeight/2-this.view.mapYInViewport,i=this.view.getZoom();this.zoomEnhancement(t,e,i,!1),this.view.zoomIn()}},p.MapGUI.prototype.zoomOut=function(){if(this.view){var t=this.viewportElement.offsetWidth/2-this.view.mapXInViewport,e=this.viewportElement.offsetHeight/2-this.view.mapYInViewport,i=this.view.getZoom();this.zoomEnhancement(t,e,i,!1),this.view.zoomOut()}},p.MapGUI.prototype.setLevel=function(t){this.data&&this.data.setLevel(t)},p.MapGUI.prototype.setDrawing=function(t){this.data&&t!=this.data.getCurrentDrawing()&&this.data.setDrawing(t)},p.MapGUI.prototype.createMouseShield=function(){this.shield=document.createElement("div");for(var t=this.viewportElement;t.offsetParent;)t=t.offsetParent;t.appendChild(this.shield),this.shield.setAttribute("class","map-shield"),this.shield.mapTarget=!0;var e=this;this.shield.onmousedown=function(t){e.onMouseDown(t)},this.shield.onmouseup=function(t){e.onMouseUp(t)},this.shield.onmousemove=function(t){e.onMouseMove(t)},this.shield.onmouseout=function(t){e.onMouseOut(t)}},p.MapGUI.prototype.updateLevel=function(t){this.UILevelsCorrection(t)},p.MapGUI.prototype.updateDrawing=function(t){this.createUI(t)},p.MapGUI.prototype.closeCommunity=function(){this.destroyUI()},p.MapGUI.setCssScale=null,p.MapGUI.setCssOrigin=null,p.MapGUI.setWebkitCssScale=function(t,e){t.style.webkitTransform="scale("+e+")"},p.MapGUI.setMozCssScale=function(t,e){t.style.MozTransform="scale("+e+")"},p.MapGUI.setMsCssScale=function(t,e){t.style.msTransform="scale("+e+")"},p.MapGUI.setWebkitCssOrigin=function(t,e,i){t.style.webkitTransformOrigin=e+"% "+i+"%"},p.MapGUI.setMozCssOrigin=function(t,e,i){t.style.MozTransformOrigin=e+"% "+i+"%"},p.MapGUI.setMsCssOrigin=function(t,e,i){t.style.msTransformOrigin=e+"% "+i+"%"},p.MapGUI.prototype.createUI=function(t){var e=this.data.getCommunity();this.UISections=[],this.UIZoom(e),this.UILevels(t),this.UIGeo(t,e),this.determinePosition(),this.UIDrawings(t)},p.MapGUI.prototype.destroyUI=function(t){this.removeElement("ui-name"),this.removeElement("ui-drawings"),this.removeElement("ui-drawings-icon"),this.removeElement("ui-zoom"),this.removeElement("ui-levels"),this.removeElement("ui-attribution"),this.removeElement("ui-geo")},p.MapGUI.prototype.UIGeo=function(t,e){if(this.removeElement("ui-geo"),"on"!=this.GEO_VIEW&&"conditional"!=this.GEO_VIEW)return!1;if(this.ui.geo=document.createElement("div"),this.ui.geo.setAttribute("id","ui-geo"),this.ui.geo.className="ui_element",this.ui.geo.style.width="105px",this.ui.geo.style.fontFamily=this.UI_FONT+", "+this.UI_FONT_FALLBACK,this.determinePositionArraySetup("geo",this.GEO_POSITION,100,15),this.ui.appendChild(this.ui.geo),this.UIReg("ui-geo",this.GEO_VIEW),this.ui.map_scale=document.createElement("div"),this.ui.map_scale.setAttribute("id","ui_scale"),this.ui.map_scale.style.borderBottom="1px solid #999",this.ui.map_scale.style.position="absolute",this.ui.map_scale.style.bottom="4px",this.ui.map_scale.style.zIndex=p.MapGUI.CONTROL_ZINDEX+4,this.ui.map_scale_text=document.createElement("p"),this.ui.map_scale_text.setAttribute("id","ui-scale-text"),this.ui.map_scale_text.style.color="#999",this.ui.map_scale_text.style.fontWeight="bold",this.ui.map_scale_text.style.margin="0px",this.ui.map_scale_text.style.textAlign="center",this.updateMapScale(t),this.ui.map_scale.appendChild(this.ui.map_scale_text),this.ui.geo.appendChild(this.ui.map_scale),"on"==this.GEO_UNITS_TOGGLE){this.ui.map_scale.style.cursor="pointer";var i=this;changeUnits=function(){"standard"==i.GEO_UNITS?i.GEO_UNITS="metric":i.GEO_UNITS="standard",i.updateMapScale(t)},this.ui.map_scale.onclick=function(){changeUnits()},this.ui.map_scale.ontouchstart=function(t){t.preventDefault(),changeUnits()}}if(this.view.customView)return this.ui.geo.style.width="60px",!1;if("on"==this.GEO_ORIENT_TOGGLE){this.ui.compass.style.cursor="pointer",this.ui.compass.title="Change Orientation";var i=this,n=function(t,e){delete i.compassCache,e.northAtTop?e.northAtTop=!1:e.northAtTop=!0,t.setDrawing(t.currentDrawing,t.currentLevel.id)},o=this.data,s=this.mapControl.view;this.ui.compass.onclick=function(){n(o,s)},this.ui.compass.ontouchstart=function(t){t.preventDefault(),n(o,s)}}},p.MapGUI.prototype.updateMapScale=function(t){var e,i,n,o,s=0*t.t[1]+0*t.t[3]+t.t[5],r=0*t.t[0]+0*t.t[2]+t.t[4],a=t.t[1]*t.w+t.t[3]*t.h+t.t[5],l=t.t[0]*t.w+t.t[2]*t.h+t.t[4];switch(this.GEO_UNITS){case"standard":this.ui.map_scale.title="Switch to Metric",e=3959,n=5280,i="ft",o=[1,2,5,10,15,20,25,30,40,50,100,200,500];break;case"metric":this.ui.map_scale.title="Switch to Standard",e=6371,n=1e3,i="m",o=[1,3,5,10,20,30,40,50,100];break;default:e=3959,n=5280,i="ft",o=[1,2,5,10,15,20,25,30,40,50,100,200,500]}var h=Math.PI/180,u=(a-s)*h,p=(l-r)*h,c=s*h,d=a*h,f=Math.sin(u/2)*Math.sin(u/2)+Math.sin(p/2)*Math.sin(p/2)*Math.cos(c)*Math.cos(d),m=2*Math.atan2(Math.sqrt(f),Math.sqrt(1-f)),v=e*m,g=Math.sqrt(Math.pow(t.w,2)+Math.pow(t.h,2)),w=v/g/this.view.scale*this.GEO_SCALE_WIDTH*n,y=0;for(var f in o){if(!(w>o[f]))break;y=o[f]}0==y?this.ui.map_scale.style.display="none":(this.ui.map_scale.style.width=this.GEO_SCALE_WIDTH/(w/y)+"px",this.ui.map_scale_text.innerHTML=y+""+i)},p.MapGUI.prototype.UIDrawings=function(t){if("on"!=this.NAME_VIEW&&"conditional"!=this.NAME_VIEW)return this.ui.DRAWINGS_VIEW="off",!1;var e=this.data;if(r=this.data.getCommunity(),r.d.length<2)return this.ui.DRAWINGS_VIEW="off",!1;this.ui.HEIGHTINCREMENT_MAX=50,this.ui.HEIGHTINCREMENT_MIN=40;var i=this.viewportElement.clientHeight;mapGui=this;var n=this.ui;heightManager=0,heightIncrement=Math.round(.05*i),heightIncrement>this.ui.HEIGHTINCREMENT_MAX&&(heightIncrement=this.ui.HEIGHTINCREMENT_MAX),heightIncrement<this.ui.HEIGHTINCREMENT_MIN&&(heightIncrement=this.ui.HEIGHTINCREMENT_MIN),r.d.length>2?drwShow=3*heightIncrement:drwShow=2*heightIncrement,iconWidth=30,iconHeight=30,iconBuffer=iconWidth/2,lvlArwWdth=15,totalMoved=0,downSpace=this.availSpace(this.NAME_POSITION,"h"),widthSpace=this.availSpace(this.NAME_POSITION,"w");var s=!1;n=this.ui,this.ui.name.style.cursor="pointer",this.ui.name.style.height=iconHeight+"px",this.ui.drawings=document.createElement("div"),this.ui.drawings.setAttribute("id","ui-drawings"),this.ui.drawings.className="ui_element",this.ui.drawings.style.top=this.ui.name.offsetTop+iconHeight+.25*iconHeight+"px",this.ui.drawings.style.display="none",this.ui.drawings.style.fontFamily=this.UI_FONT+", "+this.UI_FONT_FALLBACK,this.ui.drwCtr=document.createElement("div"),this.ui.drwCtr.setAttribute("id","ui-drawings-container"),this.ui.drwCtr.className="roundTop roundBottom ",iconWidth+iconBuffer+this.ui.name.offsetWidth>this.viewportElement.clientWidth-widthSpace.taken?drwWidth=this.viewportElement.clientWidth-widthSpace.taken:drwWidth=this.ui.name.offsetWidth+iconWidth+iconBuffer-lvlArwWdth,this.ui.drawings.style.width=drwWidth+"px",this.ui.drawings.style.zIndex=p.MapGUI.CONTROL_ZINDEX+4,this.ui.drwCtr.style.width=drwWidth+"px",this.ui.drwCtr.style.zIndex=p.MapGUI.CONTROL_ZINDEX+4,drwLstWidth=drwWidth+"px",this.ui.drwLst=document.createElement("div"),this.ui.drwLst.setAttribute("id","ui-drawings-list"),this.ui.drwLst.style.width=drwLstWidth,this.ui.drwLst.style.zIndex=p.MapGUI.CONTROL_ZINDEX+3;var r;this.ui.drwLstEventHandler=function(t){r=e.getCommunity();for(var i=0;i<r.d.length;i++)t==r.d[i].id&&(mapGui.fadeOut("ui-drawings"),mapGui.setDrawing(r.d[i]))},drwLstClkEventHandler=function(t){return function(){n.drwLstEventHandler(t)}},drawingItem=null;for(var a=0;a<r.d.length;a++)drawingItem=document.createElement("div"),drawingItem.setAttribute("id","ui-drawings-"+r.d[a].id),drawingItem.setAttribute("drawing",r.d[a].id),drawingItem.className="ui_drawing",drawingItem.style.zIndex=p.MapGUI.CONTROL_ZINDEX+2,drawingItem.style.height=heightIncrement+"px",drawingItem.style.top=heightManager+"px",heightManager+=heightIncrement,drawingItem.style.left=0,drawingItem.style.width=drwLstWidth,drawingItem.style.borderBottom="1px solid #999",t.id==r.d[a].id?(drawingItem.style.backgroundColor=this.DRAWING_ACTIVE_BG,drawingItem.style.color=this.DRAWING_ACTIVE_COLOR):(drawingItem.style.backgroundColor=this.DRAWING_BG,drawingItem.style.color=this.DRAWING_COLOR,drawingItem.onmouseover=function(t){this.style.backgroundColor=mapGui.DRAWING_HOVER_BG,this.style.color=mapGui.DRAWING_HOVER_COLOR},drawingItem.onmouseout=function(t){this.style.backgroundColor=mapGui.DRAWING_BG,this.style.color=mapGui.DRAWING_COLOR}),drawingName=document.createElement("div"),drawingName.style.zIndex=p.MapGUI.CONTROL_ZINDEX+1,drawingName.setAttribute("drawing",r.d[a].id),drawingName.innerHTML=r.d[a].nm,drawingName.className="ui_drawing_name",drawingName.style.top=heightIncrement/4+"px",drawingName.style.left="3px",drawingItem.appendChild(drawingName),drawingItem.onclick=drwLstClkEventHandler(r.d[a].id),this.ui.drwLst.appendChild(drawingItem);this.ui.drawings.style.height=drwShow+heightIncrement+"px",this.ui.drwCtr.style.height=drwShow+"px",this.ui.drwLst.style.height=heightManager+"px",this.ui.drawings.style.fontSize=this.ui.name.style.fontSize,this.ui.drawings.appendChild(this.ui.drwLst),this.ui.appendChild(this.ui.drawings),this.ui.drwIcn=document.createElement("div"),this.ui.drwIcn.setAttribute("id","ui-drawings-icon"),this.ui.drwIcn.style.border="1px solid #999",this.ui.drwIcn.style.backgroundColor="#fff",this.ui.drwIcn.style.width=iconWidth+"px",this.ui.drwIcn.style.height=iconHeight+"px",this.ui.drwIcn.className="ui_element",this.ui.drwIcnImg=document.createElement("img"),this.ui.drwIcnImg.src=o("resources/drawingsIcon.png"),this.ui.drwIcnImg.style.width="50%",this.ui.drwIcnImg.style.height="50%",this.ui.drwIcnImg.style.position="absolute",this.ui.drwIcnImg.style.top=iconHeight/2.8+"px",this.ui.drwIcnImg.style.left=iconWidth/3.9+"px",this.ui.drwIcn.appendChild(this.ui.drwIcnImg),drwLstSetHandler=function(){return function(){mapGui.fadeIn("ui-drawings")}},drwAction=setTimeout(function(t){mapGui.ui.drwIcn.ontouchend=drwLstSetHandler(),mapGui.ui.name.ontouchend=drwLstSetHandler(),mapGui.ui.name.onmouseover=drwLstSetHandler(),mapGui.ui.drwIcn.onmouseover=drwLstSetHandler(),clearTimeout(drwAction)},200),this.ui.drwIcn.style.top=this.ui.name.style.top,"left top"==this.NAME_POSITION&&(this.ui.drwIcn.style.left=this.ui.name.offsetLeft+"px",this.ui.drawings.style.left=this.ui.name.offsetLeft+"px",this.ui.name.style.left=this.ui.name.offsetLeft+(iconWidth+iconBuffer)+"px",this.ui.name.offsetWidth+iconWidth+iconBuffer>this.viewportElement.clientWidth-widthSpace.taken&&(this.ui.name.style.width=this.viewportElement.clientWidth-widthSpace.taken-.025*this.viewportElement.clientWidth-(iconWidth+iconBuffer)+"px",this.ui.nameTxt.style.width=this.ui.name.style.width,this.ui.name.style.whiteSpace="")),"right top"==this.NAME_POSITION&&(this.ui.name.style.left=this.ui.name.offsetLeft-(iconWidth+iconBuffer)+"px",this.ui.drawings.style.left=this.ui.name.offsetLeft+"px",this.ui.drwIcn.style.left=this.ui.name.offsetLeft+this.ui.name.offsetWidth+iconBuffer+"px",this.ui.name.offsetWidth+iconWidth+iconBuffer>this.viewportElement.clientWidth-widthSpace.taken&&(this.ui.name.style.width=this.viewportElement.clientWidth-widthSpace.taken-.025*this.viewportElement.clientWidth-(iconWidth+iconBuffer)+"px",this.ui.nameTxt.style.width=this.ui.name.style.width,this.ui.name.style.left=widthSpace.taken+"px",this.ui.drawings.style.left=widthSpace.taken+"px",this.ui.drawings.style.width=this.ui.name.offsetWidth+iconWidth+"px",this.ui.drwIcn.style.left=this.ui.name.offsetLeft+this.ui.name.offsetWidth+iconBuffer+"px",this.ui.name.style.whiteSpace=""),this.ui.drwCtr.style.left=lvlArwWdth+"px",this.ui.drwLst.style.width=this.ui.drawings.style.width,this.ui.drwCtr.style.width=this.ui.drawings.style.width),this.ui.drwLst.ondragstart=function(){return!1},this.ui.drwLst.onMouseWheel=function(t){t.preventDefault(),n=mapGui.ui,t.detail&&(t.wheelDelta=-t.detail/3),t.wheelDelta<0?newScale=n.drwLst.offsetTop-heightIncrement/2:newScale=n.drwLst.offsetTop+heightIncrement/2,n.drwLst.style.left=0,n.drwLst.style.top=newScale+"px",mapGui.UIDrawingListContain(n),mapGui.UIDrawingArrowToggle(),mapGui.conditionalUI()},viewportElement=this.viewportElement,this.ui.drawings.ontouchstart=function(t){t.preventDefault(),t.stopPropagation(),startPos=t.touches[0].pageY,s=!0,totalMoved=0},this.ui.drawings.ontouchmove=function(t){if(1==t.touches.length){t.preventDefault();var e=t.touches[0];n.drwLst.style.left=0,fingerMoved=startPos-e.pageY,totalMoved+=fingerMoved,startPos=e.pageY,n.drwLst.style.top=n.drwLst.offsetTop-fingerMoved+"px",mapGui.UIDrawingListContain(n),mapGui.UIDrawingArrowToggle(),mapGui.conditionalUI()}},this.ui.drawings.ontouchend=function(t){if(s&&Math.abs(totalMoved)<=p.MapGUI.MOVE_LIMIT){var e=t.target.getAttribute("drawing");e&&n.drwLstEventHandler(e)}s=!1},this.ui.drawings.appendChild(this.ui.drwCtr),this.ui.drwCtr.appendChild(this.ui.drwLst),this.ui.appendChild(this.ui.drwIcn),this.ui.nameTxt.innerHTML=t.nm,this.ui.drawings.currDraw=t.id,this.UIDrawingArrow(),this.UIReg("ui-drawings-icon",this.NAME_VIEW),"conditional"==this.NAME_VIEW&&this.UIReg("ui-drawings","conditional_hidden")},p.MapGUI.prototype.UIDrawingListContain=function(t){t.drwLst.offsetTop>0&&(t.drwLst.style.top="0px"),t.drwLst.offsetTop+t.drwLst.offsetHeight<=t.drwCtr.offsetTop+t.drwCtr.offsetHeight&&(t.drwLst.style.top=t.drwCtr.offsetTop+t.drwCtr.offsetHeight-t.drwLst.offsetHeight+"px")},p.MapGUI.prototype.UIDrawingArrow=function(){mapGui=this,ui=this.ui,this.ui.drwArwUp=document.createElement("div"),this.ui.drwArwUp.setAttribute("id","ui-drawings-arrow-up"),this.ui.drwArwUp.style.width=lvlArwWdth+"px",this.ui.drwArwUp.style.top="0px","right top"==this.NAME_POSITION?this.ui.drwArwUp.style.left="0px":this.ui.drwArwUp.style.left=drwWidth+"px",this.ui.drwArwUp.style.height="40px",this.ui.drwArwUp.style.display="none",this.ui.drwArwUp.style.zIndex=p.MapGUI.CONTROL_ZINDEX+6,this.ui.drawings.appendChild(this.ui.drwArwUp),this.ui.drwArwUpImg=document.createElement("img"),this.ui.drwArwUpImg.src=o("resources/arrowUp.png"),this.ui.drwArwUpImg.style.width="60%",this.ui.drwArwUpImg.style.position="absolute",this.ui.drwArwUpImg.style.top="0px",this.ui.drwArwUpImg.style.left="5px",this.ui.drwArwUp.appendChild(this.ui.drwArwUpImg),this.ui.drwArwUp.onclick=function(t){newScale=ui.drwLst.offsetTop+heightIncrement/2,ui.drwLst.style.left=0,ui.drwLst.style.top=newScale+"px",mapGui.UIDrawingListContain(ui),mapGui.UIDrawingArrowToggle()},this.ui.drwArwDn=document.createElement("div"),this.ui.drwArwDn.setAttribute("id","ui-drawings-arrow-down"),this.ui.drwArwDn.style.width=lvlArwWdth+"px",this.ui.drwArwDn.style.top=drwShow-20+"px","right top"==this.NAME_POSITION?this.ui.drwArwDn.style.left="0px":this.ui.drwArwDn.style.left=drwWidth+"px",this.ui.drwArwDn.style.height="40px",this.ui.drwArwDn.style.display="none",this.ui.drwArwDn.style.zIndex=p.MapGUI.CONTROL_ZINDEX+6,this.ui.drawings.appendChild(this.ui.drwArwDn),this.ui.drwArwDnImg=document.createElement("img"),this.ui.drwArwDnImg.src=o("resources/arrowDwn.png"),this.ui.drwArwDnImg.style.width="60%",this.ui.drwArwDnImg.style.height="60%",this.ui.drwArwDnImg.style.position="absolute",this.ui.drwArwDnImg.style.top="0px",this.ui.drwArwDnImg.style.left="5px",this.ui.drwArwDn.appendChild(this.ui.drwArwDnImg),this.ui.drwArwDn.onclick=function(t){newScale=ui.drwLst.offsetTop-heightIncrement/2,
ui.drwLst.style.left=0,ui.drwLst.style.top=newScale+"px",mapGui.UIDrawingListContain(ui),mapGui.UIDrawingArrowToggle()},this.UIDrawingArrowToggle()},p.MapGUI.prototype.UIDrawingArrowToggle=function(){mapGui=this,heightManager>drwShow&&this.ui.drwLst.offsetTop+heightManager!=this.ui.drwCtr.offsetTop+this.ui.drwCtr.offsetHeight?this.UIDrawingCond=setTimeout(function(t){mapGui.fadeIn("ui-drawings-arrow-down"),clearTimeout(mapGui.UIDrawingCond)},750):this.UIDrawingCond=setTimeout(function(t){mapGui.fadeOut("ui-drawings-arrow-down"),clearTimeout(mapGui.UIDrawingCond)},750),this.ui.drwLst.offsetTop<0?this.UIDrawingCond=setTimeout(function(t){mapGui.fadeIn("ui-drawings-arrow-up"),clearTimeout(mapGui.UIDrawingCond)},750):this.UIDrawingCond=setTimeout(function(t){mapGui.fadeOut("ui-drawings-arrow-up"),clearTimeout(mapGui.UIDrawingCond)},750)},p.MapGUI.prototype.UIZoom=function(t){var e=this;if(this.removeElement("ui-zoom"),"on"!=this.ZOOM_VIEW&&"conditional"!=this.ZOOM_VIEW)return!1;var i=this.ui;return i.zoom=document.createElement("div"),i.zoom.setAttribute("id","ui-zoom"),i.zoom.className="ui_element",i.zmIn=document.createElement("div"),i.zmIn.setAttribute("id","ui-zoom-in"),i.zmIn.style.overflow="hidden",i.zmIn.innerHTML="+",i.zoom.appendChild(this.ui.zmIn),i.zmOut=document.createElement("div"),i.zmOut.setAttribute("id","ui-zoom-out"),i.zmOut.innerHTML="-",i.zoom.appendChild(this.ui.zmOut),i.zmIn.onclick=function(t){e.zoomIn()},i.zmIn.ontouchstart=function(t){t.preventDefault()},i.zmIn.ontouchend=function(t){t.preventDefault(),e.zoomIn()},i.zmOut.onclick=function(t){e.zoomOut()},i.zmOut.ontouchstart=function(t){t.preventDefault()},i.zmOut.ontouchend=function(t){t.preventDefault(),e.zoomOut()},i.appendChild(this.ui.zoom),this.UIReg("ui-zoom",this.ZOOM_VIEW),!0},p.MapGUI.prototype.UILevels=function(t){if(this.removeElement("ui-levels"),1!=t.l.length){if("on"!=this.LEVELS_VIEW&&"conditional"!=this.LEVELS_VIEW)return!1;community=this.data.getCommunity(),this.ui.levels=document.createElement("div"),this.ui.levels.setAttribute("id","ui-levels"),this.ui.levels.className="ui_element",this.ui.levels.style.fontFamily=this.UI_FONT+", "+this.UI_FONT_FALLBACK;var e=this.ui;this.UILevelsLarge(t,e),this.determinePositionArraySetup("levels",this.LEVELS_POSITION,200,15),this.ui.appendChild(this.ui.levels),this.UIReg("ui-levels",this.LEVELS_VIEW)}},p.MapGUI.prototype.UILevelsContain=function(){this.ui.levelsFlrs.offsetTop>0&&(this.ui.levelsFlrs.style.top="0px"),this.ui.levelsFlrs.offsetTop+this.ui.levelsFlrs.offsetHeight<=this.ui.levelsWrp.offsetTop+this.ui.levelsWrp.offsetHeight&&(this.ui.levelsFlrs.style.top=this.ui.levelsWrp.offsetTop+this.ui.levelsWrp.offsetHeight-this.ui.levelsFlrs.offsetHeight+"px")},p.MapGUI.prototype.UILevelsCorrection=function(t){var e=this;if("on"!=this.LEVELS_VIEW&&"conditional"!=this.LEVELS_VIEW)return!1;if(!this.ui.levels)return!1;var i,n=this.viewportElement.clientHeight,o=this.ui.levels.offsetTop,s=this.ui.levels.offsetHeight;for(nodeList=document.getElementsByClassName("ui_levels_floor"),cnt=0;cnt<nodeList.length;cnt++)nodeList[cnt].style.backgroundColor=e.LEVELS_BG,nodeList[cnt].style.color=e.LEVELS_COLOR,e.addClass(nodeList[cnt],"ui_levels_unselected");element=document.getElementById("ui-levels-floor-"+t.id),element&&(e.removeClass(element,"ui_levels_unselected"),element.style.backgroundColor=e.LEVELS_BG_ACTIVE,element.style.color=e.LEVELS_ACTIVE_COLOR),i=this.availSpace(this.LEVELS_POSITION,"h");var r=n-o-(i.taken+.9*i.taken);r<2*floorHeight&&(r=2*floorHeight),s>r&&(lvlFlrH=r,this.ui.levels.style.height=lvlFlrH+"px",this.ui.levels.style.height=lvlFlrH+"px",this.ui.levelsCtr.style.height=lvlFlrH+"px",this.ui.levelsWrp.style.height=lvlFlrH+"px",this.ui.lvlArwDn.style.top=lvlFlrH-20+"px",this.UILevelArrowToggleCond=setTimeout(function(t){e.UILevelArrowToggle(),clearTimeout(e.UILevelArrowToggleCond)},1e3))},p.MapGUI.prototype.UILevelsLarge=function(t,e){e.LEVELS_V_MAX_WIDTH=50,e.LEVELS_V_MAX_HEIGHT=250,e.LEVELS_V_MIN_WIDTH=50,e.LEVELS_V_MIN_HEIGHT=150;var i=this.viewportElement.clientHeight,n=.45*i,o=0;for(n>e.LEVELS_V_MAX_HEIGHT&&(n=e.LEVELS_V_MAX_HEIGHT),n<e.LEVELS_V_MIN_HEIGHT&&(n=e.LEVELS_V_MIN_HEIGHT),o=n/4,o>e.LEVELS_V_MAX_WIDTH&&(o=e.LEVELS_V_MAX_WIDTH),o<e.LEVELS_V_MIN_WIDTH&&(o=e.LEVELS_V_MIN_WIDTH),floorHeight=35,floorHeightManager=0,lvlFlrH=floorHeight*t.l.length,lvlWidth=30,lvlWrpWidth=lvlWidth,lvlStartScroll=!1,startLvlScroll=!1,lvlClick=!1,lvlBtnScroll=!1,arwWdth=15,mapGui=this,mapData=this.data,nameShortened=null,e=this.ui,e.levels.style.width=o+"px",e.levels.style.zIndex=p.MapGUI.CONTROL_ZINDEX+1,e.levelsCtr=document.createElement("div"),e.levelsCtr.setAttribute("id","ui-levels-floors-container"),e.levelsCtr.style.width=lvlWrpWidth+"px",e.levels.appendChild(e.levelsCtr),e.levelsWrp=document.createElement("div"),e.levelsWrp.setAttribute("id","ui-levels-floors-wrapper"),e.levelsWrp.style.width=lvlWrpWidth+"px",e.levelsWrp.className+=" roundTop roundBottom","right top"==this.LEVELS_POSITION?e.levelsWrp.style.left=arwWdth+"px":e.levelsWrp.style.left="0px",e.levelsWrp.style.border="1px solid "+this.LEVELS_COLOR,e.levels.appendChild(e.levelsWrp),e.levelsFlrs=document.createElement("div"),e.levelsFlrs.setAttribute("id","ui-levels-floors"),e.levelsFlrs.style.color=this.LEVELS_COLOR,e.levelsFlrs.style.width=lvlWrpWidth+"px",e.levelsFlrs.style.left=0,e.levelsFlrs.style.top=0,e.levelsFlrs.style.zIndex=p.MapGUI.CONTROL_ZINDEX+2,e.levelsWrp.appendChild(e.levelsFlrs),e.lvlLstEventHandler=function(t){for(nodeList=document.getElementsByClassName("ui_levels_floor"),cnt=0;cnt<nodeList.length;cnt++)nodeList[cnt].style.backgroundColor=mapGui.LEVELS_BG,nodeList[cnt].style.color=mapGui.LEVELS_COLOR,mapGui.addClass(nodeList[cnt],"ui_levels_unselected");for(currDraw=mapData.getCurrentDrawing(),cnt=0;cnt<currDraw.l.length;cnt++)element=document.getElementById("ui-levels-floor-"+t),currDraw.l[cnt].id==t&&(mapGui.setLevel(currDraw.l[cnt]),mapGui.removeClass(element,"ui_levels_unselected"),element.style.backgroundColor=mapGui.LEVELS_BG_ACTIVE,element.style.color=mapGui.LEVELS_ACTIVE_COLOR)},lvlListClckEventHandler=function(t){return function(){e.lvlLstEventHandler(t)}},cnt=t.l.length-1;cnt>=0;cnt--)floor=document.createElement("div"),floor.setAttribute("id","ui-levels-floor-"+t.l[cnt].id),floor.setAttribute("level",t.l[cnt].id),floor.className="ui_levels_floor ui_levels_unselected",floor.style.height=floorHeight+"px",floor.style.top=floorHeightManager+"px",floor.style.backgroundColor=this.LEVELS_BG,floorHeightManager+=floorHeight,floor.style.width=lvlWrpWidth+"px",cnt!=t.l.length-1&&(floor.style.borderTop="1px solid #f2f2f2"),floor.onclick=lvlListClckEventHandler(t.l[cnt].id),floor.onmouseover=function(t){mapGui.hasClass(this,"ui_levels_unselected")&&(this.style.backgroundColor=mapGui.LEVELS_HOVER_BG_COLOR,this.style.color=mapGui.LEVELS_HOVER_COLOR)},floor.onmouseout=function(t){mapGui.hasClass(this,"ui_levels_unselected")&&(this.style.backgroundColor=mapGui.LEVELS_BG,this.style.color=mapGui.LEVELS_COLOR)},floor.style.zIndex=p.MapGUI.CONTROL_ZINDEX+3,floorName=document.createElement("div"),floorName.setAttribute("id","ui-levels-floor-"+t.l[cnt].id),floorName.setAttribute("level",t.l[cnt].id),floorName.className="ui_levels_floor_name",floorName.style.fontSize=.6*lvlWrpWidth+"px",nameShortened=t.l[cnt].nm.substring(0,2),floorName.innerHTML=nameShortened,1==nameShortened.length&&(floorName.style.left=.3*lvlWrpWidth+"px"),2==nameShortened.length&&(floorName.style.left=.15*lvlWrpWidth+"px"),floorName.style.top=.25*floorHeight+"px",floorName.style.zIndex=p.MapGUI.CONTROL_ZINDEX+1,floor.appendChild(floorName),e.levelsFlrs.appendChild(floor);e.levels.style.height=lvlFlrH+"px",e.levelsCtr.style.height=lvlFlrH+"px",e.levelsFlrs.style.height=floorHeightManager+"px",e.levelsWrp.style.height=lvlFlrH+"px",e.levelsFlrs.onMouseWheel=function(t){t.preventDefault(),t.cancelBubble=!0,t.stopPropogation&&t.stopPropogation(),e=mapGui.ui,t.detail&&(t.wheelDelta=-t.detail/3),btnMove=floorHeight/floorHeightManager*100,t.wheelDelta<0?newLvlScale=e.levelsFlrs.offsetTop-btnMove:newLvlScale=e.levelsFlrs.offsetTop+btnMove,e.levelsFlrs.style.left=0,e.levelsFlrs.style.top=newLvlScale+"px",mapGui.UILevelsContain(),mapGui.UILevelArrowToggle(),mapGui.conditionalUI()},viewportElement=this.viewportElement,this.ui.levels.ontouchstart=function(t){t.preventDefault(),startLvlPos=t.touches[0].pageY,startLvlScroll=!0,totalMoved=0},this.ui.levels.ontouchmove=function(t){if(1==t.touches.length){t.preventDefault();var i=t.touches[0];e.levelsFlrs.style.left=0,1==startLvlScroll&&(fingerMoved=startLvlPos-i.pageY,totalMoved+=fingerMoved,startLvlPos=i.pageY,e.levelsFlrs.style.top=e.levelsFlrs.offsetTop-fingerMoved+"px",mapGui.UILevelsContain()),mapGui.UILevelArrowToggle(),mapGui.conditionalUI()}},this.ui.levels.ontouchend=function(t){if(startLvlScroll&&Math.abs(totalMoved)<=p.MapGUI.MOVE_LIMIT){var i=t.target.getAttribute("level");i&&e.lvlLstEventHandler(i)}startLvlScroll=!1},this.UILevelsArrow()},p.MapGUI.prototype.UILevelsArrow=function(){mapGui=this,ui=this.ui,this.ui.lvlArwUp=document.createElement("div"),this.ui.lvlArwUp.setAttribute("id","ui-levels-arrow-up"),this.ui.lvlArwUp.style.width=arwWdth+"px",this.ui.lvlArwUp.style.top="0px","left top"==this.LEVELS_POSITION?this.ui.lvlArwUp.style.left=1.1*lvlWidth+"px":this.ui.lvlArwUp.style.left="0px",this.ui.lvlArwUp.style.height="40px",this.ui.lvlArwUp.style.display="none",this.ui.lvlArwUp.style.zIndex=p.MapGUI.CONTROL_ZINDEX+6,this.ui.levels.appendChild(this.ui.lvlArwUp),this.ui.lvlArwUpImg=document.createElement("img"),this.ui.lvlArwUpImg.src=o("resources/arrowUp.png"),this.ui.lvlArwUpImg.style.width="60%",this.ui.lvlArwUpImg.style.position="absolute",this.ui.lvlArwUpImg.style.top="0px",this.ui.lvlArwUpImg.style.left="5px",this.ui.lvlArwUp.appendChild(this.ui.lvlArwUpImg),this.ui.lvlArwUp.onclick=function(t){newScale=ui.levelsFlrs.offsetTop+floorHeight/2,ui.levelsFlrs.style.left=0,ui.levelsFlrs.style.top=newScale+"px",mapGui.UILevelsContain(),mapGui.UILevelArrowToggle()},this.ui.lvlArwDn=document.createElement("div"),this.ui.lvlArwDn.setAttribute("id","ui-levels-arrow-down"),this.ui.lvlArwDn.style.width=arwWdth+"px",this.ui.lvlArwDn.style.top=lvlFlrH-20+"px","left top"==this.LEVELS_POSITION?this.ui.lvlArwDn.style.left=1.1*lvlWidth+"px":this.ui.lvlArwDn.style.left="0px",this.ui.lvlArwDn.style.height="40px",this.ui.lvlArwDn.style.display="none",this.ui.lvlArwDn.style.zIndex=p.MapGUI.CONTROL_ZINDEX+6,this.ui.levels.appendChild(this.ui.lvlArwDn),this.ui.lvlArwDnImg=document.createElement("img"),this.ui.lvlArwDnImg.src=o("resources/arrowDwn.png"),this.ui.lvlArwDnImg.style.width="60%",this.ui.lvlArwDnImg.style.position="absolute",this.ui.lvlArwDnImg.style.top="0px",this.ui.lvlArwDnImg.style.left="5px",this.ui.lvlArwDn.appendChild(this.ui.lvlArwDnImg),this.ui.lvlArwDn.onclick=function(t){newScale=ui.levelsFlrs.offsetTop-floorHeight/2,ui.levelsFlrs.style.left=0,ui.levelsFlrs.style.top=newScale+"px",mapGui.UILevelsContain(),mapGui.UILevelArrowToggle()},this.UILevelArrowToggle()},p.MapGUI.prototype.UILevelArrowToggle=function(){mapGui=this,floorHeightManager>lvlFlrH&&this.ui.levelsFlrs.offsetTop+floorHeightManager!=this.ui.levelsWrp.offsetTop+this.ui.levelsWrp.offsetHeight?this.UILevelCondDwnIn=setTimeout(function(t){mapGui.fadeIn("ui-levels-arrow-down"),clearTimeout(mapGui.UILevelCondDwnIn)},750):this.UILevelCondDwnOut=setTimeout(function(t){mapGui.fadeOut("ui-levels-arrow-down"),clearTimeout(mapGui.UILevelCondDwnOut)},750),this.ui.levelsFlrs.offsetTop<0?this.UILevelCondUpIn=setTimeout(function(t){mapGui.fadeIn("ui-levels-arrow-up"),clearTimeout(mapGui.UILevelCondUpIn)},750):this.UILevelCondUpOut=setTimeout(function(t){mapGui.fadeOut("ui-levels-arrow-up"),clearTimeout(mapGui.UILevelCondUpOut)},750)},p.MapGUI.prototype.determinePositionArraySetup=function(t,e,i,n){void 0==this.UISections[e]&&(this.UISections[e]=[]),itemStore=[],itemStore.item=t,itemStore.weight=i,itemStore.margin=n,this.UISections[e].push(itemStore),this.UISections[e].sort(function(t,e){return t.weight-e.weight})},p.MapGUI.prototype.determinePosition=function(){var t,e,i=this.viewportElement.clientWidth,n=this.viewportElement.clientHeight,o=0,s=15;this.heightMarker=[],this.positionExceptions();for(var r=0;r<this.grid.length;r++){var a=this.grid[r];this.heightMarker[a]||(this.heightMarker[a]=10),this.widthMarker[a]||(this.widthMarker[a]=10)}for(position in this.UISections)switch(position){case"left top":case"center top":case"right top":case"left center":case"center center":case"right center":for(cnt=0;cnt<this.UISections[position].length;cnt++){switch(o=0,t=this.heightMarker[position],e=this.UISections[position][cnt].item,margin=this.UISections[position][cnt].margin,margin||(margin=s),position){case"left top":this.ui[e].style.top=t+"px",this.ui[e].style.left=.025*i+"px";break;case"left center":o=n/2,o-=.1*o,this.ui[e].style.top=t+o+"px",this.ui[e].style.left=.025*i+"px";break;case"center top":this.ui[e].style.top=t+"px",this.ui[e].style.left=i/2-this.ui[e].offsetWidth/2+"px";break;case"center center":o=n/2,o-=.1*o,this.ui[e].style.top=t+o+"px",this.ui[e].style.left=i/2-this.ui[e].offsetWidth/2+"px";break;case"right top":this.ui[e].style.top=t+"px",this.ui[e].style.left=i-this.ui[e].offsetWidth-.025*i+"px";break;case"right center":o=n/2,o-=.1*o,this.ui[e].style.top=t+o+"px",this.ui[e].style.left=i-this.ui[e].offsetWidth-.025*i+"px"}this.heightMarker[position]+=this.ui[e].offsetHeight+margin,this.ui[e].offsetWidth>this.widthMarker[position]&&(this.widthMarker[position]=this.ui[e].offsetWidth)}break;default:for(cnt=this.UISections[position].length-1;cnt>=0;cnt--){switch(o=0,t=this.heightMarker[position],e=this.UISections[position][cnt].item,margin=this.UISections[position][cnt].margin,margin||(margin=s),position){case"left bottom":this.ui[e].style.top=n-(t+this.ui[e].offsetHeight)+"px",this.ui[e].style.left=.025*i+"px";break;case"center bottom":this.ui[e].style.top=n-(t+this.ui[e].offsetHeight)+"px",this.ui[e].style.left=i/2-this.ui[e].offsetWidth/2+"px";break;case"right bottom":this.ui[e].style.top=n-(t+this.ui[e].offsetHeight)+"px",this.ui[e].style.left=i-this.ui[e].offsetWidth-.025*i+"px"}this.heightMarker[position]+=this.ui[e].offsetHeight+margin,this.ui[e].offsetWidth>this.widthMarker[position]&&(this.widthMarker[position]=this.ui[e].offsetWidth)}}},p.MapGUI.prototype.positionExceptions=function(){var t;for(position in this.UISections)for(cnt=0;cnt<this.UISections[position].length;cnt++)switch(item=this.UISections[position][cnt].item,item){case"name":"left top"!=position&&"right top"!=position&&(t=this.UISections[position][cnt],this.UISections[position].splice(cnt,1),this.NAME_POSITION=this.gridDefaults.name,this.determinePositionArraySetup(t.item,this.gridDefaults.name,t.weight,t.margin));break;case"zoom":"center center"!=position&&this.inArray(this.grid,position)||(t=this.UISections[position][cnt],this.UISections[position].splice(cnt,1),this.ZOOM_POSITION=this.gridDefaults.zoom,this.determinePositionArraySetup(t.item,this.gridDefaults.zoom,t.weight,t.margin));break;case"levels":"left top"!=position&&"right top"!=position&&(t=this.UISections[position][cnt],this.UISections[position].splice(cnt,1),this.LEVELS_POSITION=this.gridDefaults.levels,this.determinePositionArraySetup(t.item,this.gridDefaults.levels,t.weight,t.margin));break;case"geo":"right bottom"!=position&&"right top"!=position&&(t=this.UISections[position][cnt],this.UISections[position].splice(cnt,1),this.GEO_POSITION=this.gridDefaults.geo,this.determinePositionArraySetup(t.item,this.gridDefaults.geo,t.weight,t.margin))}},p.MapGUI.prototype.removeElement=function(t){var e=document.getElementById(t);e&&(e.onmouseover=null,e.onclick=null,this.ui.removeChild(e))},p.MapGUI.prototype.fadeOut=function(t){"undefined"==typeof this.fadeItems.out&&(this.fadeItems.out=[]);var e=document.getElementById(t);if(e&&"none"!=e.style.display){var i="out",n=this,o=this.fadeInterval.length;this.fadeItems.out[t]||(this.fadeItems.out[t]=!0,this.fadeInterval[o]=setInterval(function(){n.UIFade(e,i,o,t)},20))}},p.MapGUI.prototype.fadeIn=function(t){"undefined"==typeof this.fadeItems["in"]&&(this.fadeItems["in"]=[]);var e=document.getElementById(t);if(e&&"none"==e.style.display){var i="in",n=this;e.style.opacity=0,e.style.filter="alpha(opacity=0)",e.style.display="block";var o=this.fadeInterval.length;this.fadeItems["in"][t]||(this.fadeItems["in"][t]=!0,this.fadeInterval[o]=setInterval(function(){n.UIFade(e,i,o,t)},20))}},p.MapGUI.prototype.UIFade=function(t,e,i,n){"undefined"==typeof this.UIFade.fadeSet&&(this.UIFade.fadeSet=[],this.UIFade.fadeReal=[]),"undefined"==typeof this.UIFade.fadeSet[i]&&(this.UIFade.fadeSet[i]=0,this.UIFade.fadeReal[i]=1),this.UIFade.fadeSet[i]+=.1,"in"==e&&(this.UIFade.fadeReal[i]=this.UIFade.fadeSet[i]),"out"==e&&(this.UIFade.fadeReal[i]=this.UIFade.fadeReal[i]-.1),t.style.opacity=this.UIFade.fadeReal[i],t.style.filter="alpha(opacity="+100*this.UIFade.fadeReal[i]+")",this.UIFade.fadeSet[i]>=1&&("in"==e&&(t.style.display="block"),"out"==e&&(t.style.display="none"),clearInterval(this.fadeInterval[i]),delete this.fadeInterval[i],delete this.fadeItems[e][n],delete this.UIFade.fadeSet[i],delete this.UIFade.fadeReal[i])},p.MapGUI.prototype.availSpace=function(t,e){var i=[];switch(i.avail=0,i.taken=0,!0){case"right top"==t&&"h"==e:i.avail=this.heightMarker["right top"]-(this.heightMarker["right center"]+this.heightMarker["right bottom"]),i.taken=this.heightMarker["right center"]+this.heightMarker["right bottom"];break;case"left top"==t&&"h"==e:i.avail=this.heightMarker["left top"]-(this.heightMarker["left center"]+this.heightMarker["left bottom"]),i.taken=this.heightMarker["left center"]+this.heightMarker["left bottom"];break;case"right top"==t&&"w"==e:i.avail=this.widthMarker["right top"]-(this.widthMarker["center top"]+this.widthMarker["left top"]),i.taken=this.widthMarker["center top"]+this.widthMarker["left top"];break;case"left top"==t&&"w"==e:i.avail=this.widthMarker["left top"]-(this.widthMarker["center top"]+this.widthMarker["right top"]),i.taken=this.widthMarker["center top"]+this.widthMarker["right top"]}return void 0==i.avail&&(i.avail=0),void 0==i.taken&&(i.taken=0),i},p.MapGUI.prototype.addClass=function(t,e){this.hasClass(t,e)||(t.className+=" "+e)},p.MapGUI.prototype.hasClass=function(t,e){return t.className&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(t.className)},p.MapGUI.prototype.removeClass=function(t,e){if(this.hasClass(t,e)){var i=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(i," ")}},p.MapGUI.prototype.inArray=function(t,e){for(i=0;i<t.length;i++)if(e==t[i])return!0;return!1},p.MapGUI.prototype.hexCheck=function(t){return"#"!=t.charAt(0)?"#"+t:t},p.MapGUI.prototype.error=function(t){var e=this;this.ui.error=document.createElement("div"),this.ui.error.setAttribute("id","ui-error"),this.ui.errorClose=document.createElement("div"),this.ui.errorClose.setAttribute("id","ui-error-close"),this.ui.errorClose.innerHTML="x",this.ui.error.appendChild(this.ui.errorClose),this.ui.errorCloseMsg=document.createElement("div"),this.ui.errorCloseMsg.setAttribute("id","ui-error-mesg"),this.ui.errorCloseMsg.innerHTML=t,this.ui.error.appendChild(this.ui.errorCloseMsg),this.ui.errorClose.onclick=function(t){e.fadeOut("ui-error")},this.ui.error.style.display="none",this.viewportElement.appendChild(this.ui.error)},p.MapGUI.prototype.UIReg=function(t,e){this.ui.reg[t]=e},p.MapGUI.prototype.conditionalUI=function(){var t,e=this;if(this.conditionalAction){clearTimeout(this.conditionalAction);for(t in this.ui.reg){var i=document.getElementById(t);i&&"conditional"==this.ui.reg[t]&&"none"==i.style.display&&this.fadeIn(t)}}this.conditionalAction=setTimeout(function(i){for(t in e.ui.reg)"conditional"!=e.ui.reg[t]&&"conditional_hidden"!=e.ui.reg[t]||e.fadeOut(t);clearTimeout(e.conditionalAction)},4e3)},p.MapData=function(t,e,i,n){this.mapControl=t,this.view=e,this.mapCanvas=i,this.mapGUI=n,this.community=null,this.currentDrawing=null,this.ti=null,this.currentLevel=null,this.geomMap=null,this.levelMap=null,this.drawingMap=null,this.groupMap=null,this.event={},this.unloadedMOverlays=[],this.unloadedGOverlays=[],this.unloadedInlays=[],this.nextId=p.MapData.INITIAL_ID},p.MapData.DEFAULT_ZINDEX=1,p.MapData.INITIAL_ID=-1,p.MapData.DEFAULT_THEME_NAME="General",p.MapData.prototype.mxyToLatLon=function(t,e){if(!this.ti)return null;var i=t*this.ti.mxToLat+e*this.ti.myToLat+this.ti.lat0,n=t*this.ti.mxToLon+e*this.ti.myToLon+this.ti.lon0;return[i,n]},p.MapData.prototype.latLonToMxy=function(t,e){if(!this.ti)return null;t-=this.ti.lat0,e-=this.ti.lon0;var i=t*this.ti.latToMx+e*this.ti.lonToMx,n=t*this.ti.latToMy+e*this.ti.lonToMy;return[i,n]},p.MapData.prototype.getCommunity=function(){return this.community},p.MapData.prototype.getCurrentDrawing=function(){return this.currentDrawing},p.MapData.prototype.getCurrentLevel=function(){return this.currentLevel},p.MapData.prototype.loadCommunity=function(){var t=this;t.setCommunity()},p.MapData.prototype.setDrawing=function(t,e){if(t){this.currentDrawing=t,this.transformInfo=null;var i=this.currentDrawing.l;this.initTransform();var e=!1,n=-999999;if(i){var o,s=i.length;for(o=0;o<s;o++){var r=i[o];if(e){if(r.id==e){e=r;break}}else r.z<0?r.z>n&&(e=r,n=r.z):(r.z<n||n<0)&&(e=r,n=r.z)}}e||alert("Display level not found"),this.event.drawChange=1,this.view.updateDrawing(this.currentDrawing),this.mapGUI.updateDrawing(this.currentDrawing),this.setLevel(e)}},p.MapData.prototype.setLevel=function(t){var e=this.currentLevel;this.currentLevel=t,this.mapGUI.updateLevel(this.currentLevel,e),this.mapCanvas.updatelevel(this.currentLevel,e),this.mapChanged&&(this.mapChanged(this.event),this.event.drawChange=0,this.event.comLoad=0,this.event.drawLoad=0)},p.MapData.prototype.getGeometryLevel=function(t){var e=this.geomMap[t];return e?e.pl:null},p.MapData.prototype.addMarkerOverlay=function(t,e){if(this.community)if(t.aid||(t.aid=this.createId()),t.lid){var i=null,n=this.levelMap[t.lid];n?(i=n.l,this.addMarkerToLevel(t,i)):t.x||(t.x=1,this.unloadedMOverlays.push(t))}else{if(!t.id)return void alert("Level info missing");var o=null;if(e||(o=this.getGeometryGroupList(t.id)),null!=o){var s,r,a;for(s=0;s<o.length;s++)r=o[s],r.id!=t.id?(a=this.getCopy(t),a.id=r.id):a=t,this.addMarkerToGeom(a)}else this.addMarkerToGeom(t)}},p.MapData.prototype.removeMarkerOverlay=function(t,e){if(this.community){for(var i,n,o,s,r=this.community.d.length,a=0;a<r;a++)if(i=this.community.d[a],i.l)for(var l=0;l<i.l.length;l++)if(n=i.l[l].m)for(var a=0;a<n.length;a++)o=n[a],s=e?o.anm:o.aid,s==t&&(n.splice(a,1),a--,this.mapCanvas.removeMarker(o));for(var h=0;h<this.unloadedMOverlays.length;)o=this.unloadedMOverlays[h],s=e?o.anm:o.aid,s==t?(this.unloadedMOverlays.splice(h,1),delete o.x):h++}},p.MapData.prototype.addGeometryOverlay=function(t){if(this.community){if(!t.lid)return void alert("missing overlay level");if((!t.zi||t.zi>=0&&t.zi<1)&&(t.zi=p.MapData.DEFAULT_ZINDEX),t.id){if(t.id>p.MapData.INITIAL_ID)return void alert("Invalid overlay id");if(t.id!=t.aid)return void alert("Format error on geometry overlay.");var e=this.geomMap[t.id];e&&this.removeGeometryOverlay(e.aid)}else t.aid=this.createId(),t.id=t.aid;var i=this.levelMap[t.lid];if(i){var n=i.l;t.x&&delete t.x,this.addToObjectMap(t,n),n.gList.add(t),this.mapCanvas.invalidateGeom(t,t.lid,t.zi)}else t.x||(t.x=1,this.unloadedGOverlays.push(t))}},p.MapData.prototype.removeGeometryOverlay=function(t,e){if(this.community){var i,n,o,s,r,a=e?"anm":"aid",l=this.community.d.length;for(r=0;r<l;r++)if(i=this.community.d[r],i.l){var h,u=i.l.length;for(h=0;h<u;h++){n=i.l[h],o=n.gList;do s=o.remove(t,a),s&&(this.removeFromObjectMap(s),this.mapCanvas.invalidateGeom(s,s.lid,s.zi));while(s)}}var p,c;for(r=0;r<this.unloadedGOverlays.length;)c=this.unloadedGOverlays[r],p=e?c.anm:c.aid,p==t?(this.unloadedGOverlays.splice(r,1),delete c.x):r++}},p.MapData.prototype.addInlay=function(t,e){if(this.community){if(!t.id)return void alert("missing inlay id");t.aid||(t.aid=this.createId()),t.zi||(t.zi=p.MapData.DEFAULT_ZINDEX);var i=null;if(e||(i=this.getGeometryGroupList(t.id)),null!=i){var n,o,s;for(n=0;n<i.length;n++)o=i[n],o.id!=t.id?(s=this.getCopy(t),s.id=o.id):s=t,this.addIndividualInlay(s)}else this.addIndividualInlay(t)}},p.MapData.prototype.removeInlay=function(t,e){if(this.community){for(var i,n,o,s,r,a,l,h,u=this.community.d.length,p=0;p<u;p++)if(i=this.community.d[p],i.l){r=i.l.length;for(var c=0;c<r;c++)for(n=i.l[c],l=n.gList,l.start();null!=(o=l.currentList());l.next()){h=l.currentZi(),a=o.length;for(var d=0;d<a;d++){s=o[d];for(var f=s,m=null;f;)f=this.getRemoveReplaceGeom(f,t,e),f&&(m=f);m&&(o[d]=m,this.mapCanvas.invalidateGeom(s,n.id,h),this.mapCanvas.invalidateGeom(m,n.id,h))}}}for(var v,g,w=0;w<this.unloadedInlays.length;)g=this.unloadedInlays[w],v=e?g.anm:g.aid,v==t?(this.unloadedInlays.splice(w,1),delete g.x):w++}},p.MapData.prototype.removeAnnotation=function(t){this.removeInlay(t,!0),this.removeGeometryOverlay(t,!0),this.removeMarkerOverlay(t,!0)},p.MapData.prototype.setCommunity=function(){if(this.community=p.getMapData(),null==this.community)return void alert("null community!");this.initCommunity();var t=this.community.d;if(null==t)return void alert("no drawings!");var e,i,n;if(p.MapLevelId)for(n=t.length,i=0;i<n;i++)t[i].id==p.MapLevelId&&(e=t[i]);else e=t[0];if(!e)for(n=t.length,i=0;i<n;i++)t[i].r&&(e=t[i]);return e?(this.event.comLoad=1,void this.setDrawing(e)):(alert("no root drawing found"),void(this.currentDrawing=null))},p.MapData.prototype.updateDrawing=function(t,e){if(this.community&&this.community.d&&t){var i,n,o=this.community.d,s=o.length;for(n=0;n<s;n++)if(i=o[n],i.id==t.id){o[n]=t;break}this.event.drawLoad=1,this.initDrawing(t),this.checkGeometryOverlays(),this.checkMarkerOverlays(),this.checkInlays(),this.setDrawing(t,e)}},p.MapData.prototype.checkGeometryOverlays=function(){for(var t,e=0;e<this.unloadedGOverlays.length;)t=this.unloadedGOverlays[e],this.addGeometryOverlay(t),t.x?e++:this.unloadedGOverlays.splice(e,1)},p.MapData.prototype.checkInlays=function(){for(var t,e=0;e<this.unloadedInlays.length;)t=this.unloadedInlays[e],this.addInlay(t),t.x?e++:this.unloadedInlays.splice(e,1)},p.MapData.prototype.checkMarkerOverlays=function(){for(var t,e=0;e<this.unloadedMOverlays.length;)t=this.unloadedMOverlays[e],this.addMarkerOverlay(t),t.x?e++:this.unloadedMOverlays.splice(e,1)},p.MapData.prototype.addMarkerToGeom=function(t){var e=this.geomMap[t.id];if(e){var i=e.g;if(!i.l)return;t.mx=i.l[0],t.my=i.l[1];var n=e.pl;n&&(t.lid=n.id,this.addMarkerToLevel(t,n))}else t.x||(t.x=1,this.unloadedMOverlays.push(t))},p.MapData.prototype.addMarkerToLevel=function(t,e){t.x&&delete t.x,e.m?e.m.push(t):e.m=[t],this.mapCanvas.addMarker(t)},p.MapData.prototype.addIndividualInlay=function(t){var e=this.getGeometryLevel(t.id);if(e){t.x&&delete t.x;var i,n,o,s,r,a=e.gList;for(a.start();null!=(i=a.currentList());a.next())for(r=a.currentZi(),o=i.length,s=0;s<o;s++)if(n=i[s],n.id==t.id){var l=this.getAddReplaceGeom(n,t);l&&(i[s]=l,this.mapCanvas.invalidateGeom(n,e.id,r),this.mapCanvas.invalidateGeom(l,e.id,r));break}}else t.x||(t.x=1,this.unloadedInlays.push(t))},p.MapData.prototype.getAddReplaceGeom=function(t,e){if(t.base&&t.base.i.zi>=e.zi){var i=this.getAddReplaceGeom(t.base.g,e);if(i){var n=t.base.i,o=this.applyInlay(i,n);return o}return null}return this.applyInlay(t,e)},p.MapData.prototype.applyInlay=function(t,e){var i,n=this.getCopy(t);for(i in e)n[i]=e[i];return n.base={g:t,i:e},n},p.MapData.prototype.getCopy=function(t){var e,i={};for(e in t)i[e]=t[e];return i},p.MapData.prototype.getRemoveReplaceGeom=function(t,e,i){if(t.base){var n=i?t.base.i.anm:t.base.i.aid;if(n==e){var o=t.base.i;return o.proc=!1,t.base.g}var s=this.getRemoveReplaceGeom(t.base.g,e,i);if(s){var r=this.applyInlay(s,t.base.i);return r}}return null},p.MapData.prototype.initCommunity=function(){this.currentLevel=null,this.currentDrawing=null,this.geomMap={},this.levelMap={},this.drawingMap={},this.groupMap={},this.unloadedMOverlays=[],this.unloadedGOverlays=[],this.unloadedInlays=[];var t;if(this.community&&this.community.d){var e,i=this.community.d.length;for(e=0;e<i;e++)t=this.community.d[e],this.initDrawing(t)}},p.MapData.prototype.initDrawing=function(t){var e,i,n;if(this.drawingMap[t.id]=t,t.l){var o,s=t.l.length;for(o=0;o<s;o++)if(e=t.l[o],e.id&&(this.levelMap[e.id]={l:e,d:t},e.g)){e.gList=new p.ZList(e.g);var r,a=e.g.length;for(r=0;r<a;r++)i=e.g[r],this.initShape(i),i.id&&(n=this.geomMap[i.id],n||(n={g:i},this.geomMap[i.id]=n),i.r?n.ml=e:n.pl=e,i.gid&&(n=this.groupMap[i.gid],n?n.push(i):(n=[i],this.groupMap[i.gid]=n)))}}},p.MapData.prototype.initTransform=function(){var t={},e=this.currentDrawing.t;t.mxToLon=e[0],t.myToLon=e[2],t.mxToLat=e[1],t.myToLat=e[3],t.lon0=e[4],t.lat0=e[5];var i=t.mxToLon*t.myToLat-t.mxToLat*t.myToLon;t.lonToMx=t.myToLat/i,t.lonToMy=-t.mxToLat/i,t.latToMx=-t.myToLon/i,t.latToMy=t.mxToLon/i,this.ti=t},p.MapData.prototype.initShape=function(t){null==t.st&&(t.shp?t.st=2:t.st=0),null==t.gt&&(t.shp?t.gt=2:t.gt=0)},p.MapData.prototype.addToObjectMap=function(t,e){if(t.id){this.initShape(t);var i=this.geomMap[t.id];i||(i={g:t},this.geomMap[t.id]=i),i.pl=e,t.gid&&(i=this.groupMap[t.gid],i?i.push(t):(i=[t],this.groupMap[t.gid]=i))}},p.MapData.prototype.removeFromObjectMap=function(t){t.id&&(delete this.geomMap[t.id],t.gid&&delete this.groupMap[t.gid])},p.MapData.prototype.getGeometryGroupList=function(t){var e=this.geomMap[t],i=null;return e&&(i=e.g),i&&i.gid?this.groupMap[i.gid]:null},p.MapData.prototype.createId=function(){return this.nextId--},p.MapCanvas=function(t,e){this.mapControl=t,this.view=null,this.data=null,this.mapElement=e,this.tileMap={},this.mapTheme=null,this.themeDrawing=null,this.themeList=[],this.themeFamily="Texture",this.popups=[],this.onMapClick=null,this.MAP_FONT="HelveticaNeue-Light",this.MAP_FONT_FALLBACK="helvetica",this.MAP_FONT_MIN=10,this.MAP_FONT_MAX=20,this.MIN_TEXT_SCALE=null,this.MAX_TEXT_SCALE=null,this.LABEL_BG_COLOR="#ffffff",this.LABEL_BG_PADDING=3,this.LABEL_BG_MARGIN=3,this.LABEL_BG_RADIUS=3,this.LABEL_BG_STROKE_COLOR="#666666",this.LABEL_BG_SHADOW_COLOR="#666666",this.LABEL_BG_SHADOW_BLUR=3,this.LABEL_BG_SHADOW_XOFF=1,this.LABEL_BG_SHADOW_YOFF=1,this.TILE_SIZE=400,this.DRAW_WAIT=25,this.TILE_FACTOR=2,this.IMAGE_DRAW_WAIT=500,this.SHADOW_COLOR="#333333",this.SHADOW_X=2,this.SHADOW_Y=2,this.SHADOW_BLUR=3,this.minMapX=0,this.minMapY=0,this.maxMapX=0,this.maxMapY=0,this.baseAngleRad=0},p.MapCanvas.DEFAULT_MARKER_ZI=1,p.MapCanvas.prototype.createPopup=function(){var t=new p.MapPopup(this,this.mapElement,this.view);return this.popups.push(t),t},p.MapCanvas.prototype.removePopup=function(t){t.setActive(!1);var e,i=this.popups.length;for(e=0;e<i;e++)this.popups[e]==t&&this.popups.splice(e,1)},p.MapCanvas.prototype.drawMap=function(){p.asynchDraw.waitDraw(this,this.DRAW_WAIT,this.mapControl.mapName)},p.MapCanvas.prototype.addMarker=function(t){if(t.mr){var e;if(t.mt==p.markertype.NAMED?this.mapTheme&&this.mapTheme.loaded&&(e=this.mapTheme.getMarker(t.mr)):t.mt==p.markertype.IMAGE&&(e=t.mr),e){var i=document.createElement("img");i.src=e.src,i.mapTarget=!0,i.mapObject=t,i.onmousedown=function(t){t.preventDefault&&t.preventDefault()},t.cx=0,t.cy=0,null!=e.ox?t.ox=e.ox:t.ox=0,null!=e.oy?t.oy=e.oy:t.oy=0,null==t.zi&&(t.zi=p.MapCanvas.DEFAULT_MARKER_ZI),t.element=i,i.style.position="absolute",i.style.zIndex=t.zi,i.style.top="0px",i.style.left="0px",t.visible=!0;var n=this.data.getCurrentLevel();this.updateMarker(t,n),this.mapElement.appendChild(i)}}},p.MapCanvas.prototype.updateMarker=function(t,e){if(e&&e.id==t.lid){t.visible||(t.visible=!0,t.element.style.visibility="visible");var i=this.view.mapToCanvasX(t.mx,t.my),n=this.view.mapToCanvasY(t.mx,t.my);i==t.cx&&n==t.cy||(t.element.style.left=String(i-t.ox)+"px",t.element.style.top=String(n-t.oy)+"px",t.cx=i,t.cy=n)}else t.visible&&(t.visible=!1,t.element.style.visibility="hidden");
},p.MapCanvas.prototype.removeMarker=function(t){this.mapElement.removeChild(t.element),delete t.element},p.MapCanvas.prototype.getMarkerCenterX=function(t){return t.ox&&t.element?t.mx-t.ox+t.element.offsetWidth/2:Number.NaN},p.MapCanvas.prototype.getMarkerCenterY=function(t){return t.oy&&t.element?t.my-t.oy+t.element.offsetHeight/2:Number.NaN},p.MapCanvas.prototype.updateDomOverlays=function(t,e){var i,n,o=this.popups.length;for(i=0;i<o;i++)this.popups[i].update();if(t&&(n=t.m))for(o=n.length,i=0;i<o;i++)this.updateMarker(n[i],t);if(e&&(n=e.m))for(o=n.length,i=0;i<o;i++)this.updateMarker(n[i],t)},p.MapCanvas.prototype.invalidateGeom=function(t,e,i){t.mm||this.loadGeomMinMax(t);var n,o=!1;for(var s in this.tileMap)n=this.tileMap[s],n.lid==e&&!n.invalid&&n.mapIntersects(t.mm)&&(n.invalid=!0,n.connected&&(o=!0));o&&this.drawMap()},p.MapCanvas.prototype.updatelevel=function(t,e){this.updateDomOverlays(t,e),t?this.drawMap():this.clearCanvas()},p.MapCanvas.prototype.onPan=function(t,e,i,n){(t<this.minPixX||e<this.minPixY||i>this.maxPixX||n>this.maxPixY)&&this.drawMap()},p.MapCanvas.prototype.onZoom=function(){this.prepareZoomCache(),this.updateDomOverlays(this.data.getCurrentLevel(),null),this.drawMap()},p.MapCanvas.prototype.prepareZoomCache=function(){if(p.MapGUI.setCssScale){this.zoomCached=!0;var t=this.view.getZoom();for(var e in this.tileMap)i=this.tileMap[e],i.connected&&i.setZoomCache(t)}else{var i;for(var e in this.tileMap)i=this.tileMap[e],i.connected&&i.disconnect()}},p.MapCanvas.prototype.clearZoomCache=function(){if(p.MapGUI.setCssScale){this.zoomCached=!1;for(var t in this.tileMap){var e=this.tileMap[t];e.zoomCache&&e.clearZoomCache(!0)}}},p.MapCanvas.prototype.drawMapExe=function(){var t=!1,e=this.data.getCurrentLevel();if(!e)return void console.log("there is no current level");var i=this.data.getCurrentDrawing();if(this.themeDrawing!=i)return void this.loadTheme(i);var n=this.mapElement.offsetWidth,o=this.mapElement.offsetHeight,s=this.view.getViewportWidth(),r=this.view.getViewportHeight(),a=this.view.getViewportX();a<0&&(a=0);var l=this.view.getViewportY();l<0&&(l=0);var h=a+s;h>n&&(h=n);var u=l+r;u>o&&(u=o);var c=Math.floor(a/this.TILE_SIZE),d=Math.floor(l/this.TILE_SIZE),f=Math.floor(h/this.TILE_SIZE),m=Math.floor(u/this.TILE_SIZE);this.minPixX=c*this.TILE_SIZE,this.minPixY=d*this.TILE_SIZE,this.maxPixX=(f+1)*this.TILE_SIZE,this.maxPixY=(m+1)*this.TILE_SIZE;for(var v,g,w,y,I=(f-c+1)*(m-d+1)*this.TILE_FACTOR,M=(new Date).getTime(),_=null,E=null,T=c;T<=f;T++)for(var C=d;C<=m;C++)v=p.MapTile.getKey(this.view,e.id,T,C),g=this.tileMap[v],g?(g.timeStamp=M,g.zoomCache&&g.clearZoomCache(!1),g.invalid?_||(_=g):g.connected||g.connect()):(w=T,y=C,E=v);!this.zoomCached||_||E||this.clearZoomCache();var b,L=null,O=0;for(var A in this.tileMap)O++,g=this.tileMap[A],g.timeStamp<M&&!g.zoomCache&&(g.connected&&g.disconnect(),(!L||g.timeStamp<b)&&(b=g.timeStamp,L=g));_?(this.drawTile(_),t=!0):null!=E&&(!L||O<I?L=new p.MapTile(this.mapElement,this.TILE_SIZE,this.TILE_SIZE,0):delete this.tileMap[L.key],L.init(this.view,e.id,w,y),this.tileMap[L.key]=L,this.drawTile(L),t=!0),t&&this.drawMap()},p.MapCanvas.prototype.clearCanvas=function(){for(var t in this.tileMap)tile=this.tileMap[t],tile.connected&&tile.disconnect()},p.MapCanvas.prototype.drawTile=function(t){var e=this.data.getCurrentLevel();if(e&&e.id==t.lid&&this.view.getZoomInt()==t.zoomInt){t.canvas.width=t.canvas.width;var i=t.canvas.getContext("2d");if(null!=this.MIN_TEXT_SCALE&&(this.MAP_FONT_MIN=10*this.MIN_TEXT_SCALE),null!=this.MAX_TEXT_SCALE&&(this.MAP_FONT_MAX=10*this.MAX_TEXT_SCALE),this.MAP_FONT_MIN=parseInt(this.MAP_FONT_MIN),this.MAP_FONT_MAX=parseInt(this.MAP_FONT_MAX),i.font=this.MAP_FONT_MAX+"px "+this.MAP_FONT+", "+this.MAP_FONT_FALLBACK,i.lineJoin="round",i.lineCap="round",i){var n=this.view.getM2C(),o=this.view.getC2M();i.translate(-t.elementX,-t.elementY),i.transform(n[0],n[1],n[2],n[3],n[4],n[5]);var s,r=e.gList;for(r.start();null!=(s=r.currentList());r.next())this.render(i,s,t);i.transform(o[0],o[1],o[2],o[3],o[4],o[5]),i.translate(t.elementX,t.elementY)}t.invalid=!1,t.connected||t.connect()}},p.MapCanvas.prototype.render=function(t,e,i){if(this.mapTheme&&this.mapTheme.loaded){for(var n=e.length,o=i.scale,s=0;s<n;s++){var r=e[s];if((!r.mm||i.mapIntersects(r.mm))&&2==r.st){if(r.style=void 0,r.os&&"Selected"!=r.t&&(r.style=r.os),!r.style&&r.t&&(r.style=this.mapTheme.getStyle(r.t)),void 0==r.style&&(r.style=this.mapTheme.getStyle("Unit")),void 0==r.style)continue;this.renderPath(t,r,o,i)}}for(var s=0;s<n;s++){var r=e[s];r.mm&&!i.mapIntersects(r.mm)||this.renderLabel(r,t,o)}}},p.MapCanvas.prototype.drawLabelBackground=function(t,e,i,n,o,s){t.fillStyle=s.label.m?s.label.m:this.LABEL_BG_COLOR;var r=void 0!=s.label.radius?parseInt(s.label.radius):this.LABEL_BG_RADIUS;e-=2*n,i-=2*n;var a=-(e/2)-o/2,l=-(i/2)-o/2;t.beginPath(),t.moveTo(a+r,l),t.lineTo(a+(e+o)-r,l),t.quadraticCurveTo(a+(e+o),l,a+(e+o),l+r),t.lineTo(a+(e+o),l+(i+o)-r),t.quadraticCurveTo(a+(e+o),l+(i+o),a+(e+o)-r,l+(i+o)),t.lineTo(a+r,l+(i+o)),t.quadraticCurveTo(a,l+(i+o),a,l+(i+o)-r),t.lineTo(a,l+r),t.quadraticCurveTo(a,l,a+r,l),t.closePath(),s.label.shadow?1==s.label.shadow?(t.shadowColor=this.LABEL_BG_SHADOW_COLOR,t.shadowBlur=this.LABEL_BG_SHADOW_BLUR,t.shadowOffsetX=this.LABEL_BG_SHADOW_XOFF,t.shadowOffsetY=this.LABEL_BG_SHADOW_YOFF):0==s.label.shadow?t.shadowColor="rgba(0,0,0,0.0)":(t.shadowColor=s.label.shadow[0],t.shadowBlur=s.label.shadow[1],t.shadowOffsetX=s.label.shadow[2],t.shadowOffsetY=s.label.shadow[3]):t.shadowColor="rgba(0,0,0,0.0)",t.fill(),t.shadowColor="rgba(0,0,0,0.0)",s.label.o&&(t.strokeStyle=s.label.o,t.stroke())},p.MapCanvas.prototype.renderPath=function(t,e,i,n){var s=e.style,r=e.gt;void 0==r&&(r=2);var a,l=e.gw,h=e.shp;t.beginPath();for(var u=h.length,p=0;p<u;p++)switch(a=h[p],a[0]){case 0:t.moveTo(a[1],a[2]);break;case 1:t.lineTo(a[1],a[2]);break;case 2:t.quadraticCurveTo(a[1],a[2],a[3],a[4]);break;case 3:t.bezierCurveTo(a[1],a[2],a[3],a[4],a[5],a[6]);break;case 4:t.closePath()}if(2==r){if(void 0!=s.shadow&&0!=s.shadow){var c=s.shadow;c===!0?(t.shadowColor=this.SHADOW_COLOR,t.shadowBlur=this.SHADOW_BLUR*(1.5*i),t.shadowOffsetX=this.SHADOW_X*(i+1),t.shadowOffsetY=this.SHADOW_Y*(i+1)):(t.shadowColor=c[0],t.shadowBlur=c[1]*(2*i),t.shadowOffsetX=c[2]*(i+1),t.shadowOffsetY=c[3]*(i+1))}if(void 0!=s.m&&(t.fillStyle=s.m,t.fill()),t.shadowColor="rgba(0,0,0,0)",void 0!=s.img&&0!=s.img){if(!s.pattern&&!s.error){var d={};d.pending=[n],d.img=new Image;var f=this;d.img.onload=function(){f.updateImages(d)},1==s.img?d.img.src=o("/patterns/"+e.t+".png"):d.img.src=s.img,s.error=!1,d.img.onerror=function(t){s.error=!0};try{var m=t.createPattern(d.img,"repeat")}catch(v){}s.pattern=m}s.pattern&&(t.fillStyle=s.pattern,t.fill())}void 0!=s.o&&s.w&&(t.strokeStyle=s.o,t.lineWidth=s.w/i,t.stroke())}else 3==r?void 0!=s.m&&(t.strokeStyle=s.m,t.lineWidth=l,t.stroke()):1==r?void 0!=s.m&&s.w&&(t.strokeStyle=s.m,t.lineWidth=s.w/i,t.stroke()):alert("other geom type: "+r)},p.MapCanvas.prototype.renderLabel=function(t,e,i){var n=this;if(t.style){var o=t.style,s=t.lt=t.lt?t.lt:1,r=!!o.t&&o.t,a=this.MAP_FONT_MAX,l=t.lr,h=this.getLabelCoords(t);if(h!==!1&&void 0!=l){var u,p=0,c=0;if(1===s){if(!r)return;var d=t.tc;if(d&&d.lr==l)u=d.w,m=d.margin,v=d.padding;else{this.MAP_FONT_CAPS&&(l=l.toUpperCase());var f=e.measureText(l);if(u=f.width,o.label){var m=void 0!=o.label.margin?parseInt(o.label.margin):this.LABEL_BG_MARGIN,v=void 0!=o.label.padding?parseInt(o.label.padding):this.LABEL_BG_PADDING;u=u+2*m+2*v}d={lr:l,w:u,margin:m,padding:v},t.tc=d}var g=function(){var t=h[2]/u,e=h[3]/n.MAP_FONT_MAX;return t>e?e:t}(),w=g*i*this.MAP_FONT_MAX;if(w<this.MAP_FONT_MIN)return;if(w>this.MAP_FONT_MAX){var y=this.MAP_FONT_MAX/w;g*=y}var I=this.baseAngleRad?this.getRotationAngle(I,s,labelWidthRatio/labelHeightRatio):h[4]}e.translate(h[0],h[1]),e.rotate(I),e.scale(g,g),e.translate(p,c),r&&(o.label&&this.drawLabelBackground(e,u,a,m,v,o),e.fillStyle=r,e.textAlign="center",e.textBaseline="middle",e.fillText(l,0,0)),e.translate(-p,-c),e.scale(1/g,1/g),e.rotate(-I),e.translate(-h[0],-h[1])}}},p.MapCanvas.prototype.clickMouse=function(t,e,i){var n=this.view.canvasToMapX(t,e),o=this.view.canvasToMapY(t,e),s=this.data.getCurrentLevel();if(!i){var r,a,l=s.gList;for(l.start();null!=(a=l.currentList());l.next())r=this.hitCheck(a,n,o),r&&(i=r)}this.onMapClick&&this.onMapClick(n,o,i)},p.MapCanvas.prototype.hitCheck=function(t,e,i){var n,o=null,s=t.length;for(n=0;n<s;n++){var r=t[n],a=r.gt;if((2==a||0==a)&&(r.shp||r.l&&(!r.shp||r.el))&&(r.mm||this.loadGeomMinMax(r),e>r.mm[0][0]&&i>r.mm[0][1]&&e<r.mm[1][0]&&i<r.mm[1][1])){var l=!1;r.shp&&p.geom.pathHit(r.shp,e,i)&&(l=!0),!r.l||r.shp&&!r.el||p.geom.rotRectHit(r.l,e,i)&&(l=!0),l&&(o=r)}}return o},p.MapCanvas.prototype.updateImages=function(t){var e=t.pending;if(e){delete t.pending;var i,n;for(i=0;i<e.length;i++)n=e[i],n.invalid=!0;p.asynchDraw.waitDraw(this,this.IMAGE_DRAW_WAIT,this.mapControl.mapName)}},p.MapCanvas.prototype.check=function(t,e){var i;for(i=0;i<t.length;i++)if(t[i]==e)return;t.push(e)},p.MapCanvas.prototype.loadTheme=function(t){if(t){if(!t.mts)return void alert("Map format error");this.mapTheme=new p.MapTheme([t.mts]),this.themeDrawing=t,this.onThemeLoaded(p.mapThemeData),this.mapTheme.loaded&&this.mapThemeLoaded()}},p.MapCanvas.prototype.onThemeLoaded=function(t){this.themeList.push(t),this.mapTheme&&(this.mapTheme.placeTheme(t),this.mapTheme.loaded&&this.mapThemeLoaded())},p.MapCanvas.prototype.mapThemeLoaded=function(){if(!this.mapTheme)throw new Error("There is no Map Theme");var t=this.data.getCommunity();if(t){for(var e=0;e<t.d.length;e++){var i=t.d[e];if(i.l)for(var n=0;n<i.l.length;n++)for(var o=(i.l[n],0);o<i.l.length;o++){var s=i.l[o],r=s.m;if(r)for(var a=r.length,l=0;l<a;l++)r[l].element||this.addMarker(r[l])}}this.drawMap()}},p.MapCanvas.prototype.loadGeomMinMax=function(t){var e=p.geom.getInvalidMinMax();t.shp&&p.geom.loadPathMinMax(t.shp,e),!t.l||t.shp&&!t.el||p.geom.loadRotRectMinMax(t.l,e),t.mm=e},p.MapCanvas.prototype.arrayContains=function(t,e){var i;for(i=0;i<t.length;i++)if(t[i]==e)return!0;return!1},p.MapCanvas.prototype.getRotationAngle=function(t,e,i){var n=t-this.baseAngleRad,o=Math.PI;if(i<1.1&&i>.9)if(2==e||4==e){for(;n>o/4;)n-=o/2,t-=o/2;for(;n<-o/4;)n+=o/2,t+=o/2}else{for(;n>o/2;)n-=o,t-=o;for(;n<-o/2;)n+=o,t+=o}else{for(;n>o/2;)n-=o,t-=o;for(;n<-o/2;)n+=o,t+=o}return t},p.MapCanvas.prototype.getLabelCoords=function(t){if(t.lt&&1!==t.lt||t.show_title===!1)return!1;if("object"===a(t.l))return"[0,0,0,0,0]"!==JSON.stringify(t.l)&&t.l;if(t.show_title===!0){var e,i,n,o;e=i=t.shp[0][1],n=o=t.shp[0][2];for(var s=0;s<t.shp.length-1;s++)e=e<t.shp[s][1]?e:t.shp[s][1],i=i>t.shp[s][1]?i:t.shp[s][1],n=n<t.shp[s][2]?n:t.shp[s][2],o=o>t.shp[s][2]?o:t.shp[s][2];var r=.8*(i-e),l=.2*(o-n),h=(i+e)/2,u=(o+n)/2;return t.l=[h.toFixed(2),u.toFixed(2),r.toFixed(2),l.toFixed(2),0],t.l}return!1},p.asynchDraw={maps:{},waitDraw:function(t,e,i){var n=this,o=this.maps[i];o||(o={},this.maps[i]=o),o.active||(o.active=!0,o.mapCanvas=t,setTimeout(function(){n.drawMap(i)},e))},drawMap:function(t){var e=this.maps[t];e&&(e.active=!1,e.mapCanvas.drawMapExe())}},p.MapTile=function(t,e,i,n){this.mapElement=t,this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",this.canvas.style.zIndex=n,this.canvas.style.visiblity="hidden",this.canvas.mapTarget=!0,this.mapElement.appendChild(this.canvas),this.width=e,this.height=i,this.canvas.width=e,this.canvas.height=i,this.invalid=!0,this.connected=!1,this.clearZoomCache(!1)},p.MapTile.prototype.init=function(t,e,i,n){this.lid=e,this.zoomInt=t.getZoomInt(),this.tileX=i,this.tileY=n,this.elementX=i*this.width,this.elementY=n*this.height,this.elementMaxX=this.elementX+this.width,this.elementMaxY=this.elementY+this.height,this.setMinMax(t),this.scale=t.getZoom(),this.key=p.MapTile.getKey(t,e,i,n),this.invalid=!0,this.connected=!1,this.zoomCache=!1},p.MapTile.prototype.setMinMax=function(t){this.minX=t.canvasToMapX(this.elementX,this.elementY),this.minY=t.canvasToMapY(this.elementX,this.elementY),this.maxX=this.minX,this.maxY=this.minY,this.updateMinMax(t,this.elementMaxX,this.elementY),this.updateMinMax(t,this.elementX,this.elementMaxY),this.updateMinMax(t,this.elementMaxX,this.elementMaxY)},p.MapTile.prototype.updateMinMax=function(t,e,i){var n=t.canvasToMapX(e,i);n<this.minX&&(this.minX=n),n>this.maxX&&(this.maxX=n);var o=t.canvasToMapY(e,i);o<this.minY&&(this.minY=o),o>this.maxY&&(this.maxY=o)},p.MapTile.getKey=function(t,e,i,n){return e+"|"+t.getZoomInt()+"|"+i+"|"+n},p.MapTile.prototype.disconnect=function(){this.canvas.style.visibility="hidden",this.connected=!1},p.MapTile.prototype.connect=function(){this.canvas.style.left=this.elementX+"px",this.canvas.style.top=this.elementY+"px",this.canvas.style.visibility="visible",this.connected=!0},p.MapTile.prototype.mapIntersects=function(t){return this.minX<t[1][0]&&this.minY<t[1][1]&&this.maxX>t[0][0]&&this.maxY>t[0][1]},p.MapTile.prototype.setZoomCache=function(t){if(p.MapGUI.setCssScale){this.zoomCache=!0;var e=t/this.scale;p.MapGUI.setCssScale(this.canvas,e),this.canvas.style.left=e*this.elementX+(e-1)*this.width/2+"px",this.canvas.style.top=e*this.elementY+(e-1)*this.width/2+"px"}},p.MapTile.prototype.clearZoomCache=function(t){p.MapGUI.setCssScale&&(this.zoomCache=!1,p.MapGUI.setCssScale(this.canvas,1),t&&this.disconnect())},p.MapTheme=function(t){this.themeNames=t,this.themes=new Array(t.length),this.loaded=!1},p.MapTheme.prototype.placeTheme=function(t){for(var e=this.themeNames.length,i=!0,n=0;n<e;n++)t.mt==this.themeNames[n]&&(this.themes[n]=t),this.themes[n]||(i=!1);i&&(this.loaded=!0)},p.MapTheme.prototype.getStyle=function(t){for(var e,i,n=this.themeNames.length,o=0;o<n;o++)if(e=this.themes[o],e&&e.s&&(i=e.s[t]))return i;return null},p.MapTheme.prototype.getIcon=function(t){for(var e,i,n=this.themeNames.length,o=0;o<n;o++)if(e=this.themes[o],e&&e.ic&&(i=e.ic[t]))return i;return null},p.MapTheme.prototype.getMarker=function(t){for(var e,i,n=this.themeNames.length,o=0;o<n;o++)if(e=this.themes[o],e&&e.m&&(i=e.m[t]))return i;return null},p.MapView=function(t,e,i,n,o){this.mapControl=t,this.mapCanvas=n,this.mapGUI=o,this.viewport=e,this.mapElement=i,this.mapXInViewport=0,this.mapYInViewport=0,this.scale=0,this.zoomInt=0,this.setQuantizedScale(1.5),this.m2c=[1,0,0,1,0,0],this.c2m=[1,0,0,1,0,0],this.baseM2C=[1,0,0,1],this.baseC2M=[1,0,0,1],this.baseOffM=[0,0],this.baseOffC=[0,0],this.northAtTop=!1,this.customView=!1,this.onViewChange=null,this.event={},this.defaultX=0,this.defaultY=0,this.defaultW=0,this.defaultH=0,this.drawingSet=!1},p.MapView.prototype.translate=function(t,e){var i=this.mapXInViewport+t,n=this.mapYInViewport+e;i+this.baseWidth*this.scale<this.viewport.offsetWidth/2||i>this.viewport.offsetWidth/2||n+this.baseHeight*this.scale<this.viewport.offsetHeight/2||n>this.viewport.offsetHeight/2||(this.mapXInViewport=i,this.mapYInViewport=n,this.mapElement.style.left=this.mapXInViewport+"px",this.mapElement.style.top=this.mapYInViewport+"px",this.mapCanvas.onPan(-this.mapXInViewport,-this.mapYInViewport,-this.mapXInViewport+this.viewport.offsetWidth,-this.mapYInViewport+this.viewport.offsetHeight),this.onViewChange&&(this.event.pan=1,this.event.zoom=0,this.onViewChange(this.event)))},p.MapView.prototype.zoomIn=function(t,e){this.setZoom(1.3*this.scale,t,e)},p.MapView.prototype.zoomOut=function(t,e){this.setZoom(this.scale/1.3,t,e)},p.MapView.prototype.setZoom=function(t,e,i){if(t*this.baseWidth<this.viewport.offsetWidth&&t*this.baseHeight<this.viewport.offsetHeight){var n=this.viewport.offsetWidth/this.baseWidth,o=this.viewport.offsetHeight/this.baseHeight;t=o<n?o:n}e||(e=this.viewport.offsetWidth/2-this.mapXInViewport,i=this.viewport.offsetHeight/2-this.mapYInViewport),t<=0&&(t=1);var s=this.scale;this.setQuantizedScale(t),this.setTransformScale();var r=Math.ceil(this.baseWidth*this.scale),a=Math.ceil(this.baseHeight*this.scale),l=e*this.scale/s,h=i*this.scale/s;this.mapXInViewport+=e-l,this.mapYInViewport+=i-h,this.mapXInViewport+r<this.viewport.offsetWidth/2?this.mapXInViewport=this.viewport.offsetWidth/2-r:this.mapXInViewport>this.viewport.offsetWidth/2&&(this.mapXInViewport=this.viewport.offsetWidth/2),this.mapYInViewport+a<this.viewport.offsetHeight/2?this.mapYInViewport=this.viewport.offsetHeight/2-a:this.mapYInViewport>this.viewport.offsetHeight/2&&(this.mapYInViewport=this.viewport.offsetHeight/2),p.MapGUI.setCssOrigin(this.mapElement,0,0),p.MapGUI.setCssScale(this.mapElement,1),this.mapElement.style.width=r+"px",this.mapElement.style.height=a+"px",this.mapElement.style.left=this.mapXInViewport+"px",this.mapElement.style.top=this.mapYInViewport+"px",this.mapCanvas.onZoom(),"off"!=this.mapGUI.MAP_SCALE_VIEW&&this.mapGUI.onResize(),this.onViewChange&&(this.event.pan=0,this.event.zoom=1,this.onViewChange(this.event))},p.MapView.prototype.getZoom=function(){return this.scale},p.MapView.prototype.getZoomInt=function(){return this.zoomInt},p.MapView.prototype.home=function(){this.resetView(),this.mapCanvas.onZoom(),this.onViewChange&&(this.event.pan=0,this.event.zoom=1,this.onViewChange(this.event))},p.MapView.prototype.getViewportWidth=function(){return this.viewport.clientWidth},p.MapView.prototype.getViewportHeight=function(){return this.viewport.clientHeight},p.MapView.prototype.canvasToMapX=function(t,e){return this.c2m[0]*t+this.c2m[2]*e+this.c2m[4]},p.MapView.prototype.canvasToMapY=function(t,e){return this.c2m[1]*t+this.c2m[3]*e+this.c2m[5]},p.MapView.prototype.mapToCanvasX=function(t,e){return this.m2c[0]*t+this.m2c[2]*e+this.m2c[4]},p.MapView.prototype.mapToCanvasY=function(t,e){return this.m2c[1]*t+this.m2c[3]*e+this.m2c[5]},p.MapView.prototype.viewportToMapX=function(t,e){return this.canvasToMapX(t-this.mapXInViewport,e-this.mapYInViewport)},p.MapView.prototype.viewportToMapY=function(t,e){return this.canvasToMapY(t-this.mapXInViewport,e-this.mapYInViewport)},p.MapView.prototype.mapToViewportX=function(t,e){return this.mapToCanvasX(t,e)+this.mapXInViewport},p.MapView.prototype.mapToViewportY=function(t,e){return this.mapToCanvasY(t,e)+this.mapYInViewport},p.MapView.prototype.getViewportX=function(){return-this.mapXInViewport},p.MapView.prototype.getViewportY=function(){return-this.mapYInViewport},p.MapView.prototype.getM2C=function(){return this.m2c},p.MapView.prototype.getC2M=function(){return this.c2m},p.MapView.prototype.updateDrawing=function(t){t&&this.northAtTop&&t.ar?this.setBaseAngRad(-t.ar):this.customView||this.setBaseAngRad(0);var e;for(e=0;e<4;e++)this.m2c[e]=this.baseM2C[e],this.c2m[e]=this.baseC2M[e];if(this.m2c[4]=0,this.m2c[5]=0,this.c2m[4]=0,this.c2m[5]=0,t){var i=[];i.push([this.mapToCanvasX(t.w,0),this.mapToCanvasY(t.w,0)]),i.push([this.mapToCanvasX(0,t.h),this.mapToCanvasY(0,t.h)]),i.push([this.mapToCanvasX(t.w,t.h),this.mapToCanvasY(t.w,t.h)]);var n=0,o=0,s=0,r=0;for(e=0;e<3;e++)n>i[e][0]&&(n=i[e][0]),o>i[e][1]&&(o=i[e][1]),s<i[e][0]&&(s=i[e][0]),r<i[e][1]&&(r=i[e][1]);this.baseOffM[0]=-n,this.baseOffM[1]=-o,this.baseWidth=s-n,this.baseHeight=r-o,this.baseOffC[0]=-this.canvasToMapX(-n,-o),this.baseOffC[1]=-this.canvasToMapY(-n,-o),t.v?(this.defaultMapX=t.v.cx,this.defaultMapY=t.v.cy,this.defaultW=t.v.w,this.defaultH=t.v.h):(this.defaultMapX=t.w/2,this.defaultMapY=t.h/2,this.defaultW=this.baseWidth,this.defaultH=this.baseHeight),this.drawingSet=!0}else this.baseWidth=0,this.baseHeight=0,this.defaultMapX=0,this.defaultMapY=0,this.defaultW=0,this.defaultH=0,this.drawingSet=!1;this.resetView()},p.MapView.prototype.resetView=function(){if(this.drawingSet&&this.defaultW>0&&this.defaultH>0){var t=this.getViewportWidth()/this.defaultW,e=this.getViewportHeight()/this.defaultH,i=t>e?e:t;this.setQuantizedScale(.95*i)}else this.setQuantizedScale(.7);this.setTransformScale();var n=this.baseWidth*this.scale,o=this.baseHeight*this.scale;this.mapXInViewport=this.viewport.offsetWidth/2-this.mapToCanvasX(this.defaultMapX,this.defaultMapY),this.mapYInViewport=this.viewport.offsetHeight/2-this.mapToCanvasY(this.defaultMapX,this.defaultMapY),this.mapElement.style.width=n+"px",this.mapElement.style.height=o+"px",this.mapElement.style.left=this.mapXInViewport+"px",this.mapElement.style.top=this.mapYInViewport+"px"},p.MapView.prototype.setTransformScale=function(){var t;for(t=0;t<4;t++)this.m2c[t]=this.baseM2C[t]*this.scale,this.c2m[t]=this.baseC2M[t]/this.scale;for(t=0;t<2;t++)this.m2c[4+t]=this.baseOffM[t]*this.scale,this.c2m[4+t]=this.baseOffC[t]},p.MapView.SCALE_QUANT=65536,p.MapView.prototype.setQuantizedScale=function(t){this.zoomInt=Math.floor(t*p.MapView.SCALE_QUANT),this.scale=this.zoomInt/p.MapView.SCALE_QUANT},p.MapView.prototype.setBaseAngRad=function(t){for(;t>Math.PI;)t-=2*Math.PI;for(;t<-Math.PI;)t+=2*Math.PI;var e=Math.cos(t),i=Math.sin(t);this.baseM2C=[e,-i,i,e],this.baseC2M=[e,i,-i,e],this.mapCanvas.baseAngleRad=t},p.MapView.prototype.setTopNorth=function(t){this.northAtTop=t,this.customView=!1},p.MapView.prototype.setBaseTransform=function(t,e){var i=Math.sqrt(t[0]*t[3]-t[1]*t[2]);this.baseM2C[0]=t[0]/i,this.baseM2C[1]=t[1]/i,this.baseM2C[2]=t[2]/i,this.baseM2C[3]=t[3]/i,this.baseC2M[0]=this.baseM2C[3],this.baseC2M[1]=-this.baseM2C[1],this.baseC2M[2]=-this.baseM2C[2],this.baseC2M[3]=this.baseM2C[0],this.customView=!0,this.mapCanvas.baseAngleRad=e},p.MapPopup=function(t,e,i){this.mapCanvas=t,this.view=i,this.isActive=!1,this.isVisible=!1,this.containerX=0,this.containerX=0,this.data=null,this.parentElement=e,this.mainDiv=null},p.MapPopup.MAX_FRACTION=.6,p.MapPopup.MAX_WIDTH=300,p.MapPopup.MAX_HEIGHT=300,p.MapPopup.INFO_CLOSE_MARGIN=5,p.MapPopup.MENU_CLOSE_MARGIN=5,p.MapPopup.prototype.setData=function(t){this.data=t,null!=this.mainDiv&&(this.parentElement.removeChild(this.mainDiv),this.mainDiv=null),t.type==p.popuptype.MENU?this.createMenuPopup(t):t.type==p.popuptype.INFOWINDOW&&this.createInfoPopup(t)},p.MapPopup.prototype.exeCmd=function(t){t.func()},p.MapPopup.prototype.update=function(){var t=this.mapCanvas.data.getCurrentLevel();if(!t||!this.isActive)return void this.setVisible(!1);if(this.data)if(t.id!=this.data.lid)this.setVisible(!1);else{var e=this.view.mapToCanvasX(this.data.mapX,this.data.mapY),i=this.view.mapToCanvasY(this.data.mapX,this.data.mapY);this.data.ox&&(e-=this.data.ox),this.data.oy&&(i-=this.data.oy);var n=this.parentElement.clientHeight;this.parentElement.clientWidth;if(this.setVisible(!0),this.containerX!=e||this.containerY!=i){var o=this.view.mapToViewportY(this.data.mapX,this.data.mapY)-this.mainDiv.offsetHeight;o=n-i+(o>=0?0:o-20);var s=this.view.getViewportWidth()-this.view.mapToViewportX(this.data.mapX,this.data.mapY)-this.mainDiv.offsetWidth;s=s>0?e+20:e-this.mainDiv.offsetWidth-20,this.mainDiv.style.bottom=String(o)+"px",this.mainDiv.style.left=String(s)+"px",this.containerX=e,this.containerY=i}}},p.MapPopup.prototype.setActive=function(t){this.isActive=t,this.update()},p.MapPopup.prototype.setVisible=function(t){this.isVisible!=t&&(t?(this.isVisible=!0,this.mainDiv.style.display="block"):(this.mainDiv.style.display="none",this.isVisible=!1))},p.MapPopup.prototype.createMenuPopup=function(t){var e=this;e.mainDiv=document.createElement("div"),e.mainDiv.className="menu",e.mainDiv.style.position="absolute",e.mainDiv.style.zIndex=p.MapGUI.POPUP_ZINDEX,e.mainDiv.style.bottom="0px",e.mainDiv.style.left="0px",e.containerX=0,e.containerY=0,e.menuWrapperDiv=document.createElement("div"),e.menuWrapperDiv.className="menuWrapper",e.mainDiv.appendChild(this.menuWrapperDiv);var i=document.createElement("ul");if(i.className="menuTable",t.title){var n=document.createElement("li");n.className="menuTitle",n.innerHTML=t.title,i.appendChild(n)}if(t.desc){var n=document.createElement("li");n.className="menuDesc",n.innerHTML=t.desc,i.appendChild(n)}if(t.commands)for(var o=t.commands.length,s=0;s<o;s++){var r=document.createElement("li"),a=t.commands[s],l=document.createElement("a"),h=document.createElement("span");r.className="menuItem",l.className="button success",l.href="",l.innerHTML=a.name,l.cmd=a,l.counter=h.innerHTML=0,l.onclick=function(){return this.cmd.func(),this.firstChild.innerHTML=++this.counter,!1},l.insertBefore(h,l.firstChild),r.appendChild(l),i.appendChild(r)}var u=document.createElement("li");u.className="menuItem";var c=document.createElement("a");c.className="button warning",c.href="",c.innerHTML="Close popup",c.onclick=function(){return setTimeout(function(){e.setActive(!1)},100),!1},u.appendChild(c),i.appendChild(u),e.menuWrapperDiv.appendChild(i),e.mainDiv.style.display="none",e.isVisible=!1,e.parentElement.appendChild(this.mainDiv)},p.MapPopup.prototype.createInfoPopup=function(t){this.mainDiv=document.createElement("div"),this.mainDiv.className="menu",this.mainDiv.setAttribute("id","infoDiv"),this.mainDiv.style.position="absolute",this.mainDiv.style.zIndex=p.MapGUI.POPUP_ZINDEX,this.mainDiv.style.bottom="0px",this.mainDiv.style.left="0px",this.parentElement.appendChild(this.mainDiv)},p.MapControl=function(){if(!p.mapName)return void alert("You must have a map name.");this.mapName=p.mapName,this.createControl(),this.selectInlay={id:0,zi:p.MapControl.SELECT_ZINDEX,t:"Selected",anm:"slct"},this.popup=this.mapCanvas.createPopup();var t=this;this.mapCanvas.onMapClick=function(e,i,n){t.onMapClick(e,i,n)},this.doSelectAction=this.defaultSelectAction,this.selected=null,this.highlighted=!1},p.MapControl.SELECT_ZINDEX=9999,p.MapControl.SHOW_INFO=1,p.MapControl.SHOW_INSIDE=2,p.MapControl.SHOW_NAV=4,p.MapControl.SHOW_ALL=15,p.MapControl.MAX_URL_LENGTH=25,p.MapControl.prototype.getMapData=function(){return this.data},p.MapControl.prototype.centerMap=function(t,e){return},p.MapControl.prototype._prepareMarkers=function(t,e){return r.a.reduce(p.tracker.getTrackerMarkers(2),function(i,n,o){var s={lid:e,mr:"TrackingDot",mt:p.markertype.NAMED,mx:n.x,my:n.y,idat:"Step",anm:p.routeLayerName};return 0===o&&(s.mr="RouteStart",s.idat="Start"),o===t.length-1&&(s.mr="RouteEnd",s.idat="Last Point"),i.push(s),i},[])},p.MapControl.prototype.redrawRouteMarkers=function(){if(p.tracker){var t=h.getCurrentLevel(),e=p.tracker.getTrackerRoutes(5),i=this._prepareMarkers(p.tracker.getTrackerMarkers(2),t.id);if(e&&i){var n={g:[],m:i},o=void 0,s=r.a.reduce(e,function(e,i,n){var s=[];return o?(s.push(o),s.push([1,i.x,i.y])):s.push([0,i.x,i.y]),o=[0,i.x,i.y],e[n]={lid:t.id,t:"Route"+(n+1),shp:s,gt:1},e},[]);n.g=s,this.data.removeAnnotation(p.routeLayerName),this.showAnnotation(n,p.routeLayerName);var a=r.a.last(i);this.centerMap(a.cx,a.cy)}}},p.MapControl.prototype.addRouteMarker=function(t,e){t<0||e<0||t>h.currentDrawing.w||e>h.currentDrawing.h||(p.tracker&&p.tracker.addTrackerLog&&p.tracker.addTrackerLog(t,e),this.redrawRouteMarkers())},p.MapControl.prototype.showPopupMenu=function(t,e,i){var n={};n.type=p.popuptype.MENU,n.title=t.nm,t.desc&&(n.desc=t.desc),n.commands=[],this.loadActivitiesCommands(t,n.commands);var o=!1;if(t.gt||t.lt){var s=this.data.getGeometryLevel(t.id);n.lid=s.id,n.ox=0,n.oy=10,n.mapX=e,n.mapY=i,o=!0}else t.mt&&(o=this.loadMarkerLocationInfo(t,n));return o?(this.popup.setData(n),this.popup.setActive(!0),!0):(this.popup.setActive(!1),!1)},p.MapControl.prototype.defaultSelectAction=function(t,e,i){i?i.idat||(i.p?this.showPopupMenu(i,t,e):(this.popup.setActive(!1),this.addRouteMarker(t,e))):(this.popup.setActive(!1),this.addRouteMarker(t,e))},p.MapControl.prototype.loadMarkerLocationInfo=function(t,e){return e.mapX=t.mx,e.mapY=t.my,e.ox=0,e.oy=t.oy,e.lid=t.lid,!!(isFinite(e.mapX)&&isFinite(e.mapY)||e.lid)||(console.log(1),!1)},p.MapControl.prototype.loadActivitiesCommands=function(t,e){if(t.id&&p.mapActivities)for(var i={},n=0;n<p.mapActivities.length;n++){i=p.mapActivities[n];var o={name:i.name,id:i.id,shelf:t.id,func:function(){p.tracker.addActivityLog(this.id,this.shelf)}};e.push(o)}},p.MapControl.prototype.onMapClick=function(t,e,i){null!=i&&(i.pdat||i.idat||i.p)?i!=this.selected&&this.selectObject(i):null!=this.selected&&this.deselectObject(),this.doSelectAction&&this.doSelectAction(t,e,i)},p.MapControl.prototype.selectObject=function(t){this.highlighted&&this.data.removeInlay("slct",!0),t.id&&t.gt==p.geomtype.AREA?(this.selectInlay.id=t.id,this.data.addInlay(this.selectInlay),this.highlighted=!0):this.highlighted=!1,this.selected=t},p.MapControl.prototype.deselectObject=function(){this.highlighted&&this.data.removeInlay("slct",!0),this.selected=null,this.highlighted=!1},p.MapControl.prototype.showAnnotation=function(t,e){var i,n,o=t.g,s=t.i,r=t.m;if(o)for(n=0;n<o.length;n++)i=o[n],e&&(i.anm=e),this.data.addGeometryOverlay(i);if(s)for(n=0;n<s.length;n++)i=s[n],e&&(i.anm=e),this.data.addGeometryOverlay(i);if(r)for(n=0;n<r.length;n++)i=r[n],e&&(i.anm=e),this.data.addMarkerOverlay(i)},p.MapControl.prototype.createControl=function(){this.mapGUI=new p.MapGUI(this);var t=this.mapGUI.viewportElement,e=this.mapGUI.mapElement;this.mapCanvas=new p.MapCanvas(this,e),this.view=new p.MapView(this,t,e,this.mapCanvas,this.mapGUI),this.data=new p.MapData(this,this.view,this.mapCanvas,this.mapGUI),this.mapGUI.mapCanvas=this.mapCanvas,this.mapGUI.data=this.data,this.mapGUI.view=this.view,this.mapCanvas.data=this.data,this.mapCanvas.view=this.view},e.a=function(){return p}},function(t,e,i){"use strict";var n=i(73),o=i.n(n),s=i(81),r=i.n(s);e["default"]={components:{Loader:o.a,Offline:r.a}}},function(t,e,i){"use strict";var n=i(22),o=i.n(n);e["default"]={props:["title"],components:{ButtonLogout:o.a}}},function(t,e,i){"use strict";var n=i(2);e["default"]={computed:{isAuthorized:function(){return!!this.$store.state.auth_token}},methods:{logout:function(t){this.$store.dispatch("clearAuthToken"),this.goToLogin()},goToLogin:function(){n.a.push({name:"login"})}}}},function(t,e,i){"use strict";e["default"]={props:["errors"]}},function(t,e,i){"use strict";e["default"]={computed:{loader:function(){return this.$store.state.is_loading}}}},function(t,e,i){"use strict";var n=i(6),o=i.n(n),s=i(23),r=i.n(s),a=i(2),l=i(3);e["default"]={components:{AppHeader:o.a,ErrorList:r.a},data:function(){return{username:"",password:"",errors:[]}},computed:{isValidForm:function(){return!(this.username&&this.password)}},created:function(){this.$store.state.auth_token&&this.goToLlist()},methods:{setLoginErrors:function(t){return t.body&&t.body.errors&&(this.errors=t.body.errors),Promise.reject(t)},submitForm:function(t){var e=this;l.a.login(this.username,this.password).then(function(t){e.$store.dispatch("setAuth",t),e.goToLlist()})["catch"](l.a.catchInternetConnection)["catch"](this.setLoginErrors)},goToLlist:function(){a.a.push({name:"list"})}}}},function(t,e,i){"use strict";e["default"]={props:["map"],watch:{map:function(t){this.map.setMapName("map"),this.map.load()}}}},function(t,e,i){"use strict";e["default"]={props:["showQuiz","quiz"]}},function(t,e,i){"use strict";e["default"]={computed:{observation:function(){return this.$store.state.observation}}}},function(t,e,i){"use strict";var n=i(0),o=i.n(n),s=i(3);e["default"]={computed:{isOffline:function(){return!this.$store.state.is_online},dataAmount:function(){return this.$store.state.shoppers.length},isDataExist:function(){return this.dataAmount>0}},methods:{sendData:function(){var t=this,e=o.a.chain(this.$store.state.shoppers).first().cloneDeep().value();e&&s.a.sendShopper(o.a.cloneDeep(e),this.$store.state.auth_token).then(function(){return t.$store.dispatch("removeFirstShopper")}).then(function(){t.sendData()})["catch"](s.a.catchInternetConnection)}}}},function(t,e,i){"use strict";var n=i(80),o=i.n(n),s=i(3),r=i(0),a=i.n(r);e["default"]={components:{ListItem:o.a},data:function(){return{isLoading:!1}},created:function(){this.loadObservations()},computed:{observations:function(){return a.a.orderBy(this.$store.state.observations,"planned_date",["desc"])},isOffline:function(){return!this.$store.state.is_online}},methods:{loadObservations:function(){var t=this;s.a.observations(this.$store.state.auth_token).then(function(e){t.$store.dispatch("setObservations",e)})["catch"](s.a.catchInternetConnection);
}}}},function(t,e,i){"use strict";var n=i(0),o=i.n(n),s=i(3),r=i(2),a=i(23),l=i.n(a);e["default"]={props:["observation"],data:function(){return{errors:[]}},components:{ErrorList:l.a},computed:{date:function(){var t=new Date(this.observation.planned_date);return t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear()},isActive:function(){return this.$store.state.observation.id==this.observation.id},buttonTitle:function(){return this.isActive?"Active Observation":"Load Observation"},isOffline:function(){return!this.$store.state.is_online}},methods:{onClick:function(){this.isOffline||(this.isActive?this.goTo:this.load)()},goTo:function(){r.a.push({name:"map"})},load:function(){var t=this;s.a.observation(this.observation.id,this.$store.state.auth_token).then(function(e){if(!e.activities.length)return void alert("Could not activate this observation. Activities are empty.");if(!e.quiz.quiz_questions.length)return void alert("Could not activate this observation. Quiz is empty.");var i=o.a.chain(e.quiz.quiz_questions).filter(function(t){return"options only"===t.question_type&&o.a.isEqual(t.quiz_question_options,[])}).size().value();return i>0?void alert("Could not activate this observation. Some question does not have options."):void t.$store.dispatch("setObservation",e)})}}}},function(t,e,i){"use strict";var n=i(29),o=(i.n(n),i(13));Offline.options={checkOnLoad:!0,interceptRequests:!1,requests:!1,reconnect:{initialDelay:5,delay:5},checks:{xhr:{url:o.a.baseUrl+"/status"}}},e["default"]={created:function(){var t=this;Offline.on("confirmed-down",function(){t.$store.dispatch("setStatusOffline")}),Offline.on("confirmed-up",function(){t.$store.dispatch("setStatusOnline")})}}},function(t,e,i){"use strict";var n=i(77),o=i.n(n),s=i(79),r=i.n(s),a=i(78),l=i.n(a),h=i(22),u=i.n(h),p=i(6),c=i.n(p);e["default"]={components:{ButtonSendData:l.a,ActiveObservation:o.a,ObservationsList:r.a,ButtonLogout:u.a,AppHeader:c.a}}},function(t,e,i){"use strict";var n=i(74),o=i.n(n),s=i(6),r=i.n(s);e["default"]={components:{Login:o.a,AppHeader:r.a}}},function(t,e,i){"use strict";function n(t){switch(t){case"custom text only":return"c_t";case"custom float only":return"c_f";case"options only":return"q_o_id"}}function o(t){var e={q_id:t.id,c_t:"",c_f:"",q_o_id:""};return e[n(t.question_type)]=t.model,e}var s=i(2),r=i(32),a=i(31),l=i(12),h=i(30),u=i(6),p=i.n(u),c=i(75),d=i.n(c),f=i(76),m=i.n(f);e["default"]={components:{AppHeader:p.a,MapView:d.a,Quiz:m.a},data:function(){return{title:"",showQuiz:!1,quiz:"",tracker:void 0,map:void 0}},mounted:function(){this.title=this.$store.state.observation.name,this.initObservation()},methods:{initObservation:function(){this.tracker=new h.a(this.$store.state.tracker_id,this.$store.state.observation.id),this.map=new r.a,this.map.setMapTheme(a.a),this.map.setMapData(this.$store.state.observation.map),this.map.setMapActivities(this.$store.state.observation.activities),this.map.setTracker(this.tracker)},clearShopperData:function(){this.tracker.initShopper(),_.forEach(this.quiz,function(t){t.model=""}),this.map.load()},resetCurrentShopper:function(){var t=this;i.i(l.a)("Reset current tracking data?",function(e){1===e&&t.clearShopperData()},"Cancel current tracking")},undoLastStep:function(){this.tracker.removeLastTrackerLog()&&this.map.redrawRouteMarkers()},backToList:function(){var t=this;return this.isTrackerLogEmpty&&this.isQuizEmpty?(this.clearShopperData(),void s.a.push({name:"list"})):void i.i(l.a)("Are you sure? Data of current track will be lost.",function(e){1==e&&(t.clearShopperData(),s.a.push({name:"list"}))},"Back to List")},toggleQuiz:function(){this.showQuiz=!this.showQuiz},saveObservation:function(){this.tracker.setQuestionAnswers(_.map(this.quiz,o)),this.$store.dispatch("saveShopper",this.tracker.getShopper()),this.clearShopperData()}},computed:{buttonQuizTitle:function(){return this.showQuiz?"Hide Quiz":"Show Quiz"},quiz:function(){return _.map(this.$store.state.observation.quiz.quiz_questions,function(t){return t.model="",t})},isTrackerLogEmpty:function(){return!_.has(this.tracker,"shopper.tr_logs")||0===this.tracker.shopper.tr_logs.length},isQuizEmpty:function(){return _.every(this.quiz,{model:""})},isQuizNotFinished:function(){return _.some(this.quiz,{model:""})},isObservationNotComplete:function(){return this.isTrackerLogEmpty||this.isQuizNotFinished}}}},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},,function(t,e,i){(function(e){var i="object"==typeof e&&e&&e.Object===Object&&e;t.exports=i}).call(e,i(7))},function(t,e,i){var n=i(64),o="object"==typeof self&&self&&self.Object===Object&&self,s=n||o||Function("return this")();t.exports=s},function(t,e,i){function n(t,e,i){function n(e){var i=w,n=y;return w=y=void 0,T=e,M=t.apply(n,i)}function u(t){return T=t,_=setTimeout(d,e),C?n(t):M}function p(t){var i=t-E,n=t-T,o=e-i;return b?h(o,I-n):o}function c(t){var i=t-E,n=t-T;return void 0===E||i>=e||i<0||b&&n>=I}function d(){var t=s();return c(t)?f(t):void(_=setTimeout(d,p(t)))}function f(t){return _=void 0,L&&w?n(t):(w=y=void 0,M)}function m(){void 0!==_&&clearTimeout(_),T=0,w=E=y=_=void 0}function v(){return void 0===_?M:f(s())}function g(){var t=s(),i=c(t);if(w=arguments,y=this,E=t,i){if(void 0===_)return u(E);if(b)return _=setTimeout(d,e),n(E)}return void 0===_&&(_=setTimeout(d,e)),M}var w,y,I,M,_,E,T=0,C=!1,b=!1,L=!0;if("function"!=typeof t)throw new TypeError(a);return e=r(e)||0,o(i)&&(C=!!i.leading,b="maxWait"in i,I=b?l(r(i.maxWait)||0,e):I,L="trailing"in i?!!i.trailing:L),g.cancel=m,g.flush=v,g}var o=i(21),s=i(69),r=i(70),a="Expected a function",l=Math.max,h=Math.min;t.exports=n},function(t,e){function i(t){return null!=t&&"object"==typeof t}t.exports=i},function(t,e,i){function n(t){return"symbol"==typeof t||o(t)&&a.call(t)==s}var o=i(67),s="[object Symbol]",r=Object.prototype,a=r.toString;t.exports=n},function(t,e,i){var n=i(65),o=function(){return n.Date.now()};t.exports=o},function(t,e,i){function n(t){if("number"==typeof t)return t;if(s(t))return r;if(o(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=o(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(a,"");var i=h.test(t);return i||u.test(t)?p(t.slice(2),i?2:8):l.test(t)?r:+t}var o=i(21),s=i(68),r=NaN,a=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,u=/^0o[0-7]+$/i,p=parseInt;t.exports=n},,function(t,e,i){var n,o;i(60),n=i(33);var s=i(97);o=n=n||{},"object"!=typeof n["default"]&&"function"!=typeof n["default"]||(o=n=n["default"]),"function"==typeof o&&(o=o.options),o.render=s.render,o.staticRenderFns=s.staticRenderFns,t.exports=n},function(t,e,i){var n,o;i(52),n=i(37);var s=i(87);o=n=n||{},"object"!=typeof n["default"]&&"function"!=typeof n["default"]||(o=n=n["default"]),"function"==typeof o&&(o=o.options),o.render=s.render,o.staticRenderFns=s.staticRenderFns,t.exports=n},function(t,e,i){var n,o;i(58),n=i(38);var s=i(94);o=n=n||{},"object"!=typeof n["default"]&&"function"!=typeof n["default"]||(o=n=n["default"]),"function"==typeof o&&(o=o.options),o.render=s.render,o.staticRenderFns=s.staticRenderFns,t.exports=n},function(t,e,i){var n,o;i(56),n=i(39);var s=i(92);o=n=n||{},"object"!=typeof n["default"]&&"function"!=typeof n["default"]||(o=n=n["default"]),"function"==typeof o&&(o=o.options),o.render=s.render,o.staticRenderFns=s.staticRenderFns,t.exports=n},function(t,e,i){var n,o;i(57),n=i(40);var s=i(93);o=n=n||{},"object"!=typeof n["default"]&&"function"!=typeof n["default"]||(o=n=n["default"]),"function"==typeof o&&(o=o.options),o.render=s.render,o.staticRenderFns=s.staticRenderFns,t.exports=n},function(t,e,i){var n,o;i(54),n=i(41);var s=i(89);o=n=n||{},"object"!=typeof n["default"]&&"function"!=typeof n["default"]||(o=n=n["default"]),"function"==typeof o&&(o=o.options),o.render=s.render,o.staticRenderFns=s.staticRenderFns,t.exports=n},function(t,e,i){var n,o;i(59),n=i(42);var s=i(95);o=n=n||{},"object"!=typeof n["default"]&&"function"!=typeof n["default"]||(o=n=n["default"]),"function"==typeof o&&(o=o.options),o.render=s.render,o.staticRenderFns=s.staticRenderFns,t.exports=n},function(t,e,i){var n,o;i(53),n=i(43);var s=i(88);o=n=n||{},"object"!=typeof n["default"]&&"function"!=typeof n["default"]||(o=n=n["default"]),"function"==typeof o&&(o=o.options),o.render=s.render,o.staticRenderFns=s.staticRenderFns,t.exports=n},function(t,e,i){var n,o;i(62),n=i(44);var s=i(100);o=n=n||{},"object"!=typeof n["default"]&&"function"!=typeof n["default"]||(o=n=n["default"]),"function"==typeof o&&(o=o.options),o.render=s.render,o.staticRenderFns=s.staticRenderFns,t.exports=n},function(t,e,i){var n,o;i(50),n=i(45);var s=i(85);o=n=n||{},"object"!=typeof n["default"]&&"function"!=typeof n["default"]||(o=n=n["default"]),"function"==typeof o&&(o=o.options),o.render=s.render,o.staticRenderFns=s.staticRenderFns,t.exports=n},function(t,e,i){var n,o;n=i(46);var s=i(91);o=n=n||{},"object"!=typeof n["default"]&&"function"!=typeof n["default"]||(o=n=n["default"]),"function"==typeof o&&(o=o.options),o.render=s.render,o.staticRenderFns=s.staticRenderFns,t.exports=n},function(t,e,i){var n,o;n=i(47);var s=i(99);o=n=n||{},"object"!=typeof n["default"]&&"function"!=typeof n["default"]||(o=n=n["default"]),"function"==typeof o&&(o=o.options),o.render=s.render,o.staticRenderFns=s.staticRenderFns,t.exports=n},function(t,e,i){var n,o;i(61),n=i(48);var s=i(98);o=n=n||{},"object"!=typeof n["default"]&&"function"!=typeof n["default"]||(o=n=n["default"]),"function"==typeof o&&(o=o.options),o.render=s.render,o.staticRenderFns=s.staticRenderFns,t.exports=n},function(module,exports){module.exports={render:function(){with(this)return _m(0)},staticRenderFns:[function(){with(this)return _h("div",{staticClass:"offline"})}]}},function(module,exports){module.exports={render:function(){with(this)return errors.length?_h("ul",{staticClass:"error-list"},[_l(errors,function(t){return _h("li",[_s(t)])})]):_e()},staticRenderFns:[]}},function(module,exports){module.exports={render:function(){with(this)return _h("div",{staticClass:"loader","class":{on:loader}},[loader?_h("div",{staticClass:"spinner"},[_m(0)," ",_m(1)," ",_m(2)]):_e()])},staticRenderFns:[function(){with(this)return _h("div",{staticClass:"bounce1"})},function(){with(this)return _h("div",{staticClass:"bounce2"})},function(){with(this)return _h("div",{staticClass:"bounce3"})}]}},function(module,exports){module.exports={render:function(){with(this)return _h("div",{staticClass:"observation-list"},[observations.length?_h("div",[_h("button",{staticClass:"button__h3 light-blue",attrs:{disabled:isOffline},on:{click:loadObservations}},["Update list"])," ",_m(0)," ",_l(observations,function(t){return _h("div",{staticClass:"observations"},[_h("list-item",{attrs:{observation:t}})])})]):_e()," ",observations.length?_e():_h("div",[_m(1)," ",_h("button",{staticClass:"full-width big",on:{click:loadObservations}},["Load observations from server"])])])},staticRenderFns:[function(){with(this)return _h("h3",["Avaliable Observations"])},function(){with(this)return _h("p",{staticClass:"text-center caption"},["There are no observations on the device."])}]}},function(module,exports){module.exports={render:function(){with(this)return observation?_h("router-link",{staticClass:"active-observation",attrs:{to:{name:"map"}}},[_m(0)," ",_h("h2",["\n    "+_s(observation.name)+"\n  "])]):_e()},staticRenderFns:[function(){with(this)return _h("p",{staticClass:"caption"},["Active observation"])}]}},function(module,exports){module.exports={render:function(){with(this)return _h("header",{staticClass:"toolbar"},[_t("left")," ",_h("div",{staticClass:"toolbar-content"},[_h("div",{staticClass:"toolbar-title"},[_s(title)])])," ",_t("right")])},staticRenderFns:[]}},function(module,exports){module.exports={render:function(){with(this)return _h("div",{staticClass:"list"},[_h("app-header",{attrs:{title:"Observations"}},[_h("button-logout",{slot:"left"})])," ",_h("button-send-data")," ",_h("active-observation")," ",_h("observations-list")])},staticRenderFns:[]}},function(module,exports){module.exports={render:function(){with(this)return _m(0)},staticRenderFns:[function(){with(this)return _h("div",{staticClass:"map",attrs:{id:"map"}})}]}},function(module,exports){module.exports={render:function(){with(this)return _h("div",{staticClass:"quiz","class":{quiz_visible:showQuiz}},[_h("form",{staticClass:"form"},[_l(quiz,function(t){return _h("div",{staticClass:"clearfix"},[_h("label",[_s(t.name)])," ","options only"===t.question_type?_h("select",{directives:[{name:"model",rawName:"v-model.lazy",value:t.model,expression:"question.model",modifiers:{lazy:!0}}],on:{change:function(e){t.model=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value})[0]}}},[_m(0,!0)," ",_l(t.quiz_question_options,function(t){return _h("option",{domProps:{value:t.id}},["\n          "+_s(t.option)+"\n        "])})]):_e()," ","custom float only"===t.question_type?_h("input",{directives:[{name:"model",rawName:"v-model.number",value:t.model,expression:"question.model",modifiers:{number:!0}}],attrs:{type:"number"},domProps:{value:_s(t.model)},on:{input:function(e){e.target.composing||(t.model=_n(e.target.value))}}}):_e()," ","custom text only"===t.question_type?_h("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.model,expression:"question.model",modifiers:{trim:!0}}],attrs:{type:"text"},domProps:{value:_s(t.model)},on:{input:function(e){e.target.composing||(t.model=e.target.value.trim())}}}):_e()])})])])},staticRenderFns:[function(){with(this)return _h("option",{attrs:{value:""}},["--"])}]}},function(module,exports){module.exports={render:function(){with(this)return _h("div",{staticClass:"login-form"},[_h("form",{staticClass:"form",attrs:{name:"loginForm"},on:{submit:function(t){t.preventDefault(),submitForm(t)}}},[_h("error-list",{attrs:{errors:errors}})," ",_h("div",{staticClass:"clearfix"},[_m(0)," ",_h("input",{directives:[{name:"model",rawName:"v-model",value:username,expression:"username"}],attrs:{type:"email",name:"username",id:"username",value:"",placeholder:"Login",required:""},domProps:{value:_s(username)},on:{input:function(t){t.target.composing||(username=t.target.value)}}})])," ",_h("div",{staticClass:"clearfix"},[_m(1)," ",_h("input",{directives:[{name:"model",rawName:"v-model",value:password,expression:"password"}],attrs:{name:"password",id:"password",type:"password",value:"",placeholder:"Password",required:""},domProps:{value:_s(password)},on:{input:function(t){t.target.composing||(password=t.target.value)}}})])," ",_h("div",{staticClass:"clearfix"},[_h("button",{attrs:{type:"submit",disabled:isValidForm}},["Login"])])])])},staticRenderFns:[function(){with(this)return _h("label",{attrs:{"for":"username"}},["Email"])},function(){with(this)return _h("label",{attrs:{"for":"password"}},["Password"])}]}},function(module,exports){module.exports={render:function(){with(this)return _h("div",{staticClass:"send-data"},[isDataExist?_h("button",{staticClass:"full-width",attrs:{disabled:isOffline},on:{click:function(t){t.preventDefault(),sendData(t)}}},["Send Data to Server ("+_s(dataAmount)+")"]):_e()])},staticRenderFns:[]}},function(module,exports){module.exports={render:function(){with(this)return _h("span",[isAuthorized?_h("button",{on:{click:function(t){t.preventDefault(),logout(t)}}},["Logout"]):_e()])},staticRenderFns:[]}},function(module,exports){module.exports={render:function(){with(this)return _h("div",{attrs:{id:"app"}},[_h("router-view")," ",_h("loader")," ",_h("offline")])},staticRenderFns:[]}},function(module,exports){module.exports={render:function(){with(this)return _h("div",{staticClass:"observation"},[_h("app-header",{attrs:{title:title}},[_h("button",{slot:"left",on:{click:function(t){t.preventDefault(),backToList(t)}}},["Back to List"])," ",_h("button",{slot:"right",on:{click:function(t){t.preventDefault(),toggleQuiz(t)}}},[_s(buttonQuizTitle)])])," ",_h("div",{staticClass:"map-view"},[_h("map-view",{attrs:{map:map}})])," ",_h("quiz",{attrs:{quiz:quiz,"show-quiz":showQuiz}})," ",_h("footer",{staticClass:"footer"},[_h("div",{staticClass:"footer__button"},[_h("button",{staticClass:"negative",attrs:{disabled:isTrackerLogEmpty},on:{click:function(t){t.preventDefault(),undoLastStep(t)}}},["Undo"])])," ",_h("div",{staticClass:"footer__button"},[_h("button",{staticClass:"negative",attrs:{disabled:isTrackerLogEmpty&&isQuizEmpty},on:{click:function(t){t.preventDefault(),resetCurrentShopper(t)}}},["Reset"])])," ",_h("div",{staticClass:"footer__button footer__button_full"},[_h("button",{staticClass:"positive full-width",attrs:{disabled:isObservationNotComplete},on:{click:function(t){t.preventDefault(),saveObservation(t)}}},["Complete"])])])])},staticRenderFns:[]}},function(module,exports){module.exports={render:function(){with(this)return _h("div",{staticClass:"login"},[_h("app-header",{attrs:{title:"Login"}})," ",_h("login")])},staticRenderFns:[]}},function(module,exports){module.exports={render:function(){with(this)return _h("div",{staticClass:"flex-container observation-item","class":{"observation-item_online":!isOffline}},[_h("div",{staticClass:"flex-item date"},[_h("p",{staticClass:"caption"},[_s(date)])])," ",_h("div",{staticClass:"flex-item flex-item_full info",on:{click:function(t){t.preventDefault(),onClick(t)}}},[_h("h4",[_s(observation.name)+" ",observation.shop.name?_h("em"):_e()])," ",observation.shop.address?_h("p",{staticClass:"caption"},[_s(observation.shop.name)+", "+_s(observation.shop.address)]):_e()," ",observation.description?_h("p",[_s(observation.description)]):_e()," ",_h("error-list",{attrs:{errors:errors}})])," ",_h("div",{staticClass:"flex-item button",on:{click:function(t){t.preventDefault(),onClick(t)}}},[_h("button",{"class":{positive:isActive},attrs:{disabled:isOffline}},["\n      "+_s(buttonTitle)+"\n    "])])])},staticRenderFns:[]}},function(t,e){"use strict";function i(t){this.state=at,this.value=void 0,this.deferred=[];var e=this;try{t(function(t){e.resolve(t)},function(t){e.reject(t)})}catch(i){e.reject(i)}}function n(t,e){t instanceof Promise?this.promise=t:this.promise=new Promise(t.bind(e)),this.context=e}function o(t){pt=t.util,ut=t.config.debug||!t.config.silent}function s(t){"undefined"!=typeof console&&ut&&console.warn("[VueResource warn]: "+t)}function r(t){"undefined"!=typeof console&&console.error(t)}function a(t,e){return pt.nextTick(t,e)}function l(t){return t.replace(/^\s*|\s*$/g,"")}function h(t){return t?t.toLowerCase():""}function u(t){return t?t.toUpperCase():""}function p(t){return"string"==typeof t}function c(t){return t===!0||t===!1}function d(t){return"function"==typeof t}function f(t){return null!==t&&"object"==typeof t}function m(t){return f(t)&&Object.getPrototypeOf(t)==Object.prototype}function v(t){return"undefined"!=typeof Blob&&t instanceof Blob}function g(t){return"undefined"!=typeof FormData&&t instanceof FormData}function w(t,e,i){var o=n.resolve(t);return arguments.length<2?o:o.then(e,i)}function y(t,e,i){return i=i||{},d(i)&&(i=i.call(e)),M(t.bind({$vm:e,$options:i}),t,{$options:i})}function I(t,e){var i,n;if(t&&"number"==typeof t.length)for(i=0;i<t.length;i++)e.call(t[i],t[i],i);else if(f(t))for(n in t)t.hasOwnProperty(n)&&e.call(t[n],t[n],n);return t}function M(t){var e=ct.call(arguments,1);return e.forEach(function(e){T(t,e,!0)}),t}function _(t){var e=ct.call(arguments,1);return e.forEach(function(e){for(var i in e)void 0===t[i]&&(t[i]=e[i])}),t}function E(t){var e=ct.call(arguments,1);return e.forEach(function(e){T(t,e)}),t}function T(t,e,i){for(var n in e)i&&(m(e[n])||dt(e[n]))?(m(e[n])&&!m(t[n])&&(t[n]={}),dt(e[n])&&!dt(t[n])&&(t[n]=[]),T(t[n],e[n],i)):void 0!==e[n]&&(t[n]=e[n])}function C(t,e){var i=e(t);return p(t.root)&&!i.match(/^(https?:)?\//)&&(i=t.root+"/"+i),i}function b(t,e){var i=Object.keys(G.options.params),n={},o=e(t);return I(t.params,function(t,e){i.indexOf(e)===-1&&(n[e]=t)}),n=G.params(n),n&&(o+=(o.indexOf("?")==-1?"?":"&")+n),o}function L(t,e,i){var n=O(t),o=n.expand(e);return i&&i.push.apply(i,n.vars),o}function O(t){var e=["+","#",".","/",";","?","&"],i=[];return{vars:i,expand:function(n){return t.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(t,o,s){if(o){var r=null,a=[];if(e.indexOf(o.charAt(0))!==-1&&(r=o.charAt(0),o=o.substr(1)),o.split(/,/g).forEach(function(t){var e=/([^:\*]*)(?::(\d+)|(\*))?/.exec(t);a.push.apply(a,A(n,r,e[1],e[2]||e[3])),i.push(e[1])}),r&&"+"!==r){var l=",";return"?"===r?l="&":"#"!==r&&(l=r),(0!==a.length?r:"")+a.join(l)}return a.join(",")}return U(s)})}}}function A(t,e,i,n){var o=t[i],s=[];if(x(o)&&""!==o)if("string"==typeof o||"number"==typeof o||"boolean"==typeof o)o=o.toString(),n&&"*"!==n&&(o=o.substring(0,parseInt(n,10))),s.push(S(e,o,D(e)?i:null));else if("*"===n)Array.isArray(o)?o.filter(x).forEach(function(t){s.push(S(e,t,D(e)?i:null))}):Object.keys(o).forEach(function(t){x(o[t])&&s.push(S(e,o[t],t))});else{var r=[];Array.isArray(o)?o.filter(x).forEach(function(t){r.push(S(e,t))}):Object.keys(o).forEach(function(t){x(o[t])&&(r.push(encodeURIComponent(t)),r.push(S(e,o[t].toString())))}),D(e)?s.push(encodeURIComponent(i)+"="+r.join(",")):0!==r.length&&s.push(r.join(","))}else";"===e?s.push(encodeURIComponent(i)):""!==o||"&"!==e&&"?"!==e?""===o&&s.push(""):s.push(encodeURIComponent(i)+"=");return s}function x(t){return void 0!==t&&null!==t}function D(t){return";"===t||"&"===t||"?"===t}function S(t,e,i){return e="+"===t||"#"===t?U(e):encodeURIComponent(e),i?encodeURIComponent(i)+"="+e:e}function U(t){return t.split(/(%[0-9A-Fa-f]{2})/g).map(function(t){return/%[0-9A-Fa-f]/.test(t)||(t=encodeURI(t)),t}).join("")}function k(t){var e=[],i=L(t.url,t.params,e);return e.forEach(function(e){delete t.params[e]}),i}function G(t,e){var i,n=this||{},o=t;return p(t)&&(o={url:t,params:e}),o=M({},G.options,n.$options,o),G.transforms.forEach(function(t){i=N(t,i,n.$vm)}),i(o)}function N(t,e,i){return function(n){return t.call(i,n,e)}}function R(t,e,i){var n,o=dt(e),s=m(e);I(e,function(e,r){n=f(e)||dt(e),i&&(r=i+"["+(s||n?r:"")+"]"),!i&&o?t.add(e.name,e.value):n?R(t,e,r):t.add(r,e)})}function W(t){return new n(function(e){var i=new XDomainRequest,n=function(n){var o=n.type,s=0;"load"===o?s=200:"error"===o&&(s=500),e(t.respondWith(i.responseText,{status:s}))};t.abort=function(){return i.abort()},i.open(t.method,t.getUrl()),i.timeout=0,i.onload=n,i.onerror=n,i.ontimeout=n,i.onprogress=function(){},i.send(t.getBody())})}function F(t,e){!c(t.crossOrigin)&&V(t)&&(t.crossOrigin=!0),t.crossOrigin&&(wt||(t.client=W),delete t.emulateHTTP),e()}function V(t){var e=G.parse(G(t));return e.protocol!==gt.protocol||e.host!==gt.host}function H(t,e){g(t.body)?t.headers["delete"]("Content-Type"):(f(t.body)||dt(t.body))&&(t.emulateJSON?(t.body=G.params(t.body),t.headers.set("Content-Type","application/x-www-form-urlencoded")):t.body=JSON.stringify(t.body)),e(function(t){return Object.defineProperty(t,"data",{get:function(){return this.body},set:function(t){this.body=t}}),t.bodyText?w(t.text(),function(e){var i=t.headers.get("Content-Type");if(p(i)&&0===i.indexOf("application/json"))try{t.body=JSON.parse(e)}catch(n){t.body=null}else t.body=e;return t}):t})}function P(t){return new n(function(e){var i,n,o=t.jsonp||"callback",s="_jsonp"+Math.random().toString(36).substr(2),r=null;i=function(i){var o=i.type,a=0;"load"===o&&null!==r?a=200:"error"===o&&(a=500),e(t.respondWith(r,{status:a})),delete window[s],document.body.removeChild(n)},t.params[o]=s,window[s]=function(t){r=JSON.stringify(t)},n=document.createElement("script"),n.src=t.getUrl(),n.type="text/javascript",n.async=!0,n.onload=i,n.onerror=i,document.body.appendChild(n)})}function X(t,e){"JSONP"==t.method&&(t.client=P),e(function(e){if("JSONP"==t.method)return w(e.json(),function(t){return e.body=t,e})})}function z(t,e){d(t.before)&&t.before.call(this,t),e()}function B(t,e){t.emulateHTTP&&/^(PUT|PATCH|DELETE)$/i.test(t.method)&&(t.headers.set("X-HTTP-Method-Override",t.method),t.method="POST"),e()}function Y(t,e){var i=ft({},et.headers.common,t.crossOrigin?{}:et.headers.custom,et.headers[h(t.method)]);I(i,function(e,i){t.headers.has(i)||t.headers.set(i,e)}),e()}function q(t,e){var i;t.timeout&&(i=setTimeout(function(){t.abort()},t.timeout)),e(function(t){clearTimeout(i)})}function Z(t){return new n(function(e){var i=new XMLHttpRequest,n=function(n){var o=t.respondWith("response"in i?i.response:i.responseText,{status:1223===i.status?204:i.status,statusText:1223===i.status?"No Content":l(i.statusText)});I(l(i.getAllResponseHeaders()).split("\n"),function(t){o.headers.append(t.slice(0,t.indexOf(":")),t.slice(t.indexOf(":")+1))}),e(o)};t.abort=function(){return i.abort()},t.progress&&("GET"===t.method?i.addEventListener("progress",t.progress):/^(POST|PUT)$/i.test(t.method)&&i.upload.addEventListener("progress",t.progress)),i.open(t.method,t.getUrl(),!0),"responseType"in i&&(i.responseType="blob"),t.credentials===!0&&(i.withCredentials=!0),t.headers.forEach(function(t,e){i.setRequestHeader(e,t)}),i.timeout=0,i.onload=n,i.onerror=n,i.send(t.getBody())})}function j(t){function e(e){return new n(function(n){function a(){i=o.pop(),d(i)?i.call(t,e,l):(s("Invalid interceptor of type "+typeof i+", must be a function"),l())}function l(e){if(d(e))r.unshift(e);else if(f(e))return r.forEach(function(i){e=w(e,function(e){return i.call(t,e)||e})}),void w(e,n);a()}a()},t)}var i,o=[$],r=[];return f(t)||(t=null),e.use=function(t){o.push(t)},e}function $(t,e){var i=t.client||Z;e(i(t))}function Q(t,e){return Object.keys(t).reduce(function(t,i){return h(e)===h(i)?i:t},null)}function K(t){if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return l(t)}function J(t){return new n(function(e){var i=new FileReader;i.readAsText(t),i.onload=function(){e(i.result)}})}function tt(t){return 0===t.type.indexOf("text")||t.type.indexOf("json")!==-1}function et(t){var e=this||{},i=j(e.$vm);return _(t||{},e.$options,et.options),et.interceptors.forEach(function(t){i.use(t)}),i(new _t(t)).then(function(t){return t.ok?t:n.reject(t)},function(t){return t instanceof Error&&r(t),n.reject(t)})}function it(t,e,i,n){var o=this||{},s={};return i=ft({},it.actions,i),I(i,function(i,r){i=M({url:t,params:ft({},e)},n,i),s[r]=function(){return(o.$http||et)(nt(i,arguments))}}),s}function nt(t,e){var i,n=ft({},t),o={};switch(e.length){case 2:o=e[0],i=e[1];break;case 1:/^(POST|PUT|PATCH)$/i.test(n.method)?i=e[0]:o=e[0];break;case 0:break;default:throw"Expected up to 4 arguments [params, body], got "+e.length+" arguments"}return n.body=i,n.params=ft({},n.params,o),n}function ot(t){ot.installed||(o(t),t.url=G,t.http=et,t.resource=it,t.Promise=n,Object.defineProperties(t.prototype,{$url:{get:function(){return y(t.url,this,this.$options.url)}},$http:{get:function(){return y(t.http,this,this.$options.http)}},$resource:{get:function(){return t.resource.bind(this)}},$promise:{get:function(){var e=this;return function(i){return new t.Promise(i,e)}}}}))}var st=0,rt=1,at=2;i.reject=function(t){return new i(function(e,i){i(t)})},i.resolve=function(t){return new i(function(e,i){e(t)})},i.all=function(t){return new i(function(e,n){function o(i){return function(n){r[i]=n,s+=1,s===t.length&&e(r)}}var s=0,r=[];0===t.length&&e(r);for(var a=0;a<t.length;a+=1)i.resolve(t[a]).then(o(a),n)})},i.race=function(t){return new i(function(e,n){for(var o=0;o<t.length;o+=1)i.resolve(t[o]).then(e,n)})};var lt=i.prototype;lt.resolve=function(t){var e=this;if(e.state===at){if(t===e)throw new TypeError("Promise settled with itself.");var i=!1;try{var n=t&&t.then;if(null!==t&&"object"==typeof t&&"function"==typeof n)return void n.call(t,function(t){i||e.resolve(t),i=!0},function(t){i||e.reject(t),i=!0})}catch(o){return void(i||e.reject(o))}e.state=st,e.value=t,e.notify()}},lt.reject=function(t){var e=this;if(e.state===at){if(t===e)throw new TypeError("Promise settled with itself.");e.state=rt,e.value=t,e.notify()}},lt.notify=function(){var t=this;a(function(){if(t.state!==at)for(;t.deferred.length;){var e=t.deferred.shift(),i=e[0],n=e[1],o=e[2],s=e[3];try{t.state===st?o("function"==typeof i?i.call(void 0,t.value):t.value):t.state===rt&&("function"==typeof n?o(n.call(void 0,t.value)):s(t.value))}catch(r){s(r)}}})},lt.then=function(t,e){var n=this;return new i(function(i,o){n.deferred.push([t,e,i,o]),n.notify()})},lt["catch"]=function(t){return this.then(void 0,t)},"undefined"==typeof Promise&&(window.Promise=i),n.all=function(t,e){return new n(Promise.all(t),e)},n.resolve=function(t,e){return new n(Promise.resolve(t),e)},n.reject=function(t,e){return new n(Promise.reject(t),e)},n.race=function(t,e){return new n(Promise.race(t),e)};var ht=n.prototype;ht.bind=function(t){return this.context=t,this},ht.then=function(t,e){return t&&t.bind&&this.context&&(t=t.bind(this.context)),e&&e.bind&&this.context&&(e=e.bind(this.context)),new n(this.promise.then(t,e),this.context)},ht["catch"]=function(t){return t&&t.bind&&this.context&&(t=t.bind(this.context)),new n(this.promise["catch"](t),this.context)},ht["finally"]=function(t){return this.then(function(e){return t.call(this),e},function(e){return t.call(this),Promise.reject(e)})};var ut=!1,pt={},ct=[].slice,dt=Array.isArray,ft=Object.assign||E,mt=document.documentMode,vt=document.createElement("a");G.options={url:"",root:null,params:{}},G.transforms=[k,b,C],G.params=function(t){var e=[],i=encodeURIComponent;return e.add=function(t,e){d(e)&&(e=e()),null===e&&(e=""),this.push(i(t)+"="+i(e))},R(e,t),e.join("&").replace(/%20/g,"+")},G.parse=function(t){return mt&&(vt.href=t,t=vt.href),vt.href=t,{href:vt.href,protocol:vt.protocol?vt.protocol.replace(/:$/,""):"",port:vt.port,host:vt.host,hostname:vt.hostname,pathname:"/"===vt.pathname.charAt(0)?vt.pathname:"/"+vt.pathname,search:vt.search?vt.search.replace(/^\?/,""):"",hash:vt.hash?vt.hash.replace(/^#/,""):""}};var gt=G.parse(location.href),wt="withCredentials"in new XMLHttpRequest,yt=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},It=function(){function t(e){var i=this;yt(this,t),this.map={},I(e,function(t,e){return i.append(e,t)})}return t.prototype.has=function(t){return null!==Q(this.map,t)},t.prototype.get=function(t){var e=this.map[Q(this.map,t)];return e?e[0]:null},t.prototype.getAll=function(t){return this.map[Q(this.map,t)]||[]},t.prototype.set=function(t,e){this.map[K(Q(this.map,t)||t)]=[l(e)]},t.prototype.append=function(t,e){var i=this.getAll(t);i.length?i.push(l(e)):this.set(t,e)},t.prototype["delete"]=function(t){delete this.map[Q(this.map,t)]},t.prototype.forEach=function(t,e){var i=this;I(this.map,function(n,o){I(n,function(n){return t.call(e,n,o,i)})})},t}(),Mt=function(){function t(e,i){var n=i.url,o=i.headers,s=i.status,r=i.statusText;yt(this,t),this.url=n,this.ok=s>=200&&s<300,this.status=s||0,this.statusText=r||"",this.headers=new It(o),this.body=e,p(e)?this.bodyText=e:v(e)&&(this.bodyBlob=e,tt(e)&&(this.bodyText=J(e)))}return t.prototype.blob=function(){return w(this.bodyBlob)},t.prototype.text=function(){return w(this.bodyText)},t.prototype.json=function(){return w(this.text(),function(t){return JSON.parse(t)})},t}(),_t=function(){function t(e){yt(this,t),this.body=null,this.params={},ft(this,e,{method:u(e.method||"GET")}),this.headers instanceof It||(this.headers=new It(this.headers))}return t.prototype.getUrl=function(){return G(this)},t.prototype.getBody=function(){return this.body},t.prototype.respondWith=function(t,e){return new Mt(t,ft(e||{},{url:this.getUrl()}))},t}(),Et={"X-Requested-With":"XMLHttpRequest"},Tt={Accept:"application/json, text/plain, */*"},Ct={"Content-Type":"application/json;charset=utf-8"};et.options={},et.headers={put:Ct,post:Ct,patch:Ct,"delete":Ct,custom:Et,common:Tt},et.interceptors=[z,q,B,H,X,Y,F],["get","delete","head","jsonp"].forEach(function(t){et[t]=function(e,i){return this(ft(i||{},{url:e,method:t}))}}),["post","put","patch"].forEach(function(t){
et[t]=function(e,i,n){return this(ft(n||{},{url:e,method:t,body:i}))}}),it.actions={get:{method:"GET"},save:{method:"POST"},query:{method:"GET"},update:{method:"PUT"},remove:{method:"DELETE"},"delete":{method:"DELETE"}},"undefined"!=typeof window&&window.Vue&&window.Vue.use(ot),t.exports=ot},function(t,e,i){"use strict";var n=i(25);n.a.$mount("#app")}],[102]);
//# sourceMappingURL=client.14c3b7b2.js.map